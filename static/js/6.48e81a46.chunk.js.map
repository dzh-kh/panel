{"version":3,"sources":["../node_modules/antd/es/grid/col.js","../node_modules/antd/es/grid/row.js","../node_modules/konva/lib/Factory.js","../node_modules/konva/lib/Global.js","../node_modules/konva/lib/Validators.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/konva/lib/Util.js","../node_modules/konva/lib/Node.js","../node_modules/konva/lib/Shape.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/get.js","../node_modules/antd/es/grid/RowContext.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/konva/lib/Canvas.js","../node_modules/konva/lib/Container.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/konva/lib/DragAndDrop.js","../node_modules/konva/lib/Group.js","../node_modules/konva/lib/Animation.js","../node_modules/konva/lib/shapes/Path.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/toPropertyKey.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/konva/lib/Context.js","../node_modules/konva/lib/PointerEvents.js","../node_modules/konva/lib/Layer.js","../node_modules/konva/lib/shapes/Line.js","../node_modules/konva/lib/shapes/Rect.js","../node_modules/konva/lib/shapes/Text.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js","../node_modules/konva/lib/index.js","../node_modules/konva/lib/_FullInternals.js","../node_modules/konva/lib/_CoreInternals.js","../node_modules/@babel/runtime/helpers/toArray.js","../node_modules/@babel/runtime/helpers/toPrimitive.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/konva/lib/Stage.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/konva/lib/FastLayer.js","../node_modules/konva/lib/Tween.js","../node_modules/konva/lib/shapes/Arc.js","../node_modules/konva/lib/shapes/Arrow.js","../node_modules/konva/lib/BezierFunctions.js","../node_modules/konva/lib/shapes/Circle.js","../node_modules/konva/lib/shapes/Ellipse.js","../node_modules/konva/lib/shapes/Image.js","../node_modules/konva/lib/shapes/Label.js","../node_modules/konva/lib/shapes/RegularPolygon.js","../node_modules/konva/lib/shapes/Ring.js","../node_modules/konva/lib/shapes/Sprite.js","../node_modules/konva/lib/shapes/Star.js","../node_modules/konva/lib/shapes/TextPath.js","../node_modules/konva/lib/shapes/Transformer.js","../node_modules/konva/lib/shapes/Wedge.js","../node_modules/konva/lib/filters/Blur.js","../node_modules/konva/lib/filters/Brighten.js","../node_modules/konva/lib/filters/Contrast.js","../node_modules/konva/lib/filters/Emboss.js","../node_modules/konva/lib/filters/Enhance.js","../node_modules/konva/lib/filters/Grayscale.js","../node_modules/konva/lib/filters/HSL.js","../node_modules/konva/lib/filters/HSV.js","../node_modules/konva/lib/filters/Invert.js","../node_modules/konva/lib/filters/Kaleidoscope.js","../node_modules/konva/lib/filters/Mask.js","../node_modules/konva/lib/filters/Noise.js","../node_modules/konva/lib/filters/Pixelate.js","../node_modules/konva/lib/filters/Posterize.js","../node_modules/konva/lib/filters/RGB.js","../node_modules/konva/lib/filters/RGBA.js","../node_modules/konva/lib/filters/Sepia.js","../node_modules/konva/lib/filters/Solarize.js","../node_modules/konva/lib/filters/Threshold.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","sizes","Col","React","props","ref","_classNames","_React$useContext","ConfigContext","getPrefixCls","direction","_React$useContext2","RowContext","gutter","wrap","supportFlexGap","customizePrefixCls","prefixCls","span","order","offset","push","pull","className","children","flex","style","others","sizeClassObj","forEach","size","_extends2","sizeProps","propSize","_typeof","_extends","_defineProperty","concat","undefined","classes","classNames","mergedStyle","horizontalGutter","paddingLeft","paddingRight","verticalGutter","paddingTop","paddingBottom","test","parseFlex","minWidth","tuple","useMergePropByScreen","oriProp","screen","_React$useState","_React$useState2","_slicedToArray","prop","setProp","responsiveArray","breakpoint","curVal","clacMergeAlignOrJustify","JSON","stringify","Row","justify","align","_props$gutter","_React$useState3","xs","sm","md","lg","xl","xxl","_React$useState4","screens","setScreens","_React$useState5","_React$useState6","curScreens","setCurScreens","mergeAlign","mergeJustify","useFlexGapSupport","gutterRef","token","ResponsiveObserve","subscribe","currentGutter","current","Array","isArray","unsubscribe","gutters","results","g","index","getGutter","rowStyle","marginLeft","marginRight","_gutters","rowGap","marginTop","marginBottom","_gutters2","gutterH","gutterV","rowContext","Provider","value","defineProperty","exports","Factory","Util_1","require","Validators_1","GET","SET","addGetterSetter","constructor","attr","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","method","Util","_capitalize","val","this","attrs","overWriteSetter","_setAttr","addComponentsGetterSetter","components","n","component","len","capitalize","getter","setter","ret","getAttr","basicValidator","getComponentValidator","key","_this","oldVal","_fireChangeEvent","capitalizedAttr","arguments","addDeprecatedGetterSetter","error","message","backCompat","methods","each","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","apply","afterSetFilter","_filterUpToDate","_registerNode","Konva","glob","PI_OVER_180","Math","PI","global","window","WorkerGlobalScope","self","_global","version","isBrowser","toString","isUnminified","param","dblClickWindow","getAngle","angle","angleDeg","enableTrace","pointerEventsEnabled","autoDrawEnabled","hitOnDragEnabled","capturePointerEventsEnabled","_mouseListenClick","_touchListenClick","_pointerListenClick","_mouseInDblClickWindow","_touchInDblClickWindow","_pointerInDblClickWindow","_mouseDblClickPointerId","_touchDblClickPointerId","_pointerDblClickPointerId","pixelRatio","devicePixelRatio","dragDistance","showWarnings","dragButtons","isDragging","isDragReady","node","releaseCanvasOnDestroy","document","_injectGlobal","NodeClass","getClassName","getBooleanValidator","getNumberArrayValidator","getFunctionValidator","getStringOrGradientValidator","getStringValidator","getNumberOrAutoValidator","getNumberOrArrayOfNumbersValidator","getNumberValidator","alphaComponent","RGBComponent","Global_1","_formatValue","_isString","_isBoolean","round","_isNumber","warn","noOfElements","isNumber","isValidArray","_isArray","isString","isGradient","addColorStop","_isFunction","TypedArray","Int8Array","getPrototypeOf","item","isObject","module","instance","Constructor","TypeError","__esModule","toPropertyKey","_defineProperties","target","descriptor","enumerable","configurable","writable","protoProps","staticProps","setPrototypeOf","subClass","superClass","create","isNativeReflectConstruct","possibleConstructorReturn","Derived","hasNativeReflectConstruct","result","Super","NewTarget","Reflect","construct","_toArray","default","_classCallCheck","_createClass","Transform","m","dirty","slice","tr","point","x","y","sx","sy","rad","c","cos","sin","m11","m12","m21","m22","matrix","dx","dy","d","m0","m1","m2","m3","m4","m5","a","b","delta","rotation","scaleX","scaleY","skewX","skewY","r","sqrt","acos","_getRotation","PI_OVER_DEG180","DEG180_OVER_PI","KONVA_ERROR","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","req","requestAnimationFrame","f","setTimeout","_isElement","obj","nodeType","_isPlainObject","isNaN","isFinite","isValidSelector","selector","firstChar","toUpperCase","_sign","number","requestAnimFrame","callback","queue","cb","createCanvasElement","canvas","createElement","createImageElement","_isInDocument","el","parentNode","_urlToImage","url","imageObj","onload","src","_rgbToHex","_hexToRgb","hex","replace","bigint","parseInt","getRandomColor","randColor","random","getRGB","color","rgb","substring","substr","exec","colorToRGBA","str","_namedColorToRBA","_hex3ColorToRGBA","_hex4ColorToRGBA","_hex6ColorToRGBA","_hex8ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","toLowerCase","parts","match","split","map","Number","t2","t3","_exec","_exec2","hsl","h","l","t1","haveIntersection","r1","r2","width","height","cloneObject","retObj","cloneArray","arr","degToRad","deg","radToDeg","_degToRad","_radToDeg","radians","charAt","throw","Error","console","func","_inRange","left","right","_getProjectionToSegment","x1","y1","x2","y2","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","_prepareArrayForTween","startArray","endArray","start","end","temp","newStart","pr","_prepareToStringify","desc","visitedByCircularReferenceRemoval","getOwnPropertyDescriptor","_assign","source","_getFirstPointerId","evt","touches","changedTouches","identifier","pointerId","releaseCanvas","_len","canvases","_key","drawRoundedRectPath","context","cornerRadius","topLeft","topRight","bottomLeft","bottomRight","min","moveTo","lineTo","arc","_toConsumableArray","Node","Factory_1","Canvas_1","DragAndDrop_1","ABSOLUTE_OPACITY","ALL_LISTENERS","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","LISTENING","MOUSEENTER","MOUSELEAVE","SHAPE","SPACE","STAGE","TRANSFORM","VISIBLE","TRANSFORM_CHANGE_STR","join","idCounter","config","_id","eventListeners","_allEventListeners","parent","_cache","Map","_attachedDepsListeners","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","_dragEventId","_shouldFireChangeEvents","setAttrs","get","delete","clear","privateGetter","cache","set","name","deps","depsString","dep","on","_clearCache","_getCache","fire","has","_this$_cache$get","scene","filter","hit","_clearSelfAndDescendantCache","_requestDraw","conf","rect","getClientRect","skipTransform","relativeTo","getParent","ceil","floor","drawBorder","hitCanvasPixelRatio","cachedSceneCanvas","SceneCanvas","cachedFilterCanvas","willReadFrequently","cachedHitCanvas","HitCanvas","sceneContext","getContext","hitContext","isCache","imageSmoothingEnabled","_context","save","translate","drawScene","drawHit","restore","beginPath","closePath","setAttr","stroke","top","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","max","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","_getCanvasCache","cacheCanvas","_getCachedSceneCanvas","ratio","drawImage","_canvas","hitCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","setSize","getWidth","getHeight","getImageData","putImageData","evtStr","handler","_delegate","baseEvent","events","_off","type","off","event","stopNode","targets","findAncestors","currentTarget","stopDrag","DD","_dragElements","_remove","_clearCaches","splice","_setChildrenIndices","remove","clearCache","ancestors","_this2","_batchTransformChanges","_isListening","listening","_isVisible","visible","skipDragCheck","layer","getLayer","layerUnderDrag","elem","dragStatus","dragSkip","isListening","isVisible","nodes","child","depth","getDepth","that","addChildren","getChildren","getStage","pos","_this3","getPointerPosition","transform","copy","invert","haveCachedParent","isCached","absoluteMatrix","getMatrix","absoluteTransform","getTranslation","origTrans","_clearTransform","it","_getAbsoluteTransform","_setTransform","setPosition","offsetX","offsetY","change","changeX","changeY","family","unshift","theta","zIndex","_getAbsoluteOpacity","absOpacity","opacity","getAbsoluteOpacity","newContainer","add","defaultValue","getAttrs","toObject","includeSelf","res","_isMatch","ancestor","sel","selectorArr","id","hasName","_getStage","eventType","bubble","_fireAndBubble","_fire","at","_eachAncestorReverse","transformsEnabled","multiply","getTransform","copyInto","reset","decompose","_getTransform","_a","_b","rotate","skew","scale","allListeners","listener","box","stage","_toKonvaCanvas","mimeType","quality","toDataURL","_this4","Promise","resolve","reject","img","err","_this5","toCanvas","toBlob","blob","getDragDistance","evtName","evtListeners","newVal","oldName","newName","fullName","names","drawNode","batchDraw","compareShape","isAncestorOf","stopBubble","cancelBubble","_c","_events","hierarchyEvents","topListeners","_getProtoListeners","selfListeners","ap","getAbsolutePosition","_getPointerById","_changedPointerPositions","startPointerPos","bubbleEvent","_createDragElement","newNodePos","dbf","dragBoundFunc","bounded","setAbsolutePosition","_endDragBefore","_endDragAfter","draggable","_dragChange","_dragCleanup","_this6","hasDraggingChild","_listenDrag","dragElement","isReady","margin","screenRect","data","container","parse","_createNode","no","Class","_attrsAffectingSize","rotateDeg","setRotationDeg","getRotationDeg","_assertThisInitialized","_inherits","_createSuper","Shape","shapes","dummyContext","Node_1","Global_2","PointerEvents","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","getDummyContext","_Node_1$Node","_super","colorKey","getCanvas","sceneFunc","hitFunc","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","pattern","createPattern","fillPatternRepeat","setTransform","fillPatternX","fillPatternY","fillPatternRotation","fillPatternScaleX","fillPatternScaleY","fillPatternOffsetX","fillPatternOffsetY","DOMMatrix","__getLinearGradient","colorStops","fillLinearGradientColorStops","ctx","fillLinearGradientStartPoint","fillLinearGradientEndPoint","grd","createLinearGradient","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","createRadialGradient","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","hasShadow","rgba","_calculate","fillEnabled","fill","strokeEnabled","strokeWidth","strokeLinearGradientColorStops","hitStrokeWidth","hasStroke","bufferHitCanvas","destroy","forceFill","perfectDrawEnabled","hasFill","isTransparent","strokeForShadow","shadowForStrokeEnabled","_centroid","fillRect","getSelfRect","skipStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","skipShadow","preWidth","abs","preHeight","blurRadius","_transformedRect","can","bufferCanvas","bufferContext","drawFunc","getSceneFunc","skipBuffer","cachingSelf","_drawCachedSceneCanvas","_useBufferCanvas","_applyLineJoin","o","_applyShadow","shouldDrawHit","_drawCachedHitCanvas","hitImageData","hitData","rgbColorKey","alphaThreshold","hitWidth","hitHeight","hasPointerCapture","setPointerCapture","releaseCapture","_fillFunc","fillRule","_strokeFunc","_fillFuncHit","_strokeFuncHit","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","_getPrototypeOf","bind","__proto__","superPropBase","_get","property","receiver","base","createContext","ReferenceError","arrayLikeToArray","minLen","from","Canvas","_pixelRatio","Context_1","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","border","background","position","previousRatio","setWidth","setHeight","_Canvas","SceneContext","_Canvas2","_super2","HitContext","_createForOfIteratorHelper","Container","filterFunc","_validateAdd","hasChildren","destroyChildren","_generalFind","findOne","retArr","_descendants","valid","fn","_step","_iterator","done","clone","find","shape","intersects","caching","_drawChildren","drawMethod","clipWidth","clipHeight","clipFunc","hasClip","selfCache","clipArgs","clipX","clipY","clip","hasComposition","globalCompositeOperation","selfRect","Infinity","hasVisible","Symbol","iterator","flag","justDragged","_drag","nodesToFireEvents","setPointersPositions","startDrag","_setDragPosition","drawNodes","draw","addEventListener","Group","Container_1","_Container_1$Containe","getType","Animation","now","performance","Date","getTime","layers","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","lays","animations","stop","_addAnimation","_removeAnimation","anim","_handleAnimation","layersLen","layerHash","_updateFrameObject","Anim","_runFrames","_animationLoop","animRunning","Path","Shape_1","BezierFunctions_1","_Shape_1$Shape","dataArray","pathLength","_readDataAttribute","parsePathData","getPathLength","ca","command","bezierCurveTo","quadraticCurveTo","cx","cy","rx","ry","dTheta","psi","fs","fillStrokeShape","strokeShape","inc","getPointOnEllipticalArc","getPointOnCubicBezier","getPointAtLengthOfDataArray","ii","cp","getPointOnLine","t2length","getCubicArcLength","getPointOnQuadraticBezier","getQuadraticArcLength","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","getLineLength","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","RegExp","coords","cpx","cpy","re","j","jlen","parsed","parseFloat","prevCmd","ctlPtx","ctlPty","fa","cmd","startX","startY","shift","idx","convertEndpointToCenterParameterization","calcLength","path","psiDeg","xp","yp","lambda","cxp","cyp","vMag","v","vRatio","vAngle","iter","arr2","toPrimitive","arg","String","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","Context","CONTEXT_METHODS","traceArr","_enableTrace","_fill","_stroke","fillAfterStrokeEnabled","fillShape","relaxed","rounded","trace","args","getPixelRatio","bounds","clearRect","lineCap","lineJoin","a0","a1","a2","a3","a4","a5","arcTo","createImageData","a6","a7","a8","ellipse","isPointInPath","_len2","_key2","strokeRect","text","maxWidth","fillText","measureText","setLineDash","getLineDash","path2d","strokeText","origSetter","methodName","origMethod","util","simplifyArray","_trace","op","_Context","_ref$willReadFrequent","_getFillPattern","_getLinearGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","_fillColor","hasPattern","getFillPatternImage","_fillPattern","hasLinearGradient","getFillLinearGradientColorStops","_fillLinearGradient","hasRadialGradient","getFillRadialGradientColorStops","_fillRadialGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","getStrokeLinearGradientColorStops","dash","strokeScaleEnabled","getStrokeScaleEnabled","_applyLineCap","dashEnabled","dashOffset","getShadowForStrokeEnabled","_strokeLinearGradient","getShadowRGBA","blur","getShadowBlur","getShadowOffset","getAbsoluteScale","_Context2","hasHitStroke","createEvent","getCapturedShape","Captures","SUPPORT_POINTER_EVENTS","content","PointerEvent","Layer","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","_waitingForDraw","_checkVisibility","_setSmoothEnabled","createPNGStream","getHitCanvas","removeChild","getNativeCanvasElement","insertBefore","appendChild","moveToTop","moveUp","moveDown","moveToBottom","_ref","display","spiralSearchDistance","continueSearch","intersectionOffset","_getIntersection","antialiased","p3","clearBeforeDraw","hitGraphEnabled","Line","getControlPoints","x0","y0","d01","pow","d12","fb","expandPoints","tension","allPoints","tp","closed","bezier","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","Rect","Text","stringToArray","string","AUTO","JUSTIFY","LEFT","MIDDLE","NORMAL","NONE","ATTR_CHANGE_LIST","attrChangeListLen","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","textArr","textArrLen","fontSize","lineHeightPx","lineHeight","verticalAlign","alignY","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","lastInParagraph","gradient","strokeStyle","array","li","letter","_partialText","measureSize","getTextWidth","textWidth","textHeight","metrics","font","fontStyle","fontVariant","fontFamily","hasSpace","trim","hasQuotes","_getTextWidth","lines","fixedWidth","fixedHeight","maxHeightPx","currentHeightPx","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","lastIndexOf","trimRight","_addTextLine","_shouldHandleEllipsis","_tryToAddEllipsisToLastLine","trimLeft","_FullInternals_1","_CoreInternals_1","Arc_1","Arrow_1","Circle_1","Ellipse_1","Image_1","Label_1","Line_1","Path_1","Rect_1","RegularPolygon_1","Ring_1","Sprite_1","Star_1","Text_1","TextPath_1","Transformer_1","Wedge_1","Blur_1","Brighten_1","Contrast_1","Emboss_1","Enhance_1","Grayscale_1","HSL_1","HSV_1","Invert_1","Kaleidoscope_1","Mask_1","Noise_1","Pixelate_1","Posterize_1","RGB_1","RGBA_1","Sepia_1","Solarize_1","Threshold_1","Arc","Arrow","Circle","Ellipse","Image","Label","Tag","RegularPolygon","Ring","Sprite","Star","TextPath","Transformer","Wedge","Filters","Blur","Brighten","Contrast","Emboss","Enhance","Grayscale","HSL","HSV","Invert","Kaleidoscope","Mask","Noise","Pixelate","Posterize","RGB","RGBA","Sepia","Solarize","Threshold","Stage_1","Layer_1","FastLayer_1","Group_1","Animation_1","Tween_1","Stage","stages","FastLayer","Tween","Easings","arrayWithHoles","nonIterableRest","input","hint","prim","_setPrototypeOf","sham","Proxy","Boolean","valueOf","assertThisInitialized","allowArrayLike","F","_e","normalCompletion","didErr","step","next","_e2","object","_mouse","_touch","_pointer","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","POINTERCANCEL","POINTEROUT","POINTERLEAVE","POINTEROVER","POINTERENTER","CONTEXTMENU","TOUCHSTART","TOUCHEND","TOUCHMOVE","TOUCHCANCEL","WHEEL","EVENTS","EVENTS_MAP","mouse","touch","pointer","getEventType","getEventsMap","checkNoClip","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","getElementsByClassName","getElementById","parentElement","layerCanvas","getIntersection","rest","_ref2","passive","pointerenter","pointerover","evenType","targetShape","_getTargetShape","eventsEnabled","pointerout","pointerleave","pointerPos","triggeredOnShape","pointerdown","isTouch","preventDefault","cancelable","processedShapesIds","differentTarget","assign","pointermove","clickStartShape","clickEndShape","fireDblClick","clearTimeout","pointerup","pointerclick","pointerdblclick","contentPosition","_getContentPosition","clientX","clientY","getBoundingClientRect","clientWidth","clientHeight","innerHTML","userSelect","setAttribute","iterableToArrayLimit","_i","_s","_x","_r","_arr","_n","_d","_Layer_1$Layer","blacklist","duration","easing","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","reverse","play","update","state","getTimer","onEnterFrame","getPosition","setTime","nodeId","Linear","getLayers","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","onUpdate","diff","tweenId","trueEnd","trueStart","endRGBA","startRGBA","onPlay","onReverse","onPause","seek","thisId","to","params","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","asin","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","clockwise","outerRadius","innerRadius","boundLeftRatio","boundTopRatio","boundBottomRatio","boundLeft","boundTop","boundBottom","_Line_1$Line","PI2","fromTension","pointerLength","lp","lastLength","previous","atan2","pointerWidth","pointerAtEnding","__fillStroke","pointerAtBeginning","isDashEnabled","lineRect","binomialCoefficients","cValues","tValues","ys","z","sum","correctedT","BFunc","xbase","getDerivative","ybase","combined","ax","ay","bx","by","A","B","C","k","uuk","bbk","term","log","derivative","vs","_vs","totalLength","numIterations","increasedTLength","increasedTError","decreasedTLength","decreasedTError","radius","radiusX","radiusY","_setImageLoad","image","complete","readyState","cropWidth","cropHeight","cropX","cropY","onError","onerror","crossOrigin","UP","RIGHT","DOWN","_Group_1$Group","_sync","getText","pointerDirection","pointerHeight","tag","getTag","_getPoints","sides","PIx2","_updated","updated","frameIndex","isRunning","clearInterval","interval","_setInterval","animation","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","numPoints","partialText","dummyCanvas","_getTextPathLength","textBaseline","glyphInfo","p0","setText","_this$_getTextSize","_getTextSize","kerningFunc","charArr","offsetToGlyph","charStartPoint","_getPointAtLength","glyphWidth","numberOfSpaces","charEndPoint","kern","midpoint","transposeX","transposeY","info","EVENTS_NAME","NODES_RECT","ANGLES","TOUCH_DEVICE","ANCHORS_NAMES","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","center","getCenter","_transforming","_createElements","_handleMouseMove","_handleMouseUp","getNode","setNode","setNodes","_nodes","detach","filteredNodes","useSingleNodeRotation","getAbsoluteRotation","onChange","_resetTransformCache","additionalEvents","_getEventNamespace","_proxyDrag","lastPos","otherNode","otherAbs","_movingAnchorName","__getNodeRect","rot","relative","ignoreStroke","absScale","absPos","totalPoints","_getNodeRect","_createBack","_createAnchor","anchor","_handleMouseDown","cursor","anchorName","getCursor","_cursorChange","_this7","back","rotateEnabled","rotateAnchorOffset","shouldOverdrawWholeArea","hypotenuse","_anchorDragOffset","newHypotenuse","anchorNode","pp","oldAbs","anchorDragBoundFunc","newAbs","keepProportion","shiftBehavior","keepRatio","shiftKey","centeredScaling","altKey","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","move","_fitNodesInto","newRotation","tol","rotationSnapTolerance","snappedRot","snaps","newRotationRad","snapped","absDiff","getSnap","rotationSnaps","_removeEvents","removeEventListener","newAttrs","_this8","oldAttrs","allowNegativeScale","flipEnabled","boundBoxFunc","baseSize","oldTr","newTr","parentTransform","localTransform","newLocalTransform","_this9","enabledAnchors","resizeEnabled","anchorSize","anchors","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","_batchChangeChild","borderEnabled","borderStroke","borderStrokeWidth","borderDash","styleFunc","anchorStyleFunc","lineEnabled","rotateHandlerOffset","enabledHandlers","getAngleDeg","setAngleDeg","BlurStack","mul_table","shg_table","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","brightness","adjust","contrast","nPixels","strength","embossStrength","greyLevel","embossWhiteLevel","embossDirection","blend","embossBlend","dirY","dirX","w","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","saturation","hue","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","tempCanvas","scratchData","dst","opt","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","xStart","xEnd","xDelta","phaseShift","polarRotation","FromPolar","pixelAt","idata","rgbDistance","mask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","weights","side","halfSide","maskResult","so","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","amount","noise","half","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","levels","ia","level"],"mappings":"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D,kBAEJ,CACI,mBACC,mBACA,kBACD,mBACC,iBACD,kBAEJ,CACI,EAAG,mBACF,mBACA,kBACD,mBACC,kBACD,mBAEJ,EACK,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,kBACJ,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,mBACJ,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBAEJ,EACK,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,kBACJ,mBACC,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,mBACJ,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,kBACD,mBACC,mBACD,oBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,mBACJ,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,EACK,kBACD,mBACC,kBACD,mBACC,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,mBACJ,oBACC,mBACD,oBACC,mBACD,oBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,gBACD,iBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,mBACD,oBACC,mBACD,oBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,kBACJ,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,mBACD,oBACC,mBACD,oBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBAEJ,CACI,GAAI,kBACJ,mBACC,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBAEJ,EACK,mBACD,oBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,iBACD,kBACC,kBACD,mBACC,kBACD,mBACC,kBACD,mBACC,kBACD,oBAGR5mD,EAAQ2mD,QAAU,CACd,GACA,GACA,CAAC,EAAK,GACN,CACI,kBACA,kBACA,mBAEJ,CACI,kBACA,kBACA,mBACA,oBAEJ,CACI,kBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,kBACA,mBACA,mBACA,kBACA,mBAEJ,CACI,iBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBAEJ,CACI,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBAEJ,CACI,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,oBACA,qBAEJ,CACI,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBAEJ,CACI,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBAEJ,CACI,kBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,gBACA,gBACA,mBACA,mBACA,kBACA,kBACA,oBACA,qBAEJ,CACI,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,qBAEJ,CACI,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBAEJ,CACI,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,mBACA,mBACA,kBACA,mBAEJ,CACI,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,oBACA,qBAEJ,CACI,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,kBACA,oBAGR3mD,EAAQ0mD,qBAAuB,CAAC,CAAC,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,IAclE1mD,EAAQsjC,kBAbkB,SAAClmC,EAAIypD,EAAI1uD,GAC/B,IAAI2uD,EACAC,EACAC,EAEJF,EAAI3uD,EAAI,EACR4uD,EAAM,EACN,IAAK,IAAIpuD,EAAI,EAAGA,EAHN,GAGaA,IACnBquD,EAAaF,EAAI9mD,EAAQ4mD,QAJnB,IAI8BjuD,GAAKmuD,EACzCC,GAAO/mD,EAAQ2mD,QALT,IAKoBhuD,GAAKsuD,EAAM7pD,EAAIypD,EAAIG,GAEjD,OAAOF,EAAIC,CACf,EA4BA,SAASE,EAAM7pD,EAAIypD,EAAI1uD,GACnB,IAAM+uD,EAAQC,EAAc,EAAGhvD,EAAGiF,GAC5BgqD,EAAQD,EAAc,EAAGhvD,EAAG0uD,GAC5BQ,EAAWH,EAAQA,EAAQE,EAAQA,EACzC,OAAOxjD,KAAK6I,KAAK46C,EACrB,CANArnD,EAAQwjC,sBAzBsB,SAACpmC,EAAIypD,EAAI1uD,QACzBgD,IAANhD,IACAA,EAAI,GAER,IAAMmvD,EAAKlqD,EAAG,GAAK,EAAIA,EAAG,GAAKA,EAAG,GAC5BmqD,EAAKV,EAAG,GAAK,EAAIA,EAAG,GAAKA,EAAG,GAC5BW,EAAK,EAAIpqD,EAAG,GAAK,EAAIA,EAAG,GACxBqqD,EAAK,EAAIZ,EAAG,GAAK,EAAIA,EAAG,GACxBa,EAAI,GAAKJ,EAAKA,EAAKC,EAAKA,GACxBI,EAAI,GAAKL,EAAKE,EAAKD,EAAKE,GACxBG,EAAIJ,EAAKA,EAAKC,EAAKA,EACzB,GAAU,IAANC,EACA,OAAQvvD,EAAIyL,KAAK6I,KAAK7I,KAAK2rC,IAAInyC,EAAG,GAAKA,EAAG,GAAI,GAAKwG,KAAK2rC,IAAIsX,EAAG,GAAKA,EAAG,GAAI,IAE/E,IAAM56C,EAAI07C,GAAK,EAAID,GAEb5qC,EAAI3kB,EAAI8T,EACR47C,EAFID,EAAIF,EAEAz7C,EAAIA,EACZ67C,EAAMhrC,EAAIA,EAAI+qC,EAAI,EAAIjkD,KAAK6I,KAAKqQ,EAAIA,EAAI+qC,GAAK,EAC7CE,EAAM97C,EAAIA,EAAI47C,EAAI,EAAIjkD,KAAK6I,KAAKR,EAAIA,EAAI47C,GAAK,EAC7CG,EAAO/7C,EAAIrI,KAAK6I,KAAKR,EAAIA,EAAI47C,KAAO,EACpCA,EAAIjkD,KAAKqkD,IAAIrkD,KAAKm0B,KAAKjb,EAAIgrC,IAAQ77C,EAAI87C,KACvC,EACN,OAAQnkD,KAAK6I,KAAKi7C,GAAK,GAAM5qC,EAAIgrC,EAAM77C,EAAI87C,EAAMC,EACrD,EAQA,IAAMb,EAAgB,SAAhBA,EAAiBe,EAAY/vD,EAAGgwD,GAClC,IACIC,EACAtoD,EAFE4B,EAAIymD,EAAGvvD,OAAS,EAGtB,GAAU,IAAN8I,EACA,OAAO,EAEX,GAAmB,IAAfwmD,EAAkB,CAClBpoD,EAAQ,EACR,IAAK,IAAI+nD,EAAI,EAAGA,GAAKnmD,EAAGmmD,IACpB/nD,GACIE,EAAQ0mD,qBAAqBhlD,GAAGmmD,GAC5BjkD,KAAK2rC,IAAI,EAAIp3C,EAAGuJ,EAAImmD,GACpBjkD,KAAK2rC,IAAIp3C,EAAG0vD,GACZM,EAAGN,GAEf,OAAO/nD,CACX,CAEIsoD,EAAM,IAAI1pD,MAAMgD,GAChB,IAAK,IAAImmD,EAAI,EAAGA,EAAInmD,EAAGmmD,IACnBO,EAAIP,GAAKnmD,GAAKymD,EAAGN,EAAI,GAAKM,EAAGN,IAEjC,OAAOV,EAAce,EAAa,EAAG/vD,EAAGiwD,EAEhD,EA+BApoD,EAAQqjC,SA9BS,SAACzqC,EAAQyvD,EAAapsC,GAKnC,IAJA,IAAItZ,EAAQ,EACRxK,EAAIS,EAASyvD,EACb9M,GAAQ3iD,EAASqjB,EAAK9jB,IAAMkwD,EAC5BC,EAAgB,EACb3lD,EAAQ,MAAO,CAClB,IAAM4lD,EAAmBtsC,EAAK9jB,EAAIojD,GAC5BiN,EAAkB5kD,KAAKm0B,IAAIn/B,EAAS2vD,GAAoBF,EAC9D,GAAIG,EAAkB7lD,EAClBA,EAAQ6lD,EACRrwD,GAAKojD,MAEJ,CACD,IAAMkN,EAAmBxsC,EAAK9jB,EAAIojD,GAC5BmN,EAAkB9kD,KAAKm0B,IAAIn/B,EAAS6vD,GAAoBJ,EAC1DK,EAAkB/lD,GAClBA,EAAQ+lD,EACRvwD,GAAKojD,GAGLA,GAAQ,CAEhB,CAEA,KADA+M,EACoB,IAChB,KAER,CACA,OAAOnwD,CACX,C,mCCrxBa,IAAA+R,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQ43C,YAAS,EACjB,IAAM53B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACnBy3C,EAAM,SAAAjW,GAAAhP,EAAAilB,EAAAjW,GAAA,IAAAjO,EAAAd,EAAAglB,GAAA,SAAAA,IAAA,OAAA1tC,EAAA,KAAA0tC,GAAAlkB,EAAArwB,MAAA,KAAAZ,UAAA,CAsBP,OAtBO0H,EAAAytC,EAAA,EAAAx1C,IAAA,aAAAtC,MACR,SAAWsf,GACPA,EAAQ8F,YACR9F,EAAQS,IAAI,EAAG,EAAGze,KAAKC,MAAMsnD,QAAU,EAAG,EAAa,EAAV/kD,KAAKC,IAAQ,GAC1Dub,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,YAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,WAAAtC,MACD,SAASmb,GACD7Z,KAAKunD,WAAa1tC,EAAQ,GAC1B7Z,KAAKunD,OAAO1tC,EAAQ,EAE5B,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACF9Z,KAAKunD,WAAaztC,EAAS,GAC3B9Z,KAAKunD,OAAOztC,EAAS,EAE7B,KAAC08B,CAAA,CAtBO,CAASnW,EAAQ5O,OAwB7B7yB,EAAQ43C,OAASA,EACjBA,EAAOt/C,UAAUg/B,WAAY,EAC7BsgB,EAAOt/C,UAAU8B,UAAY,SAC7Bw9C,EAAOt/C,UAAUg6B,oBAAsB,CAAC,WACxC,EAAIrrB,EAASzD,eAAeo0C,GAC5B53B,EAAU/f,QAAQM,gBAAgBq3C,EAAQ,SAAU,GAAG,EAAIx3C,EAAa0G,sB,mCCpC3D,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQ63C,aAAU,EAClB,IAAM73B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACnB03C,EAAO,SAAAlW,GAAAhP,EAAAklB,EAAAlW,GAAA,IAAAjO,EAAAd,EAAAilB,GAAA,SAAAA,IAAA,OAAA3tC,EAAA,KAAA2tC,GAAAnkB,EAAArwB,MAAA,KAAAZ,UAAA,CAwBR,OAxBQ0H,EAAA0tC,EAAA,EAAAz1C,IAAA,aAAAtC,MACT,SAAWsf,GACP,IAAImjB,EAAKnhC,KAAKwnD,UAAWpmB,EAAKphC,KAAKynD,UACnCzpC,EAAQ8F,YACR9F,EAAQyF,OACJ0d,IAAOC,GACPpjB,EAAQ6O,MAAM,EAAGuU,EAAKD,GAE1BnjB,EAAQS,IAAI,EAAG,EAAG0iB,EAAI,EAAa,EAAV3+B,KAAKC,IAAQ,GACtCub,EAAQ6F,UACR7F,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAAwB,EAAjBsB,KAAKwnD,SAChB,GAAC,CAAAxmD,IAAA,YAAAtC,MACD,WACI,OAAwB,EAAjBsB,KAAKynD,SAChB,GAAC,CAAAzmD,IAAA,WAAAtC,MACD,SAASmb,GACL7Z,KAAKwnD,QAAQ3tC,EAAQ,EACzB,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACN9Z,KAAKynD,QAAQ3tC,EAAS,EAC1B,KAAC28B,CAAA,CAxBQ,CAASpW,EAAQ5O,OA0B9B7yB,EAAQ63C,QAAUA,EAClBA,EAAQv/C,UAAU8B,UAAY,UAC9By9C,EAAQv/C,UAAUg/B,WAAY,EAC9BugB,EAAQv/C,UAAUg6B,oBAAsB,CAAC,UAAW,YACpD,EAAIrrB,EAASzD,eAAeq0C,GAC5B73B,EAAU/f,QAAQuB,0BAA0Bq2C,EAAS,SAAU,CAAC,IAAK,MACrE73B,EAAU/f,QAAQM,gBAAgBs3C,EAAS,UAAW,GAAG,EAAIz3C,EAAa0G,uBAC1EkZ,EAAU/f,QAAQM,gBAAgBs3C,EAAS,UAAW,GAAG,EAAIz3C,EAAa0G,sB,mCCxC7D,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0wB,EAAAx6B,EAAA,KAAA8J,QAAAswB,EAAAp6B,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQ83C,WAAQ,EAChB,IAAM53C,EAASC,EAAQ,KACjB6f,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClB8G,EAAW9G,EAAQ,KACnBC,EAAeD,EAAQ,KACvB23C,EAAK,SAAAnW,GAAAhP,EAAAmlB,EAAAnW,GAAA,IAAAjO,EAAAd,EAAAklB,GACP,SAAAA,EAAYz2C,GAAO,IAAAgB,EAKM,OALN6H,EAAA,KAAA4tC,IACfz1C,EAAAqxB,EAAAl7B,KAAA,KAAM6I,IACDuhB,GAAG,qBAAqB,WACzBvgB,EAAKymD,eACT,IACAzmD,EAAKymD,gBAAgBzmD,CACzB,CA0FC,OA1FA8H,EAAA2tC,EAAA,EAAA11C,IAAA,gBAAAtC,MACD,WAAgB,IAAA8oB,EAAA,KACNmgC,EAAQ3nD,KAAK2nD,QACfA,GAASA,EAAMC,UAGfD,GAA8B,IAArBA,EAAME,YAGfF,GAASA,EAAwB,kBACjCA,EAAwB,iBAAE,QAAQ,WAC9BngC,EAAKtF,cACT,GAER,GAAC,CAAAlhB,IAAA,mBAAAtC,MACD,WACI,OAAA66B,EAAAJ,EAAAud,EAAAx/C,WAAA,yBAAAE,KAAA,MAA8B,EAClC,GAAC,CAAA4J,IAAA,aAAAtC,MACD,SAAWsf,GACP,IAII8kC,EAJEjpC,EAAQ7Z,KAAK6lB,WACb/L,EAAS9Z,KAAK8lB,YACd7H,EAAeje,KAAKie,eACpB0pC,EAAQ3nD,KAAKC,MAAM0nD,MAEzB,GAAIA,EAAO,CACP,IAAMG,EAAY9nD,KAAKC,MAAM6nD,UACvBC,EAAa/nD,KAAKC,MAAM8nD,WAE1BjF,EADAgF,GAAaC,EACJ,CACLJ,EACA3nD,KAAKgoD,QACLhoD,KAAKioD,QACLH,EACAC,EACA,EACA,EACAluC,EACAC,GAIK,CAAC6tC,EAAO,EAAG,EAAG9tC,EAAOC,EAEtC,EACI9Z,KAAK81B,WAAa91B,KAAKy1B,aAAexX,KACtCD,EAAQ8F,YACR7F,EACMnf,EAAOe,KAAKke,oBAAoBC,EAASnE,EAAOC,EAAQmE,GACxDD,EAAQoE,KAAK,EAAG,EAAGvI,EAAOC,GAChCkE,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,OAExB2nD,IACI1pC,GACAD,EAAQmf,OAEZnf,EAAQmH,UAAUljB,MAAM+b,EAAS8kC,GAEzC,GAAC,CAAA9hD,IAAA,WAAAtC,MACD,SAASsf,GACL,IAAInE,EAAQ7Z,KAAK6Z,QAASC,EAAS9Z,KAAK8Z,SAAUmE,EAAeje,KAAKie,eACtED,EAAQ8F,YACH7F,EAIDnf,EAAOe,KAAKke,oBAAoBC,EAASnE,EAAOC,EAAQmE,GAHxDD,EAAQoE,KAAK,EAAG,EAAGvI,EAAOC,GAK9BkE,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,IAAI+tB,EAAIC,EACR,OAAmC,QAA3BD,EAAKzsB,KAAKC,MAAM4Z,aAA0B,IAAP4S,EAAgBA,EAA6B,QAAvBC,EAAK1sB,KAAK2nD,eAA4B,IAAPj7B,OAAgB,EAASA,EAAG7S,KAChI,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,WACI,IAAI+tB,EAAIC,EACR,OAAoC,QAA5BD,EAAKzsB,KAAKC,MAAM6Z,cAA2B,IAAP2S,EAAgBA,EAA6B,QAAvBC,EAAK1sB,KAAK2nD,eAA4B,IAAPj7B,OAAgB,EAASA,EAAG5S,MACjI,IAAC,EAAA9Y,IAAA,UAAAtC,MACD,SAAeqY,EAAKX,GAA0B,IAAhB8xC,EAAO7mD,UAAA7J,OAAA,QAAAuC,IAAAsH,UAAA,GAAAA,UAAA,GAAG,KAChCqsB,EAAM5uB,EAAOe,KAAK6W,qBACtBgX,EAAIzW,OAAS,WACT,IAAI0wC,EAAQ,IAAIjR,EAAM,CAClBiR,MAAOj6B,IAEXtX,EAASuxC,EACb,EACAj6B,EAAIy6B,QAAUD,EACdx6B,EAAI06B,YAAc,YAClB16B,EAAIxW,IAAMH,CACd,KAAC2/B,CAAA,CAjGM,CAASrW,EAAQ5O,OAmG5B7yB,EAAQ83C,MAAQA,EAChBA,EAAMx/C,UAAU8B,UAAY,SAC5B,EAAI6M,EAASzD,eAAes0C,GAC5B93B,EAAU/f,QAAQM,gBAAgBu3C,EAAO,eAAgB,GAAG,EAAI13C,EAAayG,oCAAoC,IACjHmZ,EAAU/f,QAAQM,gBAAgBu3C,EAAO,SACzC93B,EAAU/f,QAAQuB,0BAA0Bs2C,EAAO,OAAQ,CAAC,IAAK,IAAK,QAAS,WAC/E93B,EAAU/f,QAAQM,gBAAgBu3C,EAAO,QAAS,GAAG,EAAI13C,EAAa0G,uBACtEkZ,EAAU/f,QAAQM,gBAAgBu3C,EAAO,QAAS,GAAG,EAAI13C,EAAa0G,uBACtEkZ,EAAU/f,QAAQM,gBAAgBu3C,EAAO,YAAa,GAAG,EAAI13C,EAAa0G,uBAC1EkZ,EAAU/f,QAAQM,gBAAgBu3C,EAAO,aAAc,GAAG,EAAI13C,EAAa0G,sB,mCCpH9D,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQg4C,IAAMh4C,EAAQ+3C,WAAQ,EAC9B,IAAM/3B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClB45C,EAAU55C,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACrB6wC,EAAmB,CACnB,aACA,WACA,YACA,UACA,aACA,OACA,QACA,SACA,mBACA,eACA,iBAC6CyY,EAAK,KAAMC,EAAQ,QAASC,EAAO,OAAQ/Y,EAAO,OAAQK,EAAoBD,EAAiBp4C,OAC1Im/C,EAAK,SAAA6R,GAAAj3B,EAAAolB,EAAA6R,GAAA,IAAAl2B,EAAAd,EAAAmlB,GACP,SAAAA,EAAY52B,GAAQ,IAAA9e,EAKb,OALa6H,EAAA,KAAA6tC,IAChB11C,EAAAqxB,EAAAl7B,KAAA,KAAM2oB,IACDyB,GAAG,aAAa,SAAUlE,GAC3Btd,KAAK6hD,cAAcvkC,EAAIkL,OACvBxoB,KAAKyoD,OACT,IAAGxnD,CACP,CA6DC,OA7DA8H,EAAA4tC,EAAA,EAAA31C,IAAA,UAAAtC,MACD,WACI,OAAOsB,KAAKq8B,KAAK,QAAQ,EAC7B,GAAC,CAAAr7B,IAAA,SAAAtC,MACD,WACI,OAAOsB,KAAKq8B,KAAK,OAAO,EAC5B,GAAC,CAAAr7B,IAAA,gBAAAtC,MACD,SAAciqC,GACV,IAAiBroC,EAAbqoB,EAAO3oB,KACP6a,EAAO,WACP8N,EAAK8/B,OACT,EACA,IAAKnoD,EAAI,EAAGA,EAAIuvC,EAAmBvvC,IAC/BqoC,EAAKnnB,GAAGouB,EAAiBtvC,GArBnB,eAqBsCua,EAEpD,GAAC,CAAA7Z,IAAA,WAAAtC,MACD,WACI,OAAOsB,KAAK0oD,UAAU7uC,OAC1B,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,WACI,OAAOsB,KAAK0oD,UAAU5uC,QAC1B,GAAC,CAAA9Y,IAAA,QAAAtC,MACD,WACI,IAAgDmb,EAAOC,EAAQ6uC,EAAkB3D,EAAc17C,EAAGC,EAAGq/C,EAAjGjgB,EAAO3oC,KAAK0oD,UAAWG,EAAM7oD,KAAK8oD,SACtC,GAAIngB,GAAQkgB,EAAK,CAQb,OAPAhvC,EAAQ8uB,EAAK9uB,QACbC,EAAS6uB,EAAK7uB,SACd6uC,EAAmBE,EAAIF,mBACvB3D,EAAe6D,EAAI7D,eACnB4D,EAAgBC,EAAID,gBACpBt/C,EAAI,EACJC,EAAI,EACIo/C,GACJ,KAAKN,EACD/+C,EAAIuQ,EAAQ,EACZtQ,GAAK,EAAIq/C,EACT,MACJ,KAAKN,EACDh/C,EAAIuQ,EAAQmrC,EACZz7C,EAAIuQ,EAAS,EACb,MACJ,KAAKyuC,EACDj/C,EAAIuQ,EAAQ,EACZtQ,EAAIuQ,EAAS8uC,EACb,MACJ,KAAKpZ,EACDlmC,GAAK,EAAI07C,EACTz7C,EAAIuQ,EAAS,EAGrB+uC,EAAIhoC,SAAS,CACTvX,GAAI,EAAIA,EACRC,GAAI,EAAIA,EACRsQ,MAAOA,EACPC,OAAQA,IAEZ6uB,EAAK9nB,SAAS,CACVvX,GAAI,EAAIA,EACRC,GAAI,EAAIA,GAEhB,CACJ,KAACotC,CAAA,CApEM,CAASgC,EAAQta,OAsE5Bz/B,EAAQ+3C,MAAQA,EAChBA,EAAMz/C,UAAU8B,UAAY,SAC5B,EAAI6M,EAASzD,eAAeu0C,GAAO,IAC7BC,EAAG,SAAArW,GAAAhP,EAAAqlB,EAAArW,GAAA,IAAApF,EAAA3J,EAAAolB,GAAA,SAAAA,IAAA,OAAA9tC,EAAA,KAAA8tC,GAAAzb,EAAAl5B,MAAA,KAAAZ,UAAA,CA2EJ,OA3EI0H,EAAA6tC,EAAA,EAAA51C,IAAA,aAAAtC,MACL,SAAWsf,GACP,IAAInE,EAAQ7Z,KAAK6Z,QAASC,EAAS9Z,KAAK8Z,SAAU6uC,EAAmB3oD,KAAK2oD,mBAAoB3D,EAAehlD,KAAKglD,eAAgB4D,EAAgB5oD,KAAK4oD,gBAAiB3qC,EAAeje,KAAKie,eACxLC,EAAU,EACVC,EAAW,EACXC,EAAa,EACbC,EAAc,EACU,kBAAjBJ,EACPC,EACIC,EACIC,EACIC,EACI7b,KAAK8b,IAAIL,EAAcpE,EAAQ,EAAGC,EAAS,IAG3DoE,EAAU1b,KAAK8b,IAAIL,EAAa,IAAM,EAAGpE,EAAQ,EAAGC,EAAS,GAC7DqE,EAAW3b,KAAK8b,IAAIL,EAAa,IAAM,EAAGpE,EAAQ,EAAGC,EAAS,GAC9DuE,EAAc7b,KAAK8b,IAAIL,EAAa,IAAM,EAAGpE,EAAQ,EAAGC,EAAS,GACjEsE,EAAa5b,KAAK8b,IAAIL,EAAa,IAAM,EAAGpE,EAAQ,EAAGC,EAAS,IAEpEkE,EAAQ8F,YACR9F,EAAQO,OAAOL,EAAS,GACpByqC,IAAqBN,IACrBrqC,EAAQQ,QAAQ3E,EAAQmrC,GAAgB,EAAG,GAC3ChnC,EAAQQ,OAAO3E,EAAQ,GAAI,EAAI+uC,GAC/B5qC,EAAQQ,QAAQ3E,EAAQmrC,GAAgB,EAAG,IAE/ChnC,EAAQQ,OAAO3E,EAAQsE,EAAU,GACjCH,EAAQS,IAAI5E,EAAQsE,EAAUA,EAAUA,EAAqB,EAAV3b,KAAKC,GAAU,EAAG,GAAG,GACpEkmD,IAAqBL,IACrBtqC,EAAQQ,OAAO3E,GAAQC,EAAS8uC,GAAiB,GACjD5qC,EAAQQ,OAAO3E,EAAQmrC,EAAclrC,EAAS,GAC9CkE,EAAQQ,OAAO3E,GAAQC,EAAS8uC,GAAiB,IAErD5qC,EAAQQ,OAAO3E,EAAOC,EAASuE,GAC/BL,EAAQS,IAAI5E,EAAQwE,EAAavE,EAASuE,EAAaA,EAAa,EAAG7b,KAAKC,GAAK,GAAG,GAChFkmD,IAAqBJ,IACrBvqC,EAAQQ,QAAQ3E,EAAQmrC,GAAgB,EAAGlrC,GAC3CkE,EAAQQ,OAAO3E,EAAQ,EAAGC,EAAS8uC,GACnC5qC,EAAQQ,QAAQ3E,EAAQmrC,GAAgB,EAAGlrC,IAE/CkE,EAAQQ,OAAOJ,EAAYtE,GAC3BkE,EAAQS,IAAIL,EAAYtE,EAASsE,EAAYA,EAAY5b,KAAKC,GAAK,EAAGD,KAAKC,IAAI,GAC3EkmD,IAAqBnZ,IACrBxxB,EAAQQ,OAAO,GAAI1E,EAAS8uC,GAAiB,GAC7C5qC,EAAQQ,QAAQ,EAAIwmC,EAAclrC,EAAS,GAC3CkE,EAAQQ,OAAO,GAAI1E,EAAS8uC,GAAiB,IAEjD5qC,EAAQQ,OAAO,EAAGN,GAClBF,EAAQS,IAAIP,EAASA,EAASA,EAAS1b,KAAKC,GAAe,EAAVD,KAAKC,GAAU,GAAG,GACnEub,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,cAAAtC,MACD,WACI,IAAI4K,EAAI,EAAGC,EAAI,EAAGy7C,EAAehlD,KAAKglD,eAAgB4D,EAAgB5oD,KAAK4oD,gBAAiBzwD,EAAY6H,KAAK2oD,mBAAoB9uC,EAAQ7Z,KAAK6Z,QAASC,EAAS9Z,KAAK8Z,SAerK,OAdI3hB,IAAckwD,GACd9+C,GAAKq/C,EACL9uC,GAAU8uC,GAELzwD,IAAcowD,EACnBzuC,GAAU8uC,EAELzwD,IAAcq3C,GACnBlmC,GAAoB,IAAf07C,EACLnrC,GAASmrC,GAEJ7sD,IAAcmwD,IACnBzuC,GAAwB,IAAfmrC,GAEN,CACH17C,EAAGA,EACHC,EAAGA,EACHsQ,MAAOA,EACPC,OAAQA,EAEhB,KAAC88B,CAAA,CA3EI,CAASvW,EAAQ5O,OA6E1B7yB,EAAQg4C,IAAMA,EACdA,EAAI1/C,UAAU8B,UAAY,OAC1B,EAAI6M,EAASzD,eAAew0C,GAC5Bh4B,EAAU/f,QAAQM,gBAAgBy3C,EAAK,mBA1JE,QA2JzCh4B,EAAU/f,QAAQM,gBAAgBy3C,EAAK,eAAgB,GAAG,EAAI53C,EAAa0G,uBAC3EkZ,EAAU/f,QAAQM,gBAAgBy3C,EAAK,gBAAiB,GAAG,EAAI53C,EAAa0G,uBAC5EkZ,EAAU/f,QAAQM,gBAAgBy3C,EAAK,eAAgB,GAAG,EAAI53C,EAAayG,oCAAoC,G,mCCjLlG,IAAAqD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQi4C,oBAAiB,EACzB,IAAMj4B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACnB83C,EAAc,SAAAtW,GAAAhP,EAAAslB,EAAAtW,GAAA,IAAAjO,EAAAd,EAAAqlB,GAAA,SAAAA,IAAA,OAAA/tC,EAAA,KAAA+tC,GAAAvkB,EAAArwB,MAAA,KAAAZ,UAAA,CAqDf,OArDe0H,EAAA8tC,EAAA,EAAA71C,IAAA,aAAAtC,MAChB,SAAWsf,GACP,IAAMuG,EAASvkB,KAAK+oD,aACpB/qC,EAAQ8F,YACR9F,EAAQO,OAAOgG,EAAO,GAAGjb,EAAGib,EAAO,GAAGhb,GACtC,IAAK,IAAIjJ,EAAI,EAAGA,EAAIikB,EAAO/sB,OAAQ8I,IAC/B0d,EAAQQ,OAAO+F,EAAOjkB,GAAGgJ,EAAGib,EAAOjkB,GAAGiJ,GAE1CyU,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,aAAAtC,MACD,WAII,IAHA,IAAMsqD,EAAQhpD,KAAKC,MAAM+oD,MACnBzB,EAASvnD,KAAKC,MAAMsnD,QAAU,EAC9BhjC,EAAS,GACNjkB,EAAI,EAAGA,EAAI0oD,EAAO1oD,IACvBikB,EAAOzrB,KAAK,CACRwQ,EAAGi+C,EAAS/kD,KAAKqH,IAAS,EAAJvJ,EAAQkC,KAAKC,GAAMumD,GACzCz/C,GAAI,EAAIg+C,EAAS/kD,KAAKoH,IAAS,EAAJtJ,EAAQkC,KAAKC,GAAMumD,KAGtD,OAAOzkC,CACX,GAAC,CAAAvjB,IAAA,cAAAtC,MACD,WACI,IAAM6lB,EAASvkB,KAAK+oD,aAChB5kC,EAAOI,EAAO,GAAGjb,EACjB+a,EAAOE,EAAO,GAAGhb,EACjB6a,EAAOG,EAAO,GAAGjb,EACjBgb,EAAOC,EAAO,GAAGhb,EAOrB,OANAgb,EAAOjrB,SAAQ,SAAC+P,GACZ8a,EAAO3hB,KAAK8b,IAAI6F,EAAM9a,EAAMC,GAC5B+a,EAAO7hB,KAAKmiB,IAAIN,EAAMhb,EAAMC,GAC5B8a,EAAO5hB,KAAK8b,IAAI8F,EAAM/a,EAAME,GAC5B+a,EAAO9hB,KAAKmiB,IAAIL,EAAMjb,EAAME,EAChC,IACO,CACHD,EAAG6a,EACH5a,EAAG6a,EACHvK,MAAOwK,EAAOF,EACdrK,OAAQwK,EAAOF,EAEvB,GAAC,CAAApjB,IAAA,WAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,YAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,WAAAtC,MACD,SAASmb,GACL7Z,KAAKunD,OAAO1tC,EAAQ,EACxB,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACN9Z,KAAKunD,OAAOztC,EAAS,EACzB,KAAC+8B,CAAA,CArDe,CAASxW,EAAQ5O,OAuDrC7yB,EAAQi4C,eAAiBA,EACzBA,EAAe3/C,UAAU8B,UAAY,iBACrC69C,EAAe3/C,UAAUg/B,WAAY,EACrC2gB,EAAe3/C,UAAUg6B,oBAAsB,CAAC,WAChD,EAAIrrB,EAASzD,eAAey0C,GAC5Bj4B,EAAU/f,QAAQM,gBAAgB03C,EAAgB,SAAU,GAAG,EAAI73C,EAAa0G,uBAChFkZ,EAAU/f,QAAQM,gBAAgB03C,EAAgB,QAAS,GAAG,EAAI73C,EAAa0G,sB,mCCpElE,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQk4C,UAAO,EACf,IAAMl4B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACrBkqD,EAAiB,EAAVzmD,KAAKC,GACVq0C,EAAI,SAAAvW,GAAAhP,EAAAulB,EAAAvW,GAAA,IAAAjO,EAAAd,EAAAslB,GAAA,SAAAA,IAAA,OAAAhuC,EAAA,KAAAguC,GAAAxkB,EAAArwB,MAAA,KAAAZ,UAAA,CAoBL,OApBK0H,EAAA+tC,EAAA,EAAA91C,IAAA,aAAAtC,MACN,SAAWsf,GACPA,EAAQ8F,YACR9F,EAAQS,IAAI,EAAG,EAAGze,KAAKikD,cAAe,EAAGgF,GAAM,GAC/CjrC,EAAQO,OAAOve,KAAKgkD,cAAe,GACnChmC,EAAQS,IAAI,EAAG,EAAGze,KAAKgkD,cAAeiF,EAAM,GAAG,GAC/CjrC,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAA4B,EAArBsB,KAAKgkD,aAChB,GAAC,CAAAhjD,IAAA,YAAAtC,MACD,WACI,OAA4B,EAArBsB,KAAKgkD,aAChB,GAAC,CAAAhjD,IAAA,WAAAtC,MACD,SAASmb,GACL7Z,KAAKgkD,YAAYnqC,EAAQ,EAC7B,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACN9Z,KAAKgkD,YAAYlqC,EAAS,EAC9B,KAACg9B,CAAA,CApBK,CAASzW,EAAQ5O,OAsB3B7yB,EAAQk4C,KAAOA,EACfA,EAAK5/C,UAAU8B,UAAY,OAC3B89C,EAAK5/C,UAAUg/B,WAAY,EAC3B4gB,EAAK5/C,UAAUg6B,oBAAsB,CAAC,cAAe,gBACrD,EAAIrrB,EAASzD,eAAe00C,GAC5Bl4B,EAAU/f,QAAQM,gBAAgB23C,EAAM,cAAe,GAAG,EAAI93C,EAAa0G,uBAC3EkZ,EAAU/f,QAAQM,gBAAgB23C,EAAM,cAAe,GAAG,EAAI93C,EAAa0G,sB,mCCpC9D,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0wB,EAAAx6B,EAAA,KAAA8J,QAAAswB,EAAAp6B,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQm4C,YAAS,EACjB,IAAMn4B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClB65C,EAAc75C,EAAQ,KACtBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACnBg4C,EAAM,SAAAxW,GAAAhP,EAAAwlB,EAAAxW,GAAA,IAAAjO,EAAAd,EAAAulB,GACR,SAAAA,EAAYh3B,GAAQ,IAAA9e,EAoBb,OApBa6H,EAAA,KAAAiuC,IAChB91C,EAAAqxB,EAAAl7B,KAAA,KAAM2oB,IACDmpC,UAAW,EAChBjoD,EAAK0+B,KAAO,IAAIiZ,EAAYna,WAAU,WAClC,IAAI0qB,EAAUloD,EAAKioD,SAEnB,OADAjoD,EAAKioD,UAAW,EACTC,CACX,IACAloD,EAAKugB,GAAG,yBAAyB,WAC7BxhB,KAAKopD,WAAW,EACpB,IACAnoD,EAAKugB,GAAG,0BAA0B,WAC9BxhB,KAAKkpD,UAAW,CACpB,IACAjoD,EAAKugB,GAAG,yBAAyB,WACxBxhB,KAAK2/B,KAAK0pB,cAGfC,cAActpD,KAAKupD,UACnBvpD,KAAKwpD,eACT,IAAGvoD,CACP,CAkEC,OAlEA8H,EAAAguC,EAAA,EAAA/1C,IAAA,aAAAtC,MACD,SAAWsf,GACP,IAAI2hB,EAAO3/B,KAAKypD,YAAa7rD,EAAQoC,KAAKopD,aAAcM,EAAc,EAAR9rD,EAAWujB,EAAMnhB,KAAKu/B,aAAaI,GAAOgqB,EAAU3pD,KAAK4pD,eAAgBtgD,EAAI6X,EAAIuoC,EAAM,GAAIngD,EAAI4X,EAAIuoC,EAAM,GAAI7vC,EAAQsH,EAAIuoC,EAAM,GAAI5vC,EAASqH,EAAIuoC,EAAM,GAAI/B,EAAQ3nD,KAAK2nD,QAOrO,IANI3nD,KAAK81B,WAAa91B,KAAKy1B,eACvBzX,EAAQ8F,YACR9F,EAAQoE,KAAK,EAAG,EAAGvI,EAAOC,GAC1BkE,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,OAExB2nD,EACA,GAAIgC,EAAS,CACT,IAAI9wD,EAAS8wD,EAAQhqB,GAAOkqB,EAAc,EAARjsD,EAClCogB,EAAQmH,UAAUwiC,EAAOr+C,EAAGC,EAAGsQ,EAAOC,EAAQjhB,EAAOgxD,EAAM,GAAIhxD,EAAOgxD,EAAM,GAAIhwC,EAAOC,EAC3F,MAEIkE,EAAQmH,UAAUwiC,EAAOr+C,EAAGC,EAAGsQ,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,EAGvE,GAAC,CAAA9Y,IAAA,WAAAtC,MACD,SAASsf,GACL,IAAI2hB,EAAO3/B,KAAKypD,YAAa7rD,EAAQoC,KAAKopD,aAAcM,EAAc,EAAR9rD,EAAWujB,EAAMnhB,KAAKu/B,aAAaI,GAAOgqB,EAAU3pD,KAAK4pD,eAAgB/vC,EAAQsH,EAAIuoC,EAAM,GAAI5vC,EAASqH,EAAIuoC,EAAM,GAEhL,GADA1rC,EAAQ8F,YACJ6lC,EAAS,CACT,IAAI9wD,EAAS8wD,EAAQhqB,GACjBkqB,EAAc,EAARjsD,EACVogB,EAAQoE,KAAKvpB,EAAOgxD,EAAM,GAAIhxD,EAAOgxD,EAAM,GAAIhwC,EAAOC,EAC1D,MAEIkE,EAAQoE,KAAK,EAAG,EAAGvI,EAAOC,GAE9BkE,EAAQ+F,YACR/F,EAAQipB,UAAUjnC,KACtB,GAAC,CAAAgB,IAAA,mBAAAtC,MACD,WACI,OAAA66B,EAAAJ,EAAA4d,EAAA7/C,WAAA,yBAAAE,KAAA,MAA8B,EAClC,GAAC,CAAA4J,IAAA,eAAAtC,MACD,WACI,IAAIiqB,EAAO3oB,KACXA,KAAKupD,SAAWO,aAAY,WACxBnhC,EAAKohC,cACT,GAAG,IAAO/pD,KAAKo/B,YACnB,GAAC,CAAAp+B,IAAA,QAAAtC,MACD,WACI,IAAIsB,KAAKqpD,YAAT,CAGA,IAAIthC,EAAQ/nB,KAAKgoB,WACjBhoB,KAAK2/B,KAAKN,UAAUtX,GACpB/nB,KAAKwpD,eACLxpD,KAAK2/B,KAAKjjB,OAJV,CAKJ,GAAC,CAAA1b,IAAA,OAAAtC,MACD,WACIsB,KAAK2/B,KAAKH,OACV8pB,cAActpD,KAAKupD,SACvB,GAAC,CAAAvoD,IAAA,YAAAtC,MACD,WACI,OAAOsB,KAAK2/B,KAAK0pB,WACrB,GAAC,CAAAroD,IAAA,eAAAtC,MACD,WACI,IAAId,EAAQoC,KAAKopD,aAAcK,EAAYzpD,KAAKypD,YAC5C7rD,EADsEoC,KAAKu/B,aAAgCkqB,GAAuBjyD,OAAS,EAC7H,EACdwI,KAAKopD,WAAWxrD,EAAQ,GAGxBoC,KAAKopD,WAAW,EAExB,KAACrS,CAAA,CAxFO,CAAS1W,EAAQ5O,OA0F7B7yB,EAAQm4C,OAASA,EACjBA,EAAO7/C,UAAU8B,UAAY,UAC7B,EAAI6M,EAASzD,eAAe20C,GAC5Bn4B,EAAU/f,QAAQM,gBAAgB43C,EAAQ,aAC1Cn4B,EAAU/f,QAAQM,gBAAgB43C,EAAQ,cAC1Cn4B,EAAU/f,QAAQM,gBAAgB43C,EAAQ,gBAC1Cn4B,EAAU/f,QAAQM,gBAAgB43C,EAAQ,SAC1Cn4B,EAAU/f,QAAQM,gBAAgB43C,EAAQ,aAAc,GAAG,EAAI/3C,EAAa0G,uBAC5EkZ,EAAU/f,QAAQM,gBAAgB43C,EAAQ,YAAa,IAAI,EAAI/3C,EAAa0G,uBAC5EkZ,EAAU/f,QAAQ4C,WAAWs1C,EAAQ,CACjCn5C,MAAO,aACPosD,SAAU,gBACVC,SAAU,iB,mCC9GD,IAAAnhD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQo4C,UAAO,EACf,IAAMp4B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACnBi4C,EAAI,SAAAzW,GAAAhP,EAAAylB,EAAAzW,GAAA,IAAAjO,EAAAd,EAAAwlB,GAAA,SAAAA,IAAA,OAAAluC,EAAA,KAAAkuC,GAAA1kB,EAAArwB,MAAA,KAAAZ,UAAA,CAyBL,OAzBK0H,EAAAiuC,EAAA,EAAAh2C,IAAA,aAAAtC,MACN,SAAWsf,GACP,IAAIimC,EAAcjkD,KAAKikD,cAAeD,EAAchkD,KAAKgkD,cAAekG,EAAYlqD,KAAKkqD,YACzFlsC,EAAQ8F,YACR9F,EAAQO,OAAO,EAAG,EAAIylC,GACtB,IAAK,IAAI1jD,EAAI,EAAGA,EAAgB,EAAZ4pD,EAAe5pD,IAAK,CACpC,IAAIinD,EAASjnD,EAAI,IAAM,EAAI0jD,EAAcC,EACrC36C,EAAIi+C,EAAS/kD,KAAKqH,IAAKvJ,EAAIkC,KAAKC,GAAMynD,GACtC3gD,GAAK,EAAIg+C,EAAS/kD,KAAKoH,IAAKtJ,EAAIkC,KAAKC,GAAMynD,GAC/ClsC,EAAQQ,OAAOlV,EAAGC,EACtB,CACAyU,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAA4B,EAArBsB,KAAKgkD,aAChB,GAAC,CAAAhjD,IAAA,YAAAtC,MACD,WACI,OAA4B,EAArBsB,KAAKgkD,aAChB,GAAC,CAAAhjD,IAAA,WAAAtC,MACD,SAASmb,GACL7Z,KAAKgkD,YAAYnqC,EAAQ,EAC7B,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACN9Z,KAAKgkD,YAAYlqC,EAAS,EAC9B,KAACk9B,CAAA,CAzBK,CAAS3W,EAAQ5O,OA2B3B7yB,EAAQo4C,KAAOA,EACfA,EAAK9/C,UAAU8B,UAAY,OAC3Bg+C,EAAK9/C,UAAUg/B,WAAY,EAC3B8gB,EAAK9/C,UAAUg6B,oBAAsB,CAAC,cAAe,gBACrD,EAAIrrB,EAASzD,eAAe40C,GAC5Bp4B,EAAU/f,QAAQM,gBAAgB63C,EAAM,YAAa,GAAG,EAAIh4C,EAAa0G,uBACzEkZ,EAAU/f,QAAQM,gBAAgB63C,EAAM,cAAe,GAAG,EAAIh4C,EAAa0G,uBAC3EkZ,EAAU/f,QAAQM,gBAAgB63C,EAAM,cAAe,GAAG,EAAIh4C,EAAa0G,sB,mCCzC9D,IAAAoD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0wB,EAAAx6B,EAAA,KAAA8J,QAAAswB,EAAAp6B,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQq4C,cAAW,EACnB,IAAMn4C,EAASC,EAAQ,KACjB6f,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClB01C,EAAS11C,EAAQ,KACjBg2C,EAASh2C,EAAQ,KACjBC,EAAeD,EAAQ,KACvB8G,EAAW9G,EAAQ,KACF2wC,EAAS,SAChC,SAASpX,EAAUta,GACfA,EAAQ6qB,SAAS7oC,KAAKmqD,YAAa,EAAG,EAC1C,CACA,SAAS3xB,EAAYxa,GACjBA,EAAQkrB,WAAWlpC,KAAKmqD,YAAa,EAAG,EAC5C,CAAC,IACKlT,EAAQ,SAAA1W,GAAAhP,EAAA0lB,EAAA1W,GAAA,IAAAjO,EAAAd,EAAAylB,GACV,SAAAA,EAAYl3B,GAAQ,IAAA9e,EAUI,OAVJ6H,EAAA,KAAAmuC,IAChBh2C,EAAAqxB,EAAAl7B,KAAA,KAAM2oB,IACDqqC,YAActrD,EAAOe,KAAK0W,sBAC/BtV,EAAKu/B,UAAY,GACjBv/B,EAAKy/B,qBACLz/B,EAAKugB,GAAG,oBAAoB,WACxBxhB,KAAK0gC,qBACL1gC,KAAKiwC,cACT,IACAhvC,EAAKugB,GAAG,mIAAoIvgB,EAAKgvC,cACjJhvC,EAAKgvC,eAAehvC,CACxB,CA+LC,OA/LA8H,EAAAkuC,EAAA,EAAAj2C,IAAA,qBAAAtC,MACD,WACI,OAAO+1C,EAAOrU,KAAKQ,cAAc5gC,KAAKwgC,UAC1C,GAAC,CAAAx/B,IAAA,oBAAAtC,MACD,SAAkBlH,GACd,OAAKwI,KAAKC,MAAM2wB,KAIZp5B,EAAS,EADOwI,KAAKygC,WAEd,KAEJgU,EAAOrU,KAAKyB,4BAA4BrqC,EAAQwI,KAAKwgC,WANjD,IAOf,GAAC,CAAAx/B,IAAA,qBAAAtC,MACD,WACIsB,KAAKwgC,UAAYiU,EAAOrU,KAAKO,cAAc3gC,KAAKC,MAAM2wB,MACtD5wB,KAAKygC,WAAazgC,KAAKqqD,oBAC3B,GAAC,CAAArpD,IAAA,aAAAtC,MACD,SAAWsf,GACPA,EAAQgG,QAAQ,OAAQhkB,KAAKixC,mBAC7BjzB,EAAQgG,QAAQ,eAAgBhkB,KAAKsqD,gBACrCtsC,EAAQgG,QAAQ,YAAa,QAC7BhG,EAAQyF,OACR,IAAIktB,EAAiB3wC,KAAK2wC,iBACtBvb,EAAOp1B,KAAKo1B,OACZgb,EAAWpwC,KAAKowC,WAChBma,EAAYvqD,KAAKuqD,UACE,cAAnB5Z,GACA3yB,EAAQ8F,YAEZ,IAAK,IAAIvsB,EAAI,EAAGA,EAAIgzD,EAAU/yD,OAAQD,IAAK,CACvCymB,EAAQyF,OACR,IAAI+mC,EAAKD,EAAUhzD,GAAGizD,GACtBxsC,EAAQ0F,UAAU8mC,EAAGlhD,EAAGkhD,EAAGjhD,GAC3ByU,EAAQ2O,OAAO49B,EAAUhzD,GAAGwT,UAC5B/K,KAAKmqD,YAAcI,EAAUhzD,GAAGoxC,KAChC3qB,EAAQwjB,gBAAgBxhC,MACD,cAAnB2wC,IACU,IAANp5C,GACAymB,EAAQO,OAAO,EAAG6xB,EAAW,EAAI,GAErCpyB,EAAQQ,OAAO4xB,EAAUA,EAAW,EAAI,IAE5CpyB,EAAQ6F,SACZ,CACuB,cAAnB8sB,IACA3yB,EAAQwzB,YAAcpc,EACtBpX,EAAQozB,UAAYhB,EAAW,GAC/BpyB,EAAQiG,UAEZjG,EAAQ6F,SACZ,GAAC,CAAA7iB,IAAA,WAAAtC,MACD,SAASsf,GACLA,EAAQ8F,YACR,IAAIymC,EAAYvqD,KAAKuqD,UACrB,GAAIA,EAAU/yD,QAAU,EAAG,CACvB,IAAIgzD,EAAKD,EAAU,GAAGC,GACtBxsC,EAAQO,OAAOisC,EAAGlhD,EAAGkhD,EAAGjhD,EAC5B,CACA,IAAK,IAAIhS,EAAI,EAAGA,EAAIgzD,EAAU/yD,OAAQD,IAAK,CACvC,IAAI0kB,EAAKsuC,EAAUhzD,GAAG0kB,GACtB+B,EAAQQ,OAAOvC,EAAG3S,EAAG2S,EAAG1S,EAC5B,CACAyU,EAAQgG,QAAQ,YAAahkB,KAAKowC,YAClCpyB,EAAQgG,QAAQ,cAAehkB,KAAKuyB,UACpCvU,EAAQiG,QACZ,GAAC,CAAAjjB,IAAA,eAAAtC,MACD,WACI,OAAOsB,KAAK+xC,SAChB,GAAC,CAAA/wC,IAAA,gBAAAtC,MACD,WAEI,OADAI,EAAOe,KAAKsG,KAAK,6HACVnG,KAAKgyC,UAChB,GAAC,CAAAhxC,IAAA,UAAAtC,MACD,SAAQiqC,GACJ,OAAOoM,EAAO5F,KAAKj4C,UAAUuzD,QAAQrzD,KAAK4I,KAAM2oC,EACpD,GAAC,CAAA3nC,IAAA,kBAAAtC,MACD,WACI,OAAOq2C,EAAO5F,KAAKj4C,UAAU+5C,gBAAgB75C,KAAK4I,KACtD,GAAC,CAAAgB,IAAA,eAAAtC,MACD,SAAaiqC,GACT,IACInlB,EADcxjB,KAAKoqD,YACIhnC,WAAW,MACtCI,EAASC,OACTD,EAAS0uB,KAAOlyC,KAAKixC,kBACrB,IAAIgB,EAAUzuB,EAASslB,YAAYH,GAEnC,OADAnlB,EAASK,UACF,CACHhK,MAAOo4B,EAAQp4B,MACfC,OAAQtC,SAAS,GAAD1d,OAAIkG,KAAKowC,YAAc,IAE/C,GAAC,CAAApvC,IAAA,eAAAtC,MACD,WACI,IAAAgsD,EAA0B1qD,KAAK2qD,aAAa3qD,KAAKC,MAAM0oC,MAA/C9uB,EAAK6wC,EAAL7wC,MAAOC,EAAM4wC,EAAN5wC,OAIf,GAHA9Z,KAAK+xC,UAAYl4B,EACjB7Z,KAAKgyC,WAAal4B,EAClB9Z,KAAKuqD,UAAY,IACZvqD,KAAKC,MAAM2wB,KACZ,OAAO,KAEX,IAAM8f,EAAgB1wC,KAAK0wC,gBACrB70C,EAAQmE,KAAKnE,QACb+uD,EAAc5qD,KAAK4qD,cACnB7Y,EAAYvvC,KAAKmiB,IAAI3kB,KAAK+xC,YAAc/xC,KAAKC,MAAM0oC,MAAQ,IAAInxC,OAAS,GAAKk5C,EAAe,GAC9F73C,EAAS,EACC,WAAVgD,IACAhD,EAAS2J,KAAKmiB,IAAI,EAAG3kB,KAAKygC,WAAa,EAAIsR,EAAY,IAE7C,UAAVl2C,IACAhD,EAAS2J,KAAKmiB,IAAI,EAAG3kB,KAAKygC,WAAasR,IAI3C,IAFA,IAAM8Y,GAAU,EAAI9V,EAAO3F,eAAepvC,KAAK2oC,QAC3CmiB,EAAgBjyD,EACXtB,EAAI,EAAGA,EAAIszD,EAAQrzD,OAAQD,IAAK,CACrC,IAAMwzD,EAAiB/qD,KAAKgrD,kBAAkBF,GAC9C,IAAKC,EACD,OACJ,IAAIE,EAAajrD,KAAK2qD,aAAaE,EAAQtzD,IAAIsiB,MAAQ62B,EACvD,GAAmB,MAAfma,EAAQtzD,IAAwB,YAAVsE,EAAqB,CAC3C,IAAMqvD,EAAiBlrD,KAAK2oC,OAAO5vB,MAAM,KAAKvhB,OAAS,EACvDyzD,IAAejrD,KAAKygC,WAAasR,GAAamZ,CAClD,CACA,IAAMC,EAAenrD,KAAKgrD,kBAAkBF,EAAgBG,GAC5D,IAAKE,EACD,OACJ,IAAMtxC,EAAQ46B,EAAOrU,KAAK2C,cAAcgoB,EAAezhD,EAAGyhD,EAAexhD,EAAG4hD,EAAa7hD,EAAG6hD,EAAa5hD,GACrG6hD,EAAO,EACX,GAAIR,EACA,IACIQ,EAAOR,EAAYC,EAAQtzD,EAAI,GAAIszD,EAAQtzD,IAAMyI,KAAKowC,UAC1D,CACA,MAAOt5C,GACHs0D,EAAO,CACX,CAEJL,EAAezhD,GAAK8hD,EACpBD,EAAa7hD,GAAK8hD,EAClBprD,KAAK+xC,WAAaqZ,EAClB,IAAMC,EAAW5W,EAAOrU,KAAK4B,eAAeopB,EAAOvxC,EAAQ,EAAKkxC,EAAezhD,EAAGyhD,EAAexhD,EAAG4hD,EAAa7hD,EAAG6hD,EAAa5hD,GAC3HwB,EAAWvI,KAAKuiD,MAAMoG,EAAa5hD,EAAIwhD,EAAexhD,EAAG4hD,EAAa7hD,EAAIyhD,EAAezhD,GAC/FtJ,KAAKuqD,UAAUzxD,KAAK,CAChBwyD,WAAYD,EAAS/hD,EACrBiiD,WAAYF,EAAS9hD,EACrBo/B,KAAMkiB,EAAQtzD,GACdwT,SAAUA,EACVy/C,GAAIO,EACJ9uC,GAAIkvC,IAERL,GAAiBG,CACrB,CACJ,GAAC,CAAAjqD,IAAA,cAAAtC,MACD,WACI,IAAKsB,KAAKuqD,UAAU/yD,OAChB,MAAO,CACH8R,EAAG,EACHC,EAAG,EACHsQ,MAAO,EACPC,OAAQ,GAGhB,IAAIyK,EAAS,GACbvkB,KAAKuqD,UAAUjxD,SAAQ,SAAUkyD,GAC7BjnC,EAAOzrB,KAAK0yD,EAAKhB,GAAGlhD,GACpBib,EAAOzrB,KAAK0yD,EAAKhB,GAAGjhD,GACpBgb,EAAOzrB,KAAK0yD,EAAKvvC,GAAG3S,GACpBib,EAAOzrB,KAAK0yD,EAAKvvC,GAAG1S,EACxB,IAMA,IALA,IAIID,EAAGC,EAJH4a,EAAOI,EAAO,IAAM,EACpBF,EAAOE,EAAO,IAAM,EACpBH,EAAOG,EAAO,IAAM,EACpBD,EAAOC,EAAO,IAAM,EAEfhtB,EAAI,EAAGA,EAAIgtB,EAAO/sB,OAAS,EAAGD,IACnC+R,EAAIib,EAAW,EAAJhtB,GACXgS,EAAIgb,EAAW,EAAJhtB,EAAQ,GACnB4sB,EAAO3hB,KAAK8b,IAAI6F,EAAM7a,GACtB+a,EAAO7hB,KAAKmiB,IAAIN,EAAM/a,GACtB8a,EAAO5hB,KAAK8b,IAAI8F,EAAM7a,GACtB+a,EAAO9hB,KAAKmiB,IAAIL,EAAM/a,GAE1B,IAAI6mC,EAAWpwC,KAAKowC,WACpB,MAAO,CACH9mC,EAAG6a,EAAOisB,EAAW,EACrB7mC,EAAG6a,EAAOgsB,EAAW,EACrBv2B,MAAOwK,EAAOF,EAAOisB,EACrBt2B,OAAQwK,EAAOF,EAAOgsB,EAE9B,GAAC,CAAApvC,IAAA,UAAAtC,MACD,WAEI,OADAI,EAAOe,KAAK8d,cAAc3d,KAAKoqD,aAC/B7wB,EAAAJ,EAAA8d,EAAA//C,WAAA,gBAAAE,KAAA,KACJ,KAAC6/C,CAAA,CA3MS,CAAS5W,EAAQ5O,OA6M/B7yB,EAAQq4C,SAAWA,EACnBA,EAAS//C,UAAUohC,UAAYA,EAC/B2e,EAAS//C,UAAUshC,YAAcA,EACjCye,EAAS//C,UAAUuhC,aAAeH,EAClC2e,EAAS//C,UAAUwhC,eAAiBF,EACpCye,EAAS//C,UAAU8B,UAAY,WAC/Bi+C,EAAS//C,UAAUg6B,oBAAsB,CAAC,OAAQ,WAAY,SAC9D,EAAIrrB,EAASzD,eAAe60C,GAC5Br4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,QAC5Cr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,aAAc,SAC1Dr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,WAAY,IAAI,EAAIj4C,EAAa0G,uBAC7EkZ,EAAU/f,QAAQM,gBAAgB83C,EAAU,YAAavH,GACzD9wB,EAAU/f,QAAQM,gBAAgB83C,EAAU,QAAS,QACrDr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,gBAAiB,GAAG,EAAIj4C,EAAa0G,uBACjFkZ,EAAU/f,QAAQM,gBAAgB83C,EAAU,eAAgB,UAC5Dr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,cAAevH,GAC3D9wB,EAAU/f,QAAQM,gBAAgB83C,EAAU,OApOzB,IAqOnBr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,iBAAkB,MAC9Dr4B,EAAU/f,QAAQM,gBAAgB83C,EAAU,cAAe,K,mCChP9C,IAAAnuC,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAAyoB,EAAAvyB,EAAA,KAAA8J,QAAA0wB,EAAAx6B,EAAA,KAAA8J,QAAAswB,EAAAp6B,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQs4C,iBAAc,EACtB,IAAMp4C,EAASC,EAAQ,KACjB6f,EAAY7f,EAAQ,KACpB6yB,EAAS7yB,EAAQ,KACjBshC,EAAUthC,EAAQ,KAClB21C,EAAS31C,EAAQ,KACjB45C,EAAU55C,EAAQ,KAClB8G,EAAW9G,EAAQ,KACnBC,EAAeD,EAAQ,KACvB8yB,EAAW9yB,EAAQ,KACrB0sD,EAAc,WACd7b,EAAmB,CACnB,sBACA,2BACA,sBACA,uBACA,mBACA,sBACA,qBACA,0BACA,mBACA,qBACA,0BACA,mBACA,2BACA,qBACA,yBAEC52B,KAAI,SAACliB,GAAC,OAAKA,EAAI,IAAHgD,OAAO2xD,EAAa,IAChC5rC,KAAK,KACN6rC,EAAa,YACb9rC,EAAuB,CACvB,cACA,eACA,eACA,eACA,cACA,cACA,iBACA,gBACA,gBACA,0BACA,qBAEA+rC,EAAS,CACT,YAAa,GACb,aAAc,EACd,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,eAAgB,IAChB,gBAAiB,IACjB,eAAgB,KAEdC,EAAe,iBAAkB/lD,EAASxD,MAAMS,QAoCtD,IAAI+oD,EAAgB,CAChB,WACA,aACA,YACA,eACA,cACA,cACA,gBACA,gBAaJ,SAASC,EAAkBxvB,EAAOyvB,EAAU1iD,GACxC,IAAMC,EAAID,EAAMC,GACXgzB,EAAMhzB,EAAID,EAAMC,GAAK9G,KAAKoH,IAAImiD,IAC9BzvB,EAAM/yB,EAAIF,EAAME,GAAK/G,KAAKqH,IAAIkiD,GAC7BxiD,EAAIF,EAAME,GACX+yB,EAAMhzB,EAAID,EAAMC,GAAK9G,KAAKqH,IAAIkiD,IAC9BzvB,EAAM/yB,EAAIF,EAAME,GAAK/G,KAAKoH,IAAImiD,GACnC,OAAO90D,OAAOinD,OAAOjnD,OAAOinD,OAAO,CAAC,EAAG5hB,GAAQ,CAAEvxB,SAAUuxB,EAAMvxB,SAAWghD,EAAUziD,IAClFC,KACR,CACA,SAASyiD,EAAmB1vB,EAAO2vB,GAC/B,IAAMC,EArBV,SAAmB5vB,GACf,MAAO,CACHhzB,EAAGgzB,EAAMhzB,EACJgzB,EAAMziB,MAAQ,EAAKrX,KAAKoH,IAAI0yB,EAAMvxB,UAClCuxB,EAAMxiB,OAAS,EAAKtX,KAAKqH,KAAKyyB,EAAMvxB,UACzCxB,EAAG+yB,EAAM/yB,EACJ+yB,EAAMxiB,OAAS,EAAKtX,KAAKoH,IAAI0yB,EAAMvxB,UACnCuxB,EAAMziB,MAAQ,EAAKrX,KAAKqH,IAAIyyB,EAAMvxB,UAE/C,CAYmBohD,CAAU7vB,GACzB,OAAOwvB,EAAkBxvB,EAAO2vB,EAAUC,EAC9C,CAYC,IACKhV,EAAW,SAAAsR,GAAAj3B,EAAA2lB,EAAAsR,GAAA,IAAAl2B,EAAAd,EAAA0lB,GACb,SAAAA,EAAYn3B,GAAQ,IAAA9e,EAUf,OAVe6H,EAAA,KAAAouC,IAChBj2C,EAAAqxB,EAAAl7B,KAAA,KAAM2oB,IACDqsC,eAAgB,EACrBnrD,EAAKorD,kBACLprD,EAAKqrD,iBAAmBrrD,EAAKqrD,iBAAiBlzB,KAAI9H,EAAArwB,IAClDA,EAAKsrD,eAAiBtrD,EAAKsrD,eAAenzB,KAAI9H,EAAArwB,IAC9CA,EAAKigD,OAASjgD,EAAKigD,OAAO9nB,KAAI9H,EAAArwB,IAC9BA,EAAKugB,GAAGouB,EAAkB3uC,EAAKigD,QAC3BjgD,EAAKurD,WACLvrD,EAAKigD,SACRjgD,CACL,CAkxBC,OAlxBA8H,EAAAmuC,EAAA,EAAAl2C,IAAA,WAAAtC,MACD,SAASmG,GAEL,OADA7E,KAAKysD,QAAQ5nD,GACN7E,IACX,GAAC,CAAAgB,IAAA,UAAAtC,MACD,SAAQmG,GAEJ,OADA/F,EAAOe,KAAKsG,KAAK,6HACVnG,KAAK0sD,SAAS,CAAC7nD,GAC1B,GAAC,CAAA7D,IAAA,UAAAtC,MACD,WACI,OAAOsB,KAAK2sD,QAAU3sD,KAAK2sD,OAAO,EACtC,GAAC,CAAA3rD,IAAA,qBAAAtC,MACD,WACI,OAAO+sD,EAAczrD,KAAKggB,GAC9B,GAAC,CAAAhf,IAAA,WAAAtC,MACD,WAAqB,IAAA8oB,EAAA,KAAZe,EAAKlnB,UAAA7J,OAAA,QAAAuC,IAAAsH,UAAA,GAAAA,UAAA,GAAG,GACTrB,KAAK2sD,QAAU3sD,KAAK2sD,OAAOn1D,QAC3BwI,KAAK4sD,SAET,IAAMC,EAAgBtkC,EAAMxG,QAAO,SAACld,GAChC,OAAIA,EAAK8pB,aAAanH,KAClB1oB,EAAOe,KAAK0B,MAAM,gFACX,EAGf,IA+BA,OA9BAvB,KAAK2sD,OAASpkC,EAAQskC,EACD,IAAjBtkC,EAAM/wB,QAAgBwI,KAAK8sD,wBAC3B9sD,KAAK+K,SAASwd,EAAM,GAAGwkC,uBAGvB/sD,KAAK+K,SAAS,GAElB/K,KAAK2sD,OAAOrzD,SAAQ,SAACuL,GACjB,IAAMmoD,EAAW,WACe,IAAxBxlC,EAAKe,QAAQ/wB,QAAgBgwB,EAAKslC,yBAClCtlC,EAAKzc,SAASyc,EAAKe,QAAQ,GAAGwkC,uBAElCvlC,EAAKylC,uBACAzlC,EAAK4kC,eAAkB5kC,EAAK7iB,cAC7B6iB,EAAK05B,QAEb,EACMgM,EAAmBroD,EAAKqsB,oBACzBlY,KAAI,SAAC7d,GAAI,OAAKA,EAAO,UAAYqsB,EAAK2lC,oBAAoB,IAC1DttC,KAAK,KACVhb,EAAK2c,GAAG0rC,EAAkBF,GAC1BnoD,EAAK2c,GAAG5B,EAAqB5G,KAAI,SAACliB,GAAC,OAAKA,EAAI,IAAHgD,OAAO0tB,EAAK2lC,qBAAsB,IAAEttC,KAAK,KAAMmtC,GACxFnoD,EAAK2c,GAAG,2BAAD1nB,OAA4B0tB,EAAK2lC,sBAAwBH,GAChExlC,EAAK4lC,WAAWvoD,EACpB,IACA7E,KAAKitD,yBACmBjtD,KAAK47B,QAAQ,cAEjC57B,KAAKkhD,SAEFlhD,IACX,GAAC,CAAAgB,IAAA,aAAAtC,MACD,SAAWmG,GAAM,IACTwoD,EADSrkC,EAAA,KAEbnkB,EAAK2c,GAAG,aAAD1nB,OAAckG,KAAKmtD,uBAAwB,SAACr2D,GAC/Cu2D,EAAUxoD,EAAKwqB,sBACVrG,EAAKrkB,cAAgBE,IAASmkB,EAAK4S,QAAQ,UAC5C5S,EAAKgV,UAAUlnC,GAAG,EAE1B,IACA+N,EAAK2c,GAAG,YAAD1nB,OAAakG,KAAKmtD,uBAAwB,SAACr2D,GAC9C,GAAKu2D,EAAL,CAGA,IAAM12B,EAAM9xB,EAAKwqB,sBACXllB,EAAKwsB,EAAIrtB,EAAI+jD,EAAQ/jD,EACrBc,EAAKusB,EAAIptB,EAAI8jD,EAAQ9jD,EAC3Byf,EAAKT,QAAQjvB,SAAQ,SAACg0D,GAClB,GAAIA,IAAczoD,IAGdyoD,EAAU3oD,aAAd,CAGA,IAAM4oD,EAAWD,EAAUj+B,sBAC3Bi+B,EAAUv9B,oBAAoB,CAC1BzmB,EAAGikD,EAASjkD,EAAIa,EAChBZ,EAAGgkD,EAAShkD,EAAIa,IAEpBkjD,EAAUtvB,UAAUlnC,EANpB,CAOJ,IACAu2D,EAAU,IAlBV,CAmBJ,GACJ,GAAC,CAAArsD,IAAA,WAAAtC,MACD,WACI,OAAOsB,KAAK2sD,QAAU,EAC1B,GAAC,CAAA3rD,IAAA,kBAAAtC,MACD,WACI,OAAOsB,KAAKwtD,iBAChB,GAAC,CAAAxsD,IAAA,SAAAtC,MACD,WAAS,IAAA4uB,EAAA,KACDttB,KAAK2sD,QACL3sD,KAAK2sD,OAAOrzD,SAAQ,SAACuL,GACjBA,EAAK2hB,IAAI,IAAM8G,EAAK6/B,qBACxB,IAEJntD,KAAK2sD,OAAS,GACd3sD,KAAKitD,sBACT,GAAC,CAAAjsD,IAAA,uBAAAtC,MACD,WACIsB,KAAKyhB,YAAYiqC,GACjB1rD,KAAKyhB,YAAY,aACjBzhB,KAAKiiB,6BAA6B,oBACtC,GAAC,CAAAjhB,IAAA,eAAAtC,MACD,WACI,OAAOsB,KAAK0hB,UAAUgqC,EAAY1rD,KAAKytD,cAC3C,GAAC,CAAAzsD,IAAA,iBAAAtC,MACD,SAAemG,GAAuC,IAAjC6oD,EAAGrsD,UAAA7J,OAAA,QAAAuC,IAAAsH,UAAA,GAAAA,UAAA,GAAGrB,KAAK+K,WAAY4iD,EAAQtsD,UAAA7J,OAAA,EAAA6J,UAAA,QAAAtH,EAC5CqoB,EAAOvd,EAAKwd,cAAc,CAC1BC,eAAe,EACfmU,YAAY,EACZJ,WAAYr2B,KAAK4tD,iBAEjBC,EAAWhpD,EAAK8mC,iBAAiBgiB,GACjCG,EAASjpD,EAAKwqB,oBAAoBs+B,GAClCxjD,EAAKiY,EAAK9Y,EAAIukD,EAASvkD,EAAIzE,EAAKolB,UAAY4jC,EAASvkD,EACrDc,EAAKgY,EAAK7Y,EAAIskD,EAAStkD,EAAI1E,EAAKqlB,UAAY2jC,EAAStkD,EACnDwB,GAAYlF,EAASxD,MAAMgB,SAASwB,EAAKkoD,uBAAmC,EAAVvqD,KAAKC,KAC9D,EAAVD,KAAKC,IAQV,OAAOqpD,EAPK,CACRxiD,EAAGwkD,EAAOxkD,EAAIa,EAAK3H,KAAKoH,IAAImB,GAAYX,EAAK5H,KAAKqH,KAAKkB,GACvDxB,EAAGukD,EAAOvkD,EAAIa,EAAK5H,KAAKoH,IAAImB,GAAYZ,EAAK3H,KAAKqH,IAAIkB,GACtD8O,MAAOuI,EAAKvI,MAAQg0C,EAASvkD,EAC7BwQ,OAAQsI,EAAKtI,OAAS+zC,EAAStkD,EAC/BwB,SAAUA,IAEiBlF,EAASxD,MAAMgB,SAASqqD,GAAM,CACzDpkD,EAAG,EACHC,EAAG,GAEX,GAAC,CAAAvI,IAAA,gBAAAtC,MACD,WAAgB,IAAAkvB,EAAA,KAEZ,IADW5tB,KAAKwsD,UAEZ,MAAO,CACHljD,GAAG,IACHC,GAAG,IACHsQ,MAAO,EACPC,OAAQ,EACR/O,SAAU,GAGlB,IAAMgjD,EAAc,GACpB/tD,KAAKuoB,QAAQvP,KAAI,SAACnU,GACd,IAAMmoB,EAAMnoB,EAAKwd,cAAc,CAC3BC,eAAe,EACfmU,YAAY,EACZJ,WAAYzI,EAAKggC,iBAEjBrpC,EAAS,CACT,CAAEjb,EAAG0jB,EAAI1jB,EAAGC,EAAGyjB,EAAIzjB,GACnB,CAAED,EAAG0jB,EAAI1jB,EAAI0jB,EAAInT,MAAOtQ,EAAGyjB,EAAIzjB,GAC/B,CAAED,EAAG0jB,EAAI1jB,EAAI0jB,EAAInT,MAAOtQ,EAAGyjB,EAAIzjB,EAAIyjB,EAAIlT,QACvC,CAAExQ,EAAG0jB,EAAI1jB,EAAGC,EAAGyjB,EAAIzjB,EAAIyjB,EAAIlT,SAE3B0K,EAAQ3f,EAAK4f,uBACjBF,EAAOjrB,SAAQ,SAAU+P,GACrB,IAAIqb,EAAcF,EAAMnb,MAAMA,GAC9B0kD,EAAYj1D,KAAK4rB,EACrB,GACJ,IACA,IAEIP,EAAMC,EAAMC,EAAMC,EAFhBlb,EAAK,IAAItK,EAAOkK,UACtBI,EAAGujB,QAAQ9mB,EAASxD,MAAMgB,SAASrD,KAAK+K,aAExCgjD,EAAYz0D,SAAQ,SAAU+P,GAC1B,IAAIqb,EAActb,EAAGC,MAAMA,QACdtP,IAAToqB,IACAA,EAAOE,EAAOK,EAAYpb,EAC1B8a,EAAOE,EAAOI,EAAYnb,GAE9B4a,EAAO3hB,KAAK8b,IAAI6F,EAAMO,EAAYpb,GAClC8a,EAAO5hB,KAAK8b,IAAI8F,EAAMM,EAAYnb,GAClC8a,EAAO7hB,KAAKmiB,IAAIN,EAAMK,EAAYpb,GAClCgb,EAAO9hB,KAAKmiB,IAAIL,EAAMI,EAAYnb,EACtC,IACAH,EAAGggB,SACH,IAAMpyB,EAAIoS,EAAGC,MAAM,CAAEC,EAAG6a,EAAM5a,EAAG6a,IACjC,MAAO,CACH9a,EAAGtS,EAAEsS,EACLC,EAAGvS,EAAEuS,EACLsQ,MAAOwK,EAAOF,EACdrK,OAAQwK,EAAOF,EACfrZ,SAAUlF,EAASxD,MAAMgB,SAASrD,KAAK+K,YAE/C,GAAC,CAAA/J,IAAA,OAAAtC,MACD,WACI,OAAOsB,KAAKguD,eAAe1kD,CAC/B,GAAC,CAAAtI,IAAA,OAAAtC,MACD,WACI,OAAOsB,KAAKguD,eAAezkD,CAC/B,GAAC,CAAAvI,IAAA,WAAAtC,MACD,WACI,OAAOsB,KAAKguD,eAAen0C,KAC/B,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,WACI,OAAOsB,KAAKguD,eAAel0C,MAC/B,GAAC,CAAA9Y,IAAA,kBAAAtC,MACD,WACIsB,KAAKiuD,cACLpC,EAAcvyD,QAAQ,SAAU8nB,GAC5BphB,KAAKkuD,cAAc9sC,EACvB,EAAEgY,KAAKp5B,OACPA,KAAKkuD,cAAc,UACvB,GAAC,CAAAltD,IAAA,gBAAAtC,MACD,SAAc0iB,GAAM,IAAAiP,EAAA,KACZ89B,EAAS,IAAIzZ,EAAOxF,KAAK,CACzBjrB,OAAQ,mBACRmR,KAAM,QACNE,YAAa,EACblU,KAAMA,EAAO,WACb5c,aAAc,EACd0rB,WAAW,EACXsF,eAAgBo2B,EAAe,GAAK,SAEpC/oD,EAAO7C,KACXmuD,EAAO3sC,GAAG,wBAAwB,SAAU1qB,GACxC+L,EAAKurD,iBAAiBt3D,EAC1B,IACAq3D,EAAO3sC,GAAG,aAAa,SAAC1qB,GACpBq3D,EAAOrnC,WACPhwB,EAAE+3B,cAAe,CACrB,IACAs/B,EAAO3sC,GAAG,WAAW,SAAC1qB,GAClBA,EAAE+3B,cAAe,CACrB,IACAs/B,EAAO3sC,GAAG,cAAc,WACpB,IAAI9X,EAAM7D,EAASxD,MAAMgB,SAASgtB,EAAKtlB,YACnCsjD,EAvUhB,SAAmBC,EAAY5kD,GAC3B,GAAmB,YAAf4kD,EACA,MAAO,YAEX5kD,GAAO5K,EAAOe,KAAKsa,SAASwxC,EAAO2C,IAAe,GAClD,IAAIhrD,GAAUxE,EAAOe,KAAKwa,SAAS3Q,GAAO,IAAO,KAAO,IACxD,OAAI5K,EAAOe,KAAKib,SAASxX,EAAO,MAAY,MAAQxE,EAAOe,KAAKib,SAASxX,EAAO,EAAG,MACxE,YAEFxE,EAAOe,KAAKib,SAASxX,EAAO,KAAW,MACrC,cAEFxE,EAAOe,KAAKib,SAASxX,EAAO,KAAW,OACrC,YAEFxE,EAAOe,KAAKib,SAASxX,EAAO,MAAY,OACtC,cAEFxE,EAAOe,KAAKib,SAASxX,EAAO,MAAY,OACtC,YAEFxE,EAAOe,KAAKib,SAASxX,EAAO,MAAY,OACtC,cAEFxE,EAAOe,KAAKib,SAASxX,EAAO,MAAY,OACtC,YAEFxE,EAAOe,KAAKib,SAASxX,EAAO,MAAY,OACtC,eAGPxE,EAAOe,KAAK0B,MAAM,uDAAyD+B,GACpE,UAEf,CAqSyBirD,CAAUntC,EAAM1X,GAC7BykD,EAAOrlC,WAAWojB,UACbiiB,EAAOrlC,WAAWojB,QAAQ/yC,MAAMk1D,OAASA,GAC9Ch+B,EAAKm+B,eAAgB,CACzB,IACAL,EAAO3sC,GAAG,YAAY,WAClB2sC,EAAOrlC,WAAWojB,UACbiiB,EAAOrlC,WAAWojB,QAAQ/yC,MAAMk1D,OAAS,IAC9Ch+B,EAAKm+B,eAAgB,CACzB,IACAxuD,KAAK+qB,IAAIojC,EACb,GAAC,CAAAntD,IAAA,cAAAtC,MACD,WAAc,IAAA+vD,EAAA,KACNC,EAAO,IAAIruB,EAAQ5O,MAAM,CACzBrQ,KAAM,OACNvH,MAAO,EACPC,OAAQ,EACRoW,WAAW,EACXuC,UAAS,SAAC0B,GACN,IAAI/qB,EAAKpJ,KAAKwiB,YACViY,EAAUrxB,EAAGqxB,UACjBtG,EAAIrQ,YACJqQ,EAAI/R,MAAMqY,GAAUA,EAASz6B,KAAK6Z,QAAoB,EAAV4gB,EAAaz6B,KAAK8Z,SAAqB,EAAV2gB,GACzEtG,EAAI5V,OAAOve,KAAK6Z,QAAU,GAAI4gB,GAC1BrxB,EAAGulD,iBACHx6B,EAAI3V,OAAOxe,KAAK6Z,QAAU,GAAIzQ,EAAGwlD,qBAAuB9vD,EAAOe,KAAKoW,MAAMjW,KAAK8Z,UAAY2gB,GAE/FtG,EAAIqN,gBAAgBxhC,KACxB,EACA0yB,QAAS,SAACyB,EAAKmI,GACX,GAAKmyB,EAAKI,0BAAV,CAGA,IAAIp0B,EAAUg0B,EAAKh0B,UACnBtG,EAAIrQ,YACJqQ,EAAI/R,MAAMqY,GAAUA,EAAS6B,EAAMziB,QAAoB,EAAV4gB,EAAa6B,EAAMxiB,SAAqB,EAAV2gB,GAC3EtG,EAAIqN,gBAAgBlF,EAJpB,CAKJ,IAEJt8B,KAAK+qB,IAAI2jC,GACT1uD,KAAKotD,WAAWsB,GAChBA,EAAKltC,GAAG,aAAa,SAAC1qB,GAClBA,EAAE+3B,cAAe,CACrB,IACA6/B,EAAKltC,GAAG,YAAY,SAAC1qB,GACjBA,EAAE+3B,cAAe,CACrB,IACA6/B,EAAKltC,GAAG,WAAW,SAAC1qB,GAChBA,EAAE+3B,cAAe,CACrB,IACA7uB,KAAKwhB,GAAG,YAAY,SAAC1qB,GACjB23D,EAAKvN,QACT,GACJ,GAAC,CAAAlgD,IAAA,mBAAAtC,MACD,SAAiB5H,GACbkJ,KAAKwtD,kBAAoB12D,EAAE0Q,OAAO4Z,OAAOrI,MAAM,KAAK,GACpD,IAAI9Y,EAAQD,KAAKguD,eACbn0C,EAAQ5Z,EAAM4Z,MACdC,EAAS7Z,EAAM6Z,OACfg1C,EAAatsD,KAAK6I,KAAK7I,KAAK2rC,IAAIt0B,EAAO,GAAKrX,KAAK2rC,IAAIr0B,EAAQ,IACjE9Z,KAAK6J,IAAMrH,KAAKm0B,IAAI7c,EAASg1C,GAC7B9uD,KAAK4J,IAAMpH,KAAKm0B,IAAI9c,EAAQi1C,GACN,qBAAXnsD,SACPA,OAAOy7B,iBAAiB,YAAap+B,KAAKssD,kBAC1C3pD,OAAOy7B,iBAAiB,YAAap+B,KAAKssD,kBAC1C3pD,OAAOy7B,iBAAiB,UAAWp+B,KAAKusD,gBAAgB,GACxD5pD,OAAOy7B,iBAAiB,WAAYp+B,KAAKusD,gBAAgB,IAE7DvsD,KAAKosD,eAAgB,EACrB,IAAIh9B,EAAKt4B,EAAE0Q,OAAO6nB,sBACdtG,EAAMjyB,EAAE0Q,OAAOshB,WAAWG,qBAC9BjpB,KAAK+uD,kBAAoB,CACrBzlD,EAAGyf,EAAIzf,EAAI8lB,EAAG9lB,EACdC,EAAGwf,EAAIxf,EAAI6lB,EAAG7lB,GAElBvJ,KAAK+rB,MAAM,iBAAkB,CAAEzO,IAAKxmB,EAAEwmB,IAAK9V,OAAQxH,KAAKwsD,YACxDxsD,KAAK2sD,OAAOrzD,SAAQ,SAACkO,GACjBA,EAAOukB,MAAM,iBAAkB,CAAEzO,IAAKxmB,EAAEwmB,IAAK9V,UACjD,GACJ,GAAC,CAAAxG,IAAA,mBAAAtC,MACD,SAAiB5H,GACb,IAAIwS,EAAGC,EAAGylD,EACNC,EAAajvD,KAAK47B,QAAQ,IAAM57B,KAAKwtD,mBACrCvgC,EAAQgiC,EAAWnmC,WACvBmE,EAAM8Q,qBAAqBjnC,GAC3B,IAAMo4D,EAAKjiC,EAAMhE,qBACb0G,EAAa,CACbrmB,EAAG4lD,EAAG5lD,EAAItJ,KAAK+uD,kBAAkBzlD,EACjCC,EAAG2lD,EAAG3lD,EAAIvJ,KAAK+uD,kBAAkBxlD,GAE/B4lD,EAASF,EAAW5/B,sBACtBrvB,KAAKovD,wBACLz/B,EAAa3vB,KAAKovD,qBAALpvD,CAA2BmvD,EAAQx/B,EAAY74B,IAEhEm4D,EAAWl/B,oBAAoBJ,GAC/B,IAAM0/B,EAASJ,EAAW5/B,sBAC1B,GAAI8/B,EAAO7lD,IAAM+lD,EAAO/lD,GAAK6lD,EAAO5lD,IAAM8lD,EAAO9lD,EAGjD,GAA+B,YAA3BvJ,KAAKwtD,kBAAT,CAiBA,IACI8B,EADAC,EAAgBvvD,KAAKuvD,gBAGrBD,EADkB,aAAlBC,EACiBvvD,KAAKwvD,cAAgB14D,EAAE24D,SAEjB,SAAlBF,EACYvvD,KAAKwvD,YAGLxvD,KAAKwvD,aAAe14D,EAAE24D,SAE3C,IAAIC,EAAkB1vD,KAAK0vD,mBAAqB54D,EAAE64D,OAClD,GAA+B,aAA3B3vD,KAAKwtD,mBACL,GAAI8B,EAAgB,CAChB,IAAIM,EAAeF,EACb,CACEpmD,EAAGtJ,KAAK6Z,QAAU,EAClBtQ,EAAGvJ,KAAK8Z,SAAW,GAErB,CACExQ,EAAGtJ,KAAK47B,QAAQ,iBAAiBtyB,IACjCC,EAAGvJ,KAAK47B,QAAQ,iBAAiBryB,KAEzCylD,EAAgBxsD,KAAK6I,KAAK7I,KAAK2rC,IAAIyhB,EAAatmD,EAAI2lD,EAAW3lD,IAAK,GAChE9G,KAAK2rC,IAAIyhB,EAAarmD,EAAI0lD,EAAW1lD,IAAK,IAC9C,IAAIsmD,EAAW7vD,KAAK47B,QAAQ,aAAatyB,IAAMsmD,EAAatmD,GAAK,EAAI,EACjEwmD,EAAW9vD,KAAK47B,QAAQ,aAAaryB,IAAMqmD,EAAarmD,GAAK,EAAI,EACrED,EAAI0lD,EAAgBhvD,KAAK4J,IAAMimD,EAC/BtmD,EAAIylD,EAAgBhvD,KAAK6J,IAAMimD,EAC/B9vD,KAAK47B,QAAQ,aAAatyB,EAAEsmD,EAAatmD,EAAIA,GAC7CtJ,KAAK47B,QAAQ,aAAaryB,EAAEqmD,EAAarmD,EAAIA,EACjD,OAEC,GAA+B,eAA3BvJ,KAAKwtD,kBACVxtD,KAAK47B,QAAQ,aAAaryB,EAAE0lD,EAAW1lD,UAEtC,GAA+B,cAA3BvJ,KAAKwtD,kBAAmC,CAC7C,GAAI8B,EAAgB,CACZM,EAAeF,EACb,CACEpmD,EAAGtJ,KAAK6Z,QAAU,EAClBtQ,EAAGvJ,KAAK8Z,SAAW,GAErB,CACExQ,EAAGtJ,KAAK47B,QAAQ,gBAAgBtyB,IAChCC,EAAGvJ,KAAK47B,QAAQ,gBAAgBryB,KAExCylD,EAAgBxsD,KAAK6I,KAAK7I,KAAK2rC,IAAI8gB,EAAW3lD,IAAMsmD,EAAatmD,EAAG,GAChE9G,KAAK2rC,IAAIyhB,EAAarmD,EAAI0lD,EAAW1lD,IAAK,IAC1CsmD,EAAW7vD,KAAK47B,QAAQ,cAActyB,IAAMsmD,EAAatmD,GAAK,EAAI,EAClEwmD,EAAW9vD,KAAK47B,QAAQ,cAAcryB,IAAMqmD,EAAarmD,GAAK,EAAI,EACtED,EAAI0lD,EAAgBhvD,KAAK4J,IAAMimD,EAC/BtmD,EAAIylD,EAAgBhvD,KAAK6J,IAAMimD,EAC/B9vD,KAAK47B,QAAQ,cAActyB,EAAEsmD,EAAatmD,EAAIA,GAC9CtJ,KAAK47B,QAAQ,cAAcryB,EAAEqmD,EAAarmD,EAAIA,EAClD,CACA,IAAIwf,EAAMkmC,EAAWr0B,WACrB56B,KAAK47B,QAAQ,aAAaryB,EAAEwf,EAAIxf,GAChCvJ,KAAK47B,QAAQ,iBAAiBtyB,EAAEyf,EAAIzf,EACxC,MACK,GAA+B,gBAA3BtJ,KAAKwtD,kBACVxtD,KAAK47B,QAAQ,aAAatyB,EAAE2lD,EAAW3lD,UAEtC,GAA+B,iBAA3BtJ,KAAKwtD,kBACVxtD,KAAK47B,QAAQ,iBAAiBtyB,EAAE2lD,EAAW3lD,UAE1C,GAA+B,gBAA3BtJ,KAAKwtD,kBAAqC,CAC/C,GAAI8B,EAAgB,CACZM,EAAeF,EACb,CACEpmD,EAAGtJ,KAAK6Z,QAAU,EAClBtQ,EAAGvJ,KAAK8Z,SAAW,GAErB,CACExQ,EAAGtJ,KAAK47B,QAAQ,cAActyB,IAC9BC,EAAGvJ,KAAK47B,QAAQ,cAAcryB,KAEtCylD,EAAgBxsD,KAAK6I,KAAK7I,KAAK2rC,IAAIyhB,EAAatmD,EAAI2lD,EAAW3lD,IAAK,GAChE9G,KAAK2rC,IAAI8gB,EAAW1lD,IAAMqmD,EAAarmD,EAAG,IAC1CsmD,EAAWD,EAAatmD,EAAI2lD,EAAW3lD,KAAO,EAAI,EAClDwmD,EAAWb,EAAW1lD,IAAMqmD,EAAarmD,GAAK,EAAI,EACtDD,EAAI0lD,EAAgBhvD,KAAK4J,IAAMimD,EAC/BtmD,EAAIylD,EAAgBhvD,KAAK6J,IAAMimD,EAC/Bb,EAAW3lD,EAAEsmD,EAAatmD,EAAIA,GAC9B2lD,EAAW1lD,EAAEqmD,EAAarmD,EAAIA,EAClC,CACAwf,EAAMkmC,EAAWr0B,WACjB56B,KAAK47B,QAAQ,aAAatyB,EAAEyf,EAAIzf,GAChCtJ,KAAK47B,QAAQ,iBAAiBryB,EAAEwf,EAAIxf,EACxC,MACK,GAA+B,kBAA3BvJ,KAAKwtD,kBACVxtD,KAAK47B,QAAQ,iBAAiBryB,EAAE0lD,EAAW1lD,UAE1C,GAA+B,iBAA3BvJ,KAAKwtD,mBACV,GAAI8B,EAAgB,CACZM,EAAeF,EACb,CACEpmD,EAAGtJ,KAAK6Z,QAAU,EAClBtQ,EAAGvJ,KAAK8Z,SAAW,GAErB,CACExQ,EAAGtJ,KAAK47B,QAAQ,aAAatyB,IAC7BC,EAAGvJ,KAAK47B,QAAQ,aAAaryB,KAErCylD,EAAgBxsD,KAAK6I,KAAK7I,KAAK2rC,IAAI8gB,EAAW3lD,IAAMsmD,EAAatmD,EAAG,GAChE9G,KAAK2rC,IAAI8gB,EAAW1lD,IAAMqmD,EAAarmD,EAAG,IAC1CsmD,EAAW7vD,KAAK47B,QAAQ,iBAAiBtyB,IAAMsmD,EAAatmD,GAAK,EAAI,EACrEwmD,EAAW9vD,KAAK47B,QAAQ,iBAAiBryB,IAAMqmD,EAAarmD,GAAK,EAAI,EACzED,EAAI0lD,EAAgBhvD,KAAK4J,IAAMimD,EAC/BtmD,EAAIylD,EAAgBhvD,KAAK6J,IAAMimD,EAC/B9vD,KAAK47B,QAAQ,iBAAiBtyB,EAAEsmD,EAAatmD,EAAIA,GACjDtJ,KAAK47B,QAAQ,iBAAiBryB,EAAEqmD,EAAarmD,EAAIA,EACrD,OAGAqR,QAAQrZ,MAAM,IAAIoZ,MAAM,iDACpB3a,KAAKwtD,oBAGb,GADIkC,EAAkB1vD,KAAK0vD,mBAAqB54D,EAAE64D,OAC7B,CACjB,IAAIzxC,EAAUle,KAAK47B,QAAQ,aACvBvd,EAAcre,KAAK47B,QAAQ,iBAC3Bm0B,EAAa7xC,EAAQ5U,IACrB0mD,EAAa9xC,EAAQ3U,IACrB0mD,EAAgBjwD,KAAK6lB,WAAaxH,EAAY/U,IAC9C4mD,EAAgBlwD,KAAK8lB,YAAczH,EAAY9U,IACnD8U,EAAY8xC,KAAK,CACb7mD,GAAIymD,EACJxmD,GAAIymD,IAER9xC,EAAQiyC,KAAK,CACT7mD,EAAG2mD,EACH1mD,EAAG2mD,GAEX,CACA,IAAIpC,EAAS9tD,KAAK47B,QAAQ,aAAavM,sBACvC/lB,EAAIwkD,EAAOxkD,EACXC,EAAIukD,EAAOvkD,EACX,IAAIsQ,EAAQ7Z,KAAK47B,QAAQ,iBAAiBtyB,IAAMtJ,KAAK47B,QAAQ,aAAatyB,IACtEwQ,EAAS9Z,KAAK47B,QAAQ,iBAAiBryB,IAAMvJ,KAAK47B,QAAQ,aAAaryB,IAC3EvJ,KAAKowD,cAAc,CACf9mD,EAAGA,EACHC,EAAGA,EACHsQ,MAAOA,EACPC,OAAQA,EACR/O,SAAUlF,EAASxD,MAAMgB,SAASrD,KAAK+K,aACxCjU,EAnJH,KAhBA,CACI,IAAImJ,EAAQD,KAAKguD,eACjB1kD,EAAI2lD,EAAW3lD,IAAMrJ,EAAM4Z,MAAQ,EACnCtQ,GAAK0lD,EAAW1lD,IAAMtJ,EAAM6Z,OAAS,EACrC,IAAIhP,EAAQtI,KAAKuiD,OAAOx7C,EAAGD,GAAK9G,KAAKC,GAAK,EACtCxC,EAAM6Z,OAAS,IACfhP,GAAStI,KAAKC,IAElB,IACM4tD,EADYxqD,EAASxD,MAAMgB,SAASrD,KAAK+K,YACbD,EAC5BwlD,EAAMzqD,EAASxD,MAAMgB,SAASrD,KAAKuwD,yBACnCC,EA/WlB,SAAiBC,EAAOC,EAAgBJ,GAEpC,IADA,IAAIK,EAAUD,EACLn5D,EAAI,EAAGA,EAAIk5D,EAAMj5D,OAAQD,IAAK,CACnC,IAAM+L,EAAQuC,EAASxD,MAAMgB,SAASotD,EAAMl5D,IACtCq5D,EAAUpuD,KAAKm0B,IAAIrzB,EAAQotD,IAA6B,EAAVluD,KAAKC,IAC7CD,KAAK8b,IAAIsyC,EAAmB,EAAVpuD,KAAKC,GAASmuD,GAClCN,IACNK,EAAUrtD,EAElB,CACA,OAAOqtD,CACX,CAoW+BE,CAAQ7wD,KAAK8wD,gBAAiBT,EAAaC,GAExDh0B,EAAQ0vB,EAAmB/rD,EADpBuwD,EAAavwD,EAAM8K,UAEhC/K,KAAKowD,cAAc9zB,EAAOxlC,EAE9B,CAoJJ,GAAC,CAAAkK,IAAA,iBAAAtC,MACD,SAAe5H,GACXkJ,KAAK+wD,cAAcj6D,EACvB,GAAC,CAAAkK,IAAA,uBAAAtC,MACD,WACI,OAAOsB,KAAKosB,cAChB,GAAC,CAAAprB,IAAA,gBAAAtC,MACD,SAAc5H,GACV,GAAIkJ,KAAKosD,cAAe,CACpBpsD,KAAKosD,eAAgB,EACC,qBAAXzpD,SACPA,OAAOquD,oBAAoB,YAAahxD,KAAKssD,kBAC7C3pD,OAAOquD,oBAAoB,YAAahxD,KAAKssD,kBAC7C3pD,OAAOquD,oBAAoB,UAAWhxD,KAAKusD,gBAAgB,GAC3D5pD,OAAOquD,oBAAoB,WAAYhxD,KAAKusD,gBAAgB,IAEhE,IAAI1nD,EAAO7E,KAAKwsD,UAChBxsD,KAAK+rB,MAAM,eAAgB,CAAEzO,IAAKxmB,EAAG0Q,OAAQ3C,IACzCA,GACA7E,KAAK2sD,OAAOrzD,SAAQ,SAACkO,GACjBA,EAAOukB,MAAM,eAAgB,CAAEzO,IAAKxmB,EAAG0Q,UAC3C,IAEJxH,KAAKwtD,kBAAoB,IAC7B,CACJ,GAAC,CAAAxsD,IAAA,gBAAAtC,MACD,SAAcuyD,EAAU3zC,GAAK,IAAA4zC,EAAA,KACrBC,EAAWnxD,KAAKguD,eAEpB,GAAIlvD,EAAOe,KAAKib,SAASm2C,EAASp3C,MAAyB,GAAjB7Z,KAAKy6B,UAD/B,KAEZz6B,KAAKkhD,cAGT,GAAIpiD,EAAOe,KAAKib,SAASm2C,EAASn3C,OAA0B,GAAjB9Z,KAAKy6B,UALhC,KAMZz6B,KAAKkhD,aADT,CAIA,IAAMkQ,EAAqBpxD,KAAKqxD,cAC5Bt6D,EAAI,IAAI+H,EAAOkK,UAEnB,GADAjS,EAAE41B,OAAO9mB,EAASxD,MAAMgB,SAASrD,KAAK+K,aAClC/K,KAAKwtD,mBACLyD,EAASp3C,MAAQ,GACjB7Z,KAAKwtD,kBAAkBn2D,QAAQ,SAAW,EAAG,CAC7C,IAAMwB,EAAS9B,EAAEsS,MAAM,CACnBC,EAAqB,GAAjBtJ,KAAKy6B,UACTlxB,EAAG,IAQP,GANA0nD,EAAS3nD,GAAKzQ,EAAOyQ,EACrB2nD,EAAS1nD,GAAK1Q,EAAO0Q,EACrB0nD,EAASp3C,OAA0B,EAAjB7Z,KAAKy6B,UACvBz6B,KAAKwtD,kBAAoBxtD,KAAKwtD,kBAAkBl2C,QAAQ,OAAQ,SAChEtX,KAAK+uD,kBAAkBzlD,GAAKzQ,EAAOyQ,EACnCtJ,KAAK+uD,kBAAkBxlD,GAAK1Q,EAAO0Q,GAC9B6nD,EAED,YADApxD,KAAKkhD,QAGb,MACK,GAAIlhD,KAAKwtD,mBACVyD,EAASp3C,MAAQ,GACjB7Z,KAAKwtD,kBAAkBn2D,QAAQ,UAAY,EAAG,CAC9C,IAAMwB,EAAS9B,EAAEsS,MAAM,CACnBC,EAAoB,EAAjBtJ,KAAKy6B,UACRlxB,EAAG,IAMP,GAJAvJ,KAAKwtD,kBAAoBxtD,KAAKwtD,kBAAkBl2C,QAAQ,QAAS,QACjEtX,KAAK+uD,kBAAkBzlD,GAAKzQ,EAAOyQ,EACnCtJ,KAAK+uD,kBAAkBxlD,GAAK1Q,EAAO0Q,EACnC0nD,EAASp3C,OAA0B,EAAjB7Z,KAAKy6B,WAClB22B,EAED,YADApxD,KAAKkhD,QAGb,CACA,GAAIlhD,KAAKwtD,mBACLyD,EAASn3C,OAAS,GAClB9Z,KAAKwtD,kBAAkBn2D,QAAQ,QAAU,EAAG,CAC5C,IAAMwB,EAAS9B,EAAEsS,MAAM,CACnBC,EAAG,EACHC,EAAqB,GAAjBvJ,KAAKy6B,YAQb,GANAw2B,EAAS3nD,GAAKzQ,EAAOyQ,EACrB2nD,EAAS1nD,GAAK1Q,EAAO0Q,EACrBvJ,KAAKwtD,kBAAoBxtD,KAAKwtD,kBAAkBl2C,QAAQ,MAAO,UAC/DtX,KAAK+uD,kBAAkBzlD,GAAKzQ,EAAOyQ,EACnCtJ,KAAK+uD,kBAAkBxlD,GAAK1Q,EAAO0Q,EACnC0nD,EAASn3C,QAA2B,EAAjB9Z,KAAKy6B,WACnB22B,EAED,YADApxD,KAAKkhD,QAGb,MACK,GAAIlhD,KAAKwtD,mBACVyD,EAASn3C,OAAS,GAClB9Z,KAAKwtD,kBAAkBn2D,QAAQ,WAAa,EAAG,CAC/C,IAAMwB,EAAS9B,EAAEsS,MAAM,CACnBC,EAAG,EACHC,EAAoB,EAAjBvJ,KAAKy6B,YAMZ,GAJAz6B,KAAKwtD,kBAAoBxtD,KAAKwtD,kBAAkBl2C,QAAQ,SAAU,OAClEtX,KAAK+uD,kBAAkBzlD,GAAKzQ,EAAOyQ,EACnCtJ,KAAK+uD,kBAAkBxlD,GAAK1Q,EAAO0Q,EACnC0nD,EAASn3C,QAA2B,EAAjB9Z,KAAKy6B,WACnB22B,EAED,YADApxD,KAAKkhD,QAGb,CACA,GAAIlhD,KAAKsxD,eAAgB,CACrB,IAAMxhC,EAAU9vB,KAAKsxD,cAALtxD,CAAoBmxD,EAAUF,GAC1CnhC,EACAmhC,EAAWnhC,EAGXhxB,EAAOe,KAAKsG,KAAK,yEAEzB,CACA,IAAMorD,EAAW,IACXC,EAAQ,IAAI1yD,EAAOkK,UACzBwoD,EAAM9tC,UAAUytC,EAAS7nD,EAAG6nD,EAAS5nD,GACrCioD,EAAM7kC,OAAOwkC,EAASpmD,UACtBymD,EAAM3kC,MAAMskC,EAASt3C,MAAQ03C,EAAUJ,EAASr3C,OAASy3C,GACzD,IAAME,EAAQ,IAAI3yD,EAAOkK,UACzByoD,EAAM/tC,UAAUutC,EAAS3nD,EAAG2nD,EAAS1nD,GACrCkoD,EAAM9kC,OAAOskC,EAASlmD,UACtB0mD,EAAM5kC,MAAMokC,EAASp3C,MAAQ03C,EAAUN,EAASn3C,OAASy3C,GACzD,IAAMzmD,EAAQ2mD,EAAMtlC,SAASqlC,EAAMpoC,UACnCppB,KAAK2sD,OAAOrzD,SAAQ,SAACuL,GACjB,IAAI4nB,EACEilC,EAAkB7sD,EAAK2d,YAAYiC,uBACnCktC,EAAiB9sD,EAAKunB,eAAejD,OAC3CwoC,EAAejuC,UAAU7e,EAAKolB,UAAWplB,EAAKqlB,WAC9C,IAAM0nC,EAAoB,IAAI9yD,EAAOkK,UACrC4oD,EACKzlC,SAASulC,EAAgBvoC,OAAOC,UAChC+C,SAASrhB,GACTqhB,SAASulC,GACTvlC,SAASwlC,GACd,IAAM1xD,EAAQ2xD,EAAkBrlC,YAChC1nB,EAAKgc,SAAS5gB,GACdixD,EAAKnlC,MAAM,YAAa,CAAEzO,IAAKA,EAAK9V,OAAQ3C,IAC5CA,EAAKknB,MAAM,YAAa,CAAEzO,IAAKA,EAAK9V,OAAQ3C,IACjB,QAA1B4nB,EAAK5nB,EAAKmjB,kBAA+B,IAAPyE,GAAyBA,EAAGgC,WACnE,IACAzuB,KAAK+K,SAASjM,EAAOe,KAAK0L,aAAa0lD,EAASlmD,WAChD/K,KAAKitD,uBACLjtD,KAAKkhD,SACLlhD,KAAKgoB,WAAWyG,WA/GhB,CAgHJ,GAAC,CAAAztB,IAAA,cAAAtC,MACD,WACIsB,KAAKitD,uBACLjtD,KAAKkhD,QACT,GAAC,CAAAlgD,IAAA,oBAAAtC,MACD,SAAkBoX,EAAU7V,GACTD,KAAK47B,QAAQ9lB,GACrB+K,SAAS5gB,EACpB,GAAC,CAAAe,IAAA,SAAAtC,MACD,WAAS,IACD+tB,EADColC,EAAA,KAED5xD,EAAQD,KAAKguD,eACjBhuD,KAAK+K,SAASjM,EAAOe,KAAK0L,aAAatL,EAAM8K,WAC7C,IAAI8O,EAAQ5Z,EAAM4Z,MACdC,EAAS7Z,EAAM6Z,OACfg4C,EAAiB9xD,KAAK8xD,iBACtBC,EAAgB/xD,KAAK+xD,gBACrBt3B,EAAUz6B,KAAKy6B,UACfu3B,EAAahyD,KAAKgyD,aAChBC,EAAUjyD,KAAKq8B,KAAK,YAC1B41B,EAAQ34D,SAAQ,SAACuL,GACbA,EAAKgc,SAAS,CACVhH,MAAOm4C,EACPl4C,OAAQk4C,EACR/nC,QAAS+nC,EAAa,EACtB9nC,QAAS8nC,EAAa,EACtB/tC,OAAQ4tC,EAAKK,eACb58B,YAAau8B,EAAKM,oBAClB/8B,KAAMy8B,EAAKO,aACXn0C,aAAc4zC,EAAKQ,sBAE3B,IACAryD,KAAKsyD,kBAAkB,YAAa,CAChChpD,EAAG,EACHC,EAAG,EACH0gB,QAAS+nC,EAAa,EAAIv3B,EAC1BvQ,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,aAAe,IAEpE2I,KAAKsyD,kBAAkB,cAAe,CAClChpD,EAAGuQ,EAAQ,EACXtQ,EAAG,EACH2gB,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,eAAiB,IAEtE2I,KAAKsyD,kBAAkB,aAAc,CACjChpD,EAAGuQ,EACHtQ,EAAG,EACH0gB,QAAS+nC,EAAa,EAAIv3B,EAC1BvQ,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,cAAgB,IAErE2I,KAAKsyD,kBAAkB,eAAgB,CACnChpD,EAAG,EACHC,EAAGuQ,EAAS,EACZmQ,QAAS+nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,gBAAkB,IAEvE2I,KAAKsyD,kBAAkB,gBAAiB,CACpChpD,EAAGuQ,EACHtQ,EAAGuQ,EAAS,EACZmQ,QAAS+nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,iBAAmB,IAExE2I,KAAKsyD,kBAAkB,eAAgB,CACnChpD,EAAG,EACHC,EAAGuQ,EACHmQ,QAAS+nC,EAAa,EAAIv3B,EAC1BvQ,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,gBAAkB,IAEvE2I,KAAKsyD,kBAAkB,iBAAkB,CACrChpD,EAAGuQ,EAAQ,EACXtQ,EAAGuQ,EACHoQ,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,kBAAoB,IAEzE2I,KAAKsyD,kBAAkB,gBAAiB,CACpChpD,EAAGuQ,EACHtQ,EAAGuQ,EACHmQ,QAAS+nC,EAAa,EAAIv3B,EAC1BvQ,QAAS8nC,EAAa,EAAIv3B,EAC1B5S,QAASkqC,GAAiBD,EAAez6D,QAAQ,iBAAmB,IAExE2I,KAAKsyD,kBAAkB,WAAY,CAC/BhpD,EAAGuQ,EAAQ,EACXtQ,GAAIvJ,KAAK4uD,qBAAuB9vD,EAAOe,KAAKoW,MAAM6D,GAAU2gB,EAC5D5S,QAAS7nB,KAAK2uD,kBAElB3uD,KAAKsyD,kBAAkB,QAAS,CAC5Bz4C,MAAOA,EACPC,OAAQA,EACR+N,QAAS7nB,KAAKuyD,gBACdtuC,OAAQjkB,KAAKwyD,eACbl9B,YAAat1B,KAAKyyD,oBAClB1nB,KAAM/qC,KAAK0yD,aACXppD,EAAG,EACHC,EAAG,IAEP,IAAMopD,EAAY3yD,KAAK4yD,kBACnBD,GACAV,EAAQ34D,SAAQ,SAACuL,GACb8tD,EAAU9tD,EACd,IAEuB,QAA1B4nB,EAAKzsB,KAAKgoB,kBAA+B,IAAPyE,GAAyBA,EAAGgC,WACnE,GAAC,CAAAztB,IAAA,iBAAAtC,MACD,WACI,OAAOsB,KAAKosD,aAChB,GAAC,CAAAprD,IAAA,gBAAAtC,MACD,WACI,GAAIsB,KAAKosD,cAAe,CACpBpsD,KAAK+wD,gBACL,IAAI9B,EAAajvD,KAAK47B,QAAQ,IAAM57B,KAAKwtD,mBACrCyB,GACAA,EAAWnoC,UAEnB,CACJ,GAAC,CAAA9lB,IAAA,UAAAtC,MACD,WAOI,OANIsB,KAAK8oB,YAAc9oB,KAAKwuD,eACxBxuD,KAAK8oB,WAAWojB,UAAYlsC,KAAK8oB,WAAWojB,QAAQ/yC,MAAMk1D,OAAS,IAEvE1V,EAAQta,MAAMnnC,UAAUy+B,QAAQv+B,KAAK4I,MACrCA,KAAK4sD,SACL5sD,KAAK+wD,gBACE/wD,IACX,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAAOkzB,EAAOjT,KAAKznB,UAAUg0B,SAAS9zB,KAAK4I,KAC/C,GAAC,CAAAgB,IAAA,QAAAtC,MACD,SAAM8W,GAEF,OADWoc,EAAOjT,KAAKznB,UAAUklC,MAAMhlC,KAAK4I,KAAMwV,EAEtD,GAAC,CAAAxU,IAAA,gBAAAtC,MACD,WACI,OAAIsB,KAAKuoB,QAAQ/wB,OAAS,EACtB+hC,EAAAJ,EAAA+d,EAAAhgD,WAAA,sBAAAE,KAAA,MAGO,CAAEkS,EAAG,EAAGC,EAAG,EAAGsQ,MAAO,EAAGC,OAAQ,EAE/C,KAACo9B,CAAA,CA9xBY,CAASyB,EAAQta,OAgyBlCz/B,EAAQs4C,YAAcA,EAiBtBA,EAAYhgD,UAAU8B,UAAY,eAClC,EAAI64B,EAASzvB,eAAe80C,GAC5Bt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,iBAAkB2U,GAlBjE,SAAyB9rD,GAcrB,OAbMA,aAAezC,OACjBwB,EAAOe,KAAKsG,KAAK,2CAEjBpG,aAAezC,OACfyC,EAAIzG,SAAQ,SAAU8nB,IACmB,IAAjCyqC,EAAcx0D,QAAQ+pB,IACtBtiB,EAAOe,KAAKsG,KAAK,wBACbib,EACA,0BACAyqC,EAAchsC,KAAK,MAE/B,IAEG9f,GAAO,EAClB,IAIA6e,EAAU/f,QAAQM,gBAAgB+3C,EAAa,eAAe,GAAM,EAAIl4C,EAAamG,wBACrFyZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,iBAAiB,GAChEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,aAAc,IAAI,EAAIl4C,EAAa0G,uBAClFkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,iBAAiB,GAChEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,gBAAiB,IAChEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,qBAAsB,IAAI,EAAIl4C,EAAa0G,uBAC1FkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,wBAAyB,GAAG,EAAIl4C,EAAa0G,uBAC5FkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,iBAAiB,GAChEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,eAAgB,oBAC/Dt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,oBAAqB,GAAG,EAAIl4C,EAAa0G,uBACxFkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,aAAc,SAC7Dt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,qBAAsB,GAAG,EAAIl4C,EAAa0G,uBACzFkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,eAAgB,oBAC/Dt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,oBAAqB,GAAG,EAAIl4C,EAAa0G,uBACxFkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,cAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,aAAa,GAC5Dt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,gBAAiB,WAChEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,mBAAmB,GAClEt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,gBAAgB,GAC/Dt4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,UAAW,GAAG,EAAIl4C,EAAa0G,uBAC9EkZ,EAAU/f,QAAQM,gBAAgB+3C,EAAa,QAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,SAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,gBAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,uBAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,mBAC/Ct4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,2BAA2B,GAC1Et4B,EAAU/f,QAAQM,gBAAgB+3C,EAAa,yBAAyB,GACxEt4B,EAAU/f,QAAQ4C,WAAWy1C,EAAa,CACtC2b,YAAa,gBACbC,oBAAqB,qBACrBC,gBAAiB,kB,mCC79BR,IAAAjqD,EAAA/J,EAAA,KAAA8J,QAAAE,EAAAhK,EAAA,KAAA8J,QAAA0oB,EAAAxyB,EAAA,KAAA8J,QAAA2oB,EAAAzyB,EAAA,KAAA8J,QACb5R,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQu4C,WAAQ,EAChB,IAAMv4B,EAAY7f,EAAQ,KACpBshC,EAAUthC,EAAQ,KAClB8G,EAAW9G,EAAQ,KACnBC,EAAeD,EAAQ,KACvB8yB,EAAW9yB,EAAQ,KACnBo4C,EAAK,SAAA5W,GAAAhP,EAAA4lB,EAAA5W,GAAA,IAAAjO,EAAAd,EAAA2lB,GAAA,SAAAA,IAAA,OAAAruC,EAAA,KAAAquC,GAAA7kB,EAAArwB,MAAA,KAAAZ,UAAA,CAmBN,OAnBM0H,EAAAouC,EAAA,EAAAn2C,IAAA,aAAAtC,MACP,SAAWsf,GACPA,EAAQ8F,YACR9F,EAAQS,IAAI,EAAG,EAAGze,KAAKunD,SAAU,EAAG1hD,EAASxD,MAAMgB,SAASrD,KAAKsD,SAAUtD,KAAK+jD,aAChF/lC,EAAQQ,OAAO,EAAG,GAClBR,EAAQ+F,YACR/F,EAAQwjB,gBAAgBxhC,KAC5B,GAAC,CAAAgB,IAAA,WAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,YAAAtC,MACD,WACI,OAAuB,EAAhBsB,KAAKunD,QAChB,GAAC,CAAAvmD,IAAA,WAAAtC,MACD,SAASmb,GACL7Z,KAAKunD,OAAO1tC,EAAQ,EACxB,GAAC,CAAA7Y,IAAA,YAAAtC,MACD,SAAUob,GACN9Z,KAAKunD,OAAOztC,EAAS,EACzB,KAACq9B,CAAA,CAnBM,CAAS9W,EAAQ5O,OAqB5B7yB,EAAQu4C,MAAQA,EAChBA,EAAMjgD,UAAU8B,UAAY,QAC5Bm+C,EAAMjgD,UAAUg/B,WAAY,EAC5BihB,EAAMjgD,UAAUg6B,oBAAsB,CAAC,WACvC,EAAIW,EAASzvB,eAAe+0C,GAC5Bv4B,EAAU/f,QAAQM,gBAAgBg4C,EAAO,SAAU,GAAG,EAAIn4C,EAAa0G,uBACvEkZ,EAAU/f,QAAQM,gBAAgBg4C,EAAO,QAAS,GAAG,EAAIn4C,EAAa0G,uBACtEkZ,EAAU/f,QAAQM,gBAAgBg4C,EAAO,aAAa,GACtDv4B,EAAU/f,QAAQ4C,WAAW01C,EAAO,CAChC5zC,SAAU,QACVyvD,YAAa,WACbC,YAAa,Y,mCCvCjBh8D,OAAO0H,eAAeC,EAAS,aAAc,CAAEF,OAAO,IACtDE,EAAQy4C,UAAO,EACf,IAAMz4B,EAAY7f,EAAQ,KACpB6yB,EAAS7yB,EAAQ,KACjBC,EAAeD,EAAQ,KAC7B,SAASm0D,IACLlzD,KAAKoL,EAAI,EACTpL,KAAKrC,EAAI,EACTqC,KAAK6K,EAAI,EACT7K,KAAK4K,EAAI,EACT5K,KAAKo6C,KAAO,IAChB,CACA,IAAI+Y,EAAY,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEAC,EAAY,CACZ,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IA8KJx0D,EAAQy4C,KANK,SAAc/xB,GACvB,IAAIiiC,EAAS/kD,KAAKyD,MAAMjG,KAAK62B,cACzB0wB,EAAS,GAxKjB,SAA6BjiC,EAAWiiC,GACpC,IACIj+C,EAAGC,EAAGhS,EAAGP,EAAGyuC,EAAI4tB,EAAIC,EAAIC,EAAOC,EAAOC,EAAOC,EAAOC,EAAWC,EAAWC,EAAWC,EAAWC,EAAUC,EAAUC,EAAUC,EAAUp3C,EAAIq3C,EAAIC,EAAIC,EAAIC,EADxJC,EAASjvC,EAAUsL,KAAM/W,EAAQyL,EAAUzL,MAAOC,EAASwL,EAAUxL,OAErE06C,EAAMjN,EAASA,EAAS,EAAGkN,EAAc56C,EAAQ,EAAG66C,EAAe56C,EAAS,EAAG66C,EAAcpN,EAAS,EAAGqN,EAAaD,GAAeA,EAAc,GAAM,EAAGE,EAAa,IAAI3B,EAAa4B,EAAW,KAAMC,EAAQF,EAAYG,EAAU,KAAMC,EAAW,KAAMC,EAAU/B,EAAU5L,GAAS4N,EAAU/B,EAAU7L,GACrT,IAAKhwD,EAAI,EAAG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","file":"static/js/6.48e81a46.chunk.js","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport RowContext from './RowContext';\nfunction parseFlex(flex) {\n  if (typeof flex === 'number') {\n    return \"\".concat(flex, \" \").concat(flex, \" auto\");\n  }\n  if (/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(flex)) {\n    return \"0 0 \".concat(flex);\n  }\n  return flex;\n}\nvar sizes = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl'];\nvar Col = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _classNames;\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var _React$useContext2 = React.useContext(RowContext),\n    gutter = _React$useContext2.gutter,\n    wrap = _React$useContext2.wrap,\n    supportFlexGap = _React$useContext2.supportFlexGap;\n  var customizePrefixCls = props.prefixCls,\n    span = props.span,\n    order = props.order,\n    offset = props.offset,\n    push = props.push,\n    pull = props.pull,\n    className = props.className,\n    children = props.children,\n    flex = props.flex,\n    style = props.style,\n    others = __rest(props, [\"prefixCls\", \"span\", \"order\", \"offset\", \"push\", \"pull\", \"className\", \"children\", \"flex\", \"style\"]);\n  var prefixCls = getPrefixCls('col', customizePrefixCls);\n  var sizeClassObj = {};\n  sizes.forEach(function (size) {\n    var _extends2;\n    var sizeProps = {};\n    var propSize = props[size];\n    if (typeof propSize === 'number') {\n      sizeProps.span = propSize;\n    } else if (_typeof(propSize) === 'object') {\n      sizeProps = propSize || {};\n    }\n    delete others[size];\n    sizeClassObj = _extends(_extends({}, sizeClassObj), (_extends2 = {}, _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-\").concat(sizeProps.span), sizeProps.span !== undefined), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-order-\").concat(sizeProps.order), sizeProps.order || sizeProps.order === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-offset-\").concat(sizeProps.offset), sizeProps.offset || sizeProps.offset === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-push-\").concat(sizeProps.push), sizeProps.push || sizeProps.push === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-pull-\").concat(sizeProps.pull), sizeProps.pull || sizeProps.pull === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _extends2));\n  });\n  var classes = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(span), span !== undefined), _defineProperty(_classNames, \"\".concat(prefixCls, \"-order-\").concat(order), order), _defineProperty(_classNames, \"\".concat(prefixCls, \"-offset-\").concat(offset), offset), _defineProperty(_classNames, \"\".concat(prefixCls, \"-push-\").concat(push), push), _defineProperty(_classNames, \"\".concat(prefixCls, \"-pull-\").concat(pull), pull), _classNames), className, sizeClassObj);\n  var mergedStyle = {};\n  // Horizontal gutter use padding\n  if (gutter && gutter[0] > 0) {\n    var horizontalGutter = gutter[0] / 2;\n    mergedStyle.paddingLeft = horizontalGutter;\n    mergedStyle.paddingRight = horizontalGutter;\n  }\n  // Vertical gutter use padding when gap not support\n  if (gutter && gutter[1] > 0 && !supportFlexGap) {\n    var verticalGutter = gutter[1] / 2;\n    mergedStyle.paddingTop = verticalGutter;\n    mergedStyle.paddingBottom = verticalGutter;\n  }\n  if (flex) {\n    mergedStyle.flex = parseFlex(flex);\n    // Hack for Firefox to avoid size issue\n    // https://github.com/ant-design/ant-design/pull/20023#issuecomment-564389553\n    if (wrap === false && !mergedStyle.minWidth) {\n      mergedStyle.minWidth = 0;\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, others, {\n    style: _extends(_extends({}, mergedStyle), style),\n    className: classes,\n    ref: ref\n  }), children);\n});\nif (process.env.NODE_ENV !== 'production') {\n  Col.displayName = 'Col';\n}\nexport default Col;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport useFlexGapSupport from '../_util/hooks/useFlexGapSupport';\nimport ResponsiveObserve, { responsiveArray } from '../_util/responsiveObserve';\nimport { tuple } from '../_util/type';\nimport RowContext from './RowContext';\nvar RowAligns = tuple('top', 'middle', 'bottom', 'stretch');\nvar RowJustify = tuple('start', 'end', 'center', 'space-around', 'space-between', 'space-evenly');\nfunction useMergePropByScreen(oriProp, screen) {\n  var _React$useState = React.useState(typeof oriProp === 'string' ? oriProp : ''),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    prop = _React$useState2[0],\n    setProp = _React$useState2[1];\n  var clacMergeAlignOrJustify = function clacMergeAlignOrJustify() {\n    if (typeof oriProp === 'string') {\n      setProp(oriProp);\n    }\n    if (_typeof(oriProp) !== 'object') {\n      return;\n    }\n    for (var i = 0; i < responsiveArray.length; i++) {\n      var breakpoint = responsiveArray[i];\n      // if do not match, do nothing\n      if (!screen[breakpoint]) continue;\n      var curVal = oriProp[breakpoint];\n      if (curVal !== undefined) {\n        setProp(curVal);\n        return;\n      }\n    }\n  };\n  React.useEffect(function () {\n    clacMergeAlignOrJustify();\n  }, [JSON.stringify(oriProp), screen]);\n  return prop;\n}\nvar Row = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _classNames;\n  var customizePrefixCls = props.prefixCls,\n    justify = props.justify,\n    align = props.align,\n    className = props.className,\n    style = props.style,\n    children = props.children,\n    _props$gutter = props.gutter,\n    gutter = _props$gutter === void 0 ? 0 : _props$gutter,\n    wrap = props.wrap,\n    others = __rest(props, [\"prefixCls\", \"justify\", \"align\", \"className\", \"style\", \"children\", \"gutter\", \"wrap\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var _React$useState3 = React.useState({\n      xs: true,\n      sm: true,\n      md: true,\n      lg: true,\n      xl: true,\n      xxl: true\n    }),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    screens = _React$useState4[0],\n    setScreens = _React$useState4[1];\n  // to save screens info when responsiveObserve callback had been call\n  var _React$useState5 = React.useState({\n      xs: false,\n      sm: false,\n      md: false,\n      lg: false,\n      xl: false,\n      xxl: false\n    }),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    curScreens = _React$useState6[0],\n    setCurScreens = _React$useState6[1];\n  // ================================== calc reponsive data ==================================\n  var mergeAlign = useMergePropByScreen(align, curScreens);\n  var mergeJustify = useMergePropByScreen(justify, curScreens);\n  var supportFlexGap = useFlexGapSupport();\n  var gutterRef = React.useRef(gutter);\n  // ================================== Effect ==================================\n  React.useEffect(function () {\n    var token = ResponsiveObserve.subscribe(function (screen) {\n      setCurScreens(screen);\n      var currentGutter = gutterRef.current || 0;\n      if (!Array.isArray(currentGutter) && _typeof(currentGutter) === 'object' || Array.isArray(currentGutter) && (_typeof(currentGutter[0]) === 'object' || _typeof(currentGutter[1]) === 'object')) {\n        setScreens(screen);\n      }\n    });\n    return function () {\n      return ResponsiveObserve.unsubscribe(token);\n    };\n  }, []);\n  // ================================== Render ==================================\n  var getGutter = function getGutter() {\n    var results = [undefined, undefined];\n    var normalizedGutter = Array.isArray(gutter) ? gutter : [gutter, undefined];\n    normalizedGutter.forEach(function (g, index) {\n      if (_typeof(g) === 'object') {\n        for (var i = 0; i < responsiveArray.length; i++) {\n          var breakpoint = responsiveArray[i];\n          if (screens[breakpoint] && g[breakpoint] !== undefined) {\n            results[index] = g[breakpoint];\n            break;\n          }\n        }\n      } else {\n        results[index] = g;\n      }\n    });\n    return results;\n  };\n  var prefixCls = getPrefixCls('row', customizePrefixCls);\n  var gutters = getGutter();\n  var classes = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-no-wrap\"), wrap === false), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(mergeJustify), mergeJustify), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(mergeAlign), mergeAlign), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n  // Add gutter related style\n  var rowStyle = {};\n  var horizontalGutter = gutters[0] != null && gutters[0] > 0 ? gutters[0] / -2 : undefined;\n  var verticalGutter = gutters[1] != null && gutters[1] > 0 ? gutters[1] / -2 : undefined;\n  if (horizontalGutter) {\n    rowStyle.marginLeft = horizontalGutter;\n    rowStyle.marginRight = horizontalGutter;\n  }\n  if (supportFlexGap) {\n    // Set gap direct if flex gap support\n    var _gutters = _slicedToArray(gutters, 2);\n    rowStyle.rowGap = _gutters[1];\n  } else if (verticalGutter) {\n    rowStyle.marginTop = verticalGutter;\n    rowStyle.marginBottom = verticalGutter;\n  }\n  // \"gutters\" is a new array in each rendering phase, it'll make 'React.useMemo' effectless.\n  // So we deconstruct \"gutters\" variable here.\n  var _gutters2 = _slicedToArray(gutters, 2),\n    gutterH = _gutters2[0],\n    gutterV = _gutters2[1];\n  var rowContext = React.useMemo(function () {\n    return {\n      gutter: [gutterH, gutterV],\n      wrap: wrap,\n      supportFlexGap: supportFlexGap\n    };\n  }, [gutterH, gutterV, wrap, supportFlexGap]);\n  return /*#__PURE__*/React.createElement(RowContext.Provider, {\n    value: rowContext\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({}, others, {\n    className: classes,\n    style: _extends(_extends({}, rowStyle), style),\n    ref: ref\n  }), children));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Row.displayName = 'Row';\n}\nexport default Row;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Factory = void 0;\nconst Util_1 = require(\"./Util\");\nconst Validators_1 = require(\"./Validators\");\nvar GET = 'get', SET = 'set';\nexports.Factory = {\n    addGetterSetter(constructor, attr, def, validator, after) {\n        exports.Factory.addGetter(constructor, attr, def);\n        exports.Factory.addSetter(constructor, attr, validator, after);\n        exports.Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter(constructor, attr, def) {\n        var method = GET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter(constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            exports.Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter(constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter(constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util_1.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = (0, Validators_1.getComponentValidator)(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            if (!val) {\n                components.forEach((component) => {\n                    this._setAttr(attr + capitalize(component), undefined);\n                });\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        exports.Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter(constructor, attr) {\n        var capitalizedAttr = Util_1.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter(constructor, attr, def, validator) {\n        Util_1.Util.error('Adding deprecated ' + attr);\n        var method = GET + Util_1.Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util_1.Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        exports.Factory.addSetter(constructor, attr, validator, function () {\n            Util_1.Util.error(message);\n        });\n        exports.Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat(constructor, methods) {\n        Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util_1.Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter() {\n        this._filterUpToDate = false;\n    },\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._registerNode = exports.Konva = exports.glob = void 0;\nvar PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nexports.glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexports.Konva = {\n    _global: exports.glob,\n    version: '9.2.0',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle(angle) {\n        return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    pointerEventsEnabled: true,\n    autoDrawEnabled: true,\n    hitOnDragEnabled: false,\n    capturePointerEventsEnabled: false,\n    _mouseListenClick: false,\n    _touchListenClick: false,\n    _pointerListenClick: false,\n    _mouseInDblClickWindow: false,\n    _touchInDblClickWindow: false,\n    _pointerInDblClickWindow: false,\n    _mouseDblClickPointerId: null,\n    _touchDblClickPointerId: null,\n    _pointerDblClickPointerId: null,\n    pixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging() {\n        return exports.Konva['DD'].isDragging;\n    },\n    isDragReady() {\n        return !!exports.Konva['DD'].node;\n    },\n    releaseCanvasOnDestroy: true,\n    document: exports.glob.document,\n    _injectGlobal(Konva) {\n        exports.glob.Konva = Konva;\n    },\n};\nconst _registerNode = (NodeClass) => {\n    exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\nexports._registerNode = _registerNode;\nexports.Konva._injectGlobal(exports.Konva);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getComponentValidator = exports.getBooleanValidator = exports.getNumberArrayValidator = exports.getFunctionValidator = exports.getStringOrGradientValidator = exports.getStringValidator = exports.getNumberOrAutoValidator = exports.getNumberOrArrayOfNumbersValidator = exports.getNumberValidator = exports.alphaComponent = exports.RGBComponent = void 0;\nconst Global_1 = require(\"./Global\");\nconst Util_1 = require(\"./Util\");\nfunction _formatValue(val) {\n    if (Util_1.Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util_1.Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nfunction RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexports.RGBComponent = RGBComponent;\nfunction alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexports.alphaComponent = alphaComponent;\nfunction getNumberValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isNumber(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberValidator = getNumberValidator;\nfunction getNumberOrArrayOfNumbersValidator(noOfElements) {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            let isNumber = Util_1.Util._isNumber(val);\n            let isValidArray = Util_1.Util._isArray(val) && val.length == noOfElements;\n            if (!isNumber && !isValidArray) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or Array<number>(' +\n                    noOfElements +\n                    ')');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberOrArrayOfNumbersValidator = getNumberOrArrayOfNumbersValidator;\nfunction getNumberOrAutoValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util_1.Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\nfunction getStringValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isString(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexports.getStringValidator = getStringValidator;\nfunction getStringOrGradientValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            const isString = Util_1.Util._isString(val);\n            const isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]' ||\n                (val && val.addColorStop);\n            if (!(isString || isGradient)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string or a native gradient.');\n            }\n            return val;\n        };\n    }\n}\nexports.getStringOrGradientValidator = getStringOrGradientValidator;\nfunction getFunctionValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isFunction(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexports.getFunctionValidator = getFunctionValidator;\nfunction getNumberArrayValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            const TypedArray = Int8Array ? Object.getPrototypeOf(Int8Array) : null;\n            if (TypedArray && val instanceof TypedArray) {\n                return val;\n            }\n            if (!Util_1.Util._isArray(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util_1.Util._isNumber(item)) {\n                        Util_1.Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberArrayValidator = getNumberArrayValidator;\nfunction getBooleanValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexports.getBooleanValidator = getBooleanValidator;\nfunction getComponentValidator(components) {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (val === undefined || val === null) {\n                return val;\n            }\n            if (!Util_1.Util.isObject(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\nexports.getComponentValidator = getComponentValidator;\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}\nmodule.exports = _createSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = exports.Transform = void 0;\nconst Global_1 = require(\"./Global\");\nclass Transform {\n    constructor(m = [1, 0, 0, 1, 0, 0]) {\n        this.dirty = false;\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    reset() {\n        this.m[0] = 1;\n        this.m[1] = 0;\n        this.m[2] = 0;\n        this.m[3] = 1;\n        this.m[4] = 0;\n        this.m[5] = 0;\n    }\n    copy() {\n        return new Transform(this.m);\n    }\n    copyInto(tr) {\n        tr.m[0] = this.m[0];\n        tr.m[1] = this.m[1];\n        tr.m[2] = this.m[2];\n        tr.m[3] = this.m[3];\n        tr.m[4] = this.m[4];\n        tr.m[5] = this.m[5];\n    }\n    point(point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5],\n        };\n    }\n    translate(x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    }\n    scale(sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    }\n    rotate(rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    getTranslation() {\n        return {\n            x: this.m[4],\n            y: this.m[5],\n        };\n    }\n    skew(sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    multiply(matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    }\n    invert() {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    }\n    getMatrix() {\n        return this.m;\n    }\n    decompose() {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        let result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0,\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = exports.Util._getRotation(result.rotation);\n        return result;\n    }\n}\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5],\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nconst req = (typeof requestAnimationFrame !== 'undefined' && requestAnimationFrame) ||\n    function (f) {\n        setTimeout(f, 60);\n    };\nexports.Util = {\n    _isElement(obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction(obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject(obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber(obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject(val) {\n        return val instanceof Object;\n    },\n    isValidSelector(selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign(number) {\n        if (number === 0) {\n            return 1;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame(callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            req(function () {\n                const queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement() {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement() {\n        return document.createElement('img');\n    },\n    _isInDocument(el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _urlToImage(url, callback) {\n        var imageObj = exports.Util.createImageElement();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex(r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb(hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255,\n        };\n    },\n    getRandomColor() {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    getRGB(color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2],\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10),\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n    },\n    colorToRGBA(str) {\n        str = str || 'black';\n        return (exports.Util._namedColorToRBA(str) ||\n            exports.Util._hex3ColorToRGBA(str) ||\n            exports.Util._hex4ColorToRGBA(str) ||\n            exports.Util._hex6ColorToRGBA(str) ||\n            exports.Util._hex8ColorToRGBA(str) ||\n            exports.Util._rgbColorToRGBA(str) ||\n            exports.Util._rgbaColorToRGBA(str) ||\n            exports.Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA(str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1,\n        };\n    },\n    _rgbColorToRGBA(str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1,\n            };\n        }\n    },\n    _rgbaColorToRGBA(str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map((n, index) => {\n                if (n.slice(-1) === '%') {\n                    return index === 3 ? parseInt(n) / 100 : (parseInt(n) / 100) * 255;\n                }\n                return Number(n);\n            });\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3],\n            };\n        }\n    },\n    _hex8ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 9) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: parseInt(str.slice(7, 9), 16) / 0xff,\n            };\n        }\n    },\n    _hex6ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1,\n            };\n        }\n    },\n    _hex4ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 5) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: parseInt(str[4] + str[4], 16) / 0xff,\n            };\n        }\n    },\n    _hex3ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1,\n            };\n        }\n    },\n    _hslColorToRGBA(str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            const [_, ...hsl] = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str);\n            const h = Number(hsl[0]) / 360;\n            const s = Number(hsl[1]) / 100;\n            const l = Number(hsl[2]) / 100;\n            let t2;\n            let t3;\n            let val;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1,\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            const t1 = 2 * l - t2;\n            const rgb = [0, 0, 0];\n            for (let i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1,\n            };\n        }\n    },\n    haveIntersection(r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject(obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray(arr) {\n        return arr.slice(0);\n    },\n    degToRad(deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    radToDeg(rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _degToRad(deg) {\n        exports.Util.warn('Util._degToRad is removed. Please use public Util.degToRad instead.');\n        return exports.Util.degToRad(deg);\n    },\n    _radToDeg(rad) {\n        exports.Util.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.');\n        return exports.Util.radToDeg(rad);\n    },\n    _getRotation(radians) {\n        return Global_1.Konva.angleDeg ? exports.Util.radToDeg(radians) : radians;\n    },\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw(str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error(str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn(str) {\n        if (!Global_1.Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    each(obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange(val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine(pt, line, isClosed) {\n        var pc = exports.Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween(startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1],\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1],\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify(obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                exports.Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (exports.Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign(target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId(evt) {\n        if (!evt.touches) {\n            return evt.pointerId || 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    },\n    releaseCanvas(...canvases) {\n        if (!Global_1.Konva.releaseCanvasOnDestroy)\n            return;\n        canvases.forEach(c => {\n            c.width = 0;\n            c.height = 0;\n        });\n    },\n    drawRoundedRectPath(context, width, height, cornerRadius) {\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.moveTo(topLeft, 0);\n        context.lineTo(width - topRight, 0);\n        context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        context.lineTo(width, height - bottomRight);\n        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        context.lineTo(bottomLeft, height);\n        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        context.lineTo(0, topLeft);\n        context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Node = void 0;\nconst Util_1 = require(\"./Util\");\nconst Factory_1 = require(\"./Factory\");\nconst Canvas_1 = require(\"./Canvas\");\nconst Global_1 = require(\"./Global\");\nconst DragAndDrop_1 = require(\"./DragAndDrop\");\nconst Validators_1 = require(\"./Validators\");\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ALL_LISTENERS = 'allEventListeners', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE);\nlet idCounter = 1;\nclass Node {\n    constructor(config) {\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this._allEventListeners = null;\n        this.parent = null;\n        this._cache = new Map();\n        this._attachedDepsListeners = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this._dragEventId = null;\n        this._shouldFireChangeEvents = false;\n        this.setAttrs(config);\n        this._shouldFireChangeEvents = true;\n    }\n    hasChildren() {\n        return false;\n    }\n    _clearCache(attr) {\n        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) &&\n            this._cache.get(attr)) {\n            this._cache.get(attr).dirty = true;\n        }\n        else if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    }\n    _getCache(attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        var isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n        var invalid = cache === undefined || (isTransform && cache.dirty === true);\n        if (invalid) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    }\n    _calculate(name, deps, getter) {\n        if (!this._attachedDepsListeners.get(name)) {\n            const depsString = deps.map((dep) => dep + 'Change.konva').join(SPACE);\n            this.on(depsString, () => {\n                this._clearCache(name);\n            });\n            this._attachedDepsListeners.set(name, true);\n        }\n        return this._getCache(name, getter);\n    }\n    _getCanvasCache() {\n        return this._cache.get(CANVAS);\n    }\n    _clearSelfAndDescendantCache(attr) {\n        this._clearCache(attr);\n        if (attr === ABSOLUTE_TRANSFORM) {\n            this.fire('absoluteTransformChange');\n        }\n    }\n    clearCache() {\n        if (this._cache.has(CANVAS)) {\n            const { scene, filter, hit } = this._cache.get(CANVAS);\n            Util_1.Util.releaseCanvas(scene, filter, hit);\n            this._cache.delete(CANVAS);\n        }\n        this._clearSelfAndDescendantCache();\n        this._requestDraw();\n        return this;\n    }\n    cache(config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? Math.floor(rect.x) : conf.x, y = conf.y === undefined ? Math.floor(rect.y) : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;\n        if (!width || !height) {\n            Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2 + 1;\n        height += offset * 2 + 1;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n            willReadFrequently: true,\n        }), cachedHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: hitCanvasPixelRatio,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        cachedSceneCanvas.isCache = true;\n        this._cache.delete(CANVAS);\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this);\n        this.drawHit(cachedHitCanvas, this);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        this._requestDraw();\n        return this;\n    }\n    isCached() {\n        return this._cache.has(CANVAS);\n    }\n    getClientRect(config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    }\n    _transformedRect(rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    _drawCachedSceneCanvas(context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        const canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    }\n    _drawCachedHitCanvas(context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);\n        context.restore();\n    }\n    _getCachedSceneCanvas() {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util_1.Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util_1.Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    }\n    on(evtStr, handler) {\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    }\n    off(evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    }\n    dispatchEvent(evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    }\n    addEventListener(type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    }\n    removeEventListener(type) {\n        this.off(type);\n        return this;\n    }\n    _delegate(event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util_1.Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    }\n    remove() {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DragAndDrop_1.DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    }\n    _clearCaches() {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    }\n    _remove() {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    }\n    destroy() {\n        this.remove();\n        this.clearCache();\n        return this;\n    }\n    getAttr(attr) {\n        var method = 'get' + Util_1.Util._capitalize(attr);\n        if (Util_1.Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    }\n    getAncestors() {\n        var parent = this.getParent(), ancestors = [];\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    }\n    getAttrs() {\n        return this.attrs || {};\n    }\n    setAttrs(config) {\n        this._batchTransformChanges(() => {\n            var key, method;\n            if (!config) {\n                return this;\n            }\n            for (key in config) {\n                if (key === CHILDREN) {\n                    continue;\n                }\n                method = SET + Util_1.Util._capitalize(key);\n                if (Util_1.Util._isFunction(this[method])) {\n                    this[method](config[key]);\n                }\n                else {\n                    this._setAttr(key, config[key]);\n                }\n            }\n        });\n        return this;\n    }\n    isListening() {\n        return this._getCache(LISTENING, this._isListening);\n    }\n    _isListening(relativeTo) {\n        const listening = this.listening();\n        if (!listening) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isListening(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    isVisible() {\n        return this._getCache(VISIBLE, this._isVisible);\n    }\n    _isVisible(relativeTo) {\n        const visible = this.visible();\n        if (!visible) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isVisible(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    shouldDrawHit(top, skipDragCheck = false) {\n        if (top) {\n            return this._isVisible(top) && this._isListening(top);\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DragAndDrop_1.DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus !== 'dragging') {\n                return;\n            }\n            else if (elem.node.nodeType === 'Stage') {\n                layerUnderDrag = true;\n            }\n            else if (elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !skipDragCheck && !Global_1.Konva.hitOnDragEnabled && layerUnderDrag;\n        return this.isListening() && this.isVisible() && !dragSkip;\n    }\n    show() {\n        this.visible(true);\n        return this;\n    }\n    hide() {\n        this.visible(false);\n        return this;\n    }\n    getZIndex() {\n        return this.index || 0;\n    }\n    getAbsoluteZIndex() {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().slice());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    }\n    getDepth() {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    }\n    _batchTransformChanges(func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        }\n        this._needClearTransformCache = false;\n    }\n    setPosition(pos) {\n        this._batchTransformChanges(() => {\n            this.x(pos.x);\n            this.y(pos.y);\n        });\n        return this;\n    }\n    getPosition() {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    }\n    getRelativePointerPosition() {\n        if (!this.getStage()) {\n            return null;\n        }\n        var pos = this.getStage().getPointerPosition();\n        if (!pos) {\n            return null;\n        }\n        var transform = this.getAbsoluteTransform().copy();\n        transform.invert();\n        return transform.point(pos);\n    }\n    getAbsolutePosition(top) {\n        let haveCachedParent = false;\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Util_1.Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    }\n    setAbsolutePosition(pos) {\n        var origTrans = this._clearTransform();\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        var it = this._getAbsoluteTransform().copy();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        this._clearCache(TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        return this;\n    }\n    _setTransform(trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    }\n    _clearTransform() {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    }\n    move(change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    }\n    _eachAncestorReverse(func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    }\n    rotate(theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    }\n    moveToTop() {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.push(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveUp() {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveDown() {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    setZIndex(zIndex) {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util_1.Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    }\n    getAbsoluteOpacity() {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    }\n    _getAbsoluteOpacity() {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    }\n    moveTo(newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    }\n    toObject() {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util_1.Util._prepareToStringify(obj);\n    }\n    toJSON() {\n        return JSON.stringify(this.toObject());\n    }\n    getParent() {\n        return this.parent;\n    }\n    findAncestors(selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    }\n    isAncestorOf(node) {\n        return false;\n    }\n    findAncestor(selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    }\n    _isMatch(selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util_1.Util.isValidSelector(sel)) {\n                Util_1.Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util_1.Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getLayer() {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    }\n    getStage() {\n        return this._getCache(STAGE, this._getStage);\n    }\n    _getStage() {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    }\n    fire(eventType, evt = {}, bubble) {\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    }\n    getAbsoluteTransform(top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    }\n    _getAbsoluteTransform(top) {\n        var at;\n        if (top) {\n            at = new Util_1.Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            at = this._cache.get(ABSOLUTE_TRANSFORM) || new Util_1.Transform();\n            if (this.parent) {\n                this.parent.getAbsoluteTransform().copyInto(at);\n            }\n            else {\n                at.reset();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                const x = this.attrs.x || 0;\n                const y = this.attrs.y || 0;\n                const offsetX = this.attrs.offsetX || 0;\n                const offsetY = this.attrs.offsetY || 0;\n                at.translate(x - offsetX, y - offsetY);\n            }\n            at.dirty = false;\n            return at;\n        }\n    }\n    getAbsoluteScale(top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        const transform = this.getAbsoluteTransform(top);\n        const attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    }\n    getAbsoluteRotation() {\n        return this.getAbsoluteTransform().decompose().rotation;\n    }\n    getTransform() {\n        return this._getCache(TRANSFORM, this._getTransform);\n    }\n    _getTransform() {\n        var _a, _b;\n        var m = this._cache.get(TRANSFORM) || new Util_1.Transform();\n        m.reset();\n        var x = this.x(), y = this.y(), rotation = Global_1.Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        m.dirty = false;\n        return m;\n    }\n    clone(obj) {\n        var attrs = Util_1.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : Math.floor(box.x), y = config.y !== undefined ? config.y : Math.floor(box.y), pixelRatio = config.pixelRatio || 1, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || Math.ceil(box.width) || (stage ? stage.width() : 0),\n            height: config.height ||\n                Math.ceil(box.height) ||\n                (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        if (config.imageSmoothingEnabled === false) {\n            context._context.imageSmoothingEnabled = false;\n        }\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    }\n    toCanvas(config) {\n        return this._toKonvaCanvas(config)._canvas;\n    }\n    toDataURL(config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    }\n    toImage(config) {\n        return new Promise((resolve, reject) => {\n            try {\n                const callback = config === null || config === void 0 ? void 0 : config.callback;\n                if (callback)\n                    delete config.callback;\n                Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n                    resolve(img);\n                    callback === null || callback === void 0 ? void 0 : callback(img);\n                });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    toBlob(config) {\n        return new Promise((resolve, reject) => {\n            try {\n                const callback = config === null || config === void 0 ? void 0 : config.callback;\n                if (callback)\n                    delete config.callback;\n                this.toCanvas(config).toBlob((blob) => {\n                    resolve(blob);\n                    callback === null || callback === void 0 ? void 0 : callback(blob);\n                });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    setSize(size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    }\n    getSize() {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    }\n    getClassName() {\n        return this.className || this.nodeType;\n    }\n    getType() {\n        return this.nodeType;\n    }\n    getDragDistance() {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Global_1.Konva.dragDistance;\n        }\n    }\n    _off(type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    _fireChangeEvent(attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    }\n    addName(name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.name(newName);\n        }\n        return this;\n    }\n    hasName(name) {\n        if (!name) {\n            return false;\n        }\n        const fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    }\n    removeName(name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.name(names.join(' '));\n        }\n        return this;\n    }\n    setAttr(attr, val) {\n        var func = this[SET + Util_1.Util._capitalize(attr)];\n        if (Util_1.Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    }\n    _requestDraw() {\n        if (Global_1.Konva.autoDrawEnabled) {\n            const drawNode = this.getLayer() || this.getStage();\n            drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();\n        }\n    }\n    _setAttr(key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util_1.Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        if (this._shouldFireChangeEvents) {\n            this._fireChangeEvent(key, oldVal, val);\n        }\n        this._requestDraw();\n    }\n    _setComponentAttr(key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    }\n    _fireAndBubble(eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    }\n    _getProtoListeners(eventType) {\n        var _a, _b, _c;\n        const allListeners = (_a = this._cache.get(ALL_LISTENERS)) !== null && _a !== void 0 ? _a : {};\n        let events = allListeners === null || allListeners === void 0 ? void 0 : allListeners[eventType];\n        if (events === undefined) {\n            events = [];\n            let obj = Object.getPrototypeOf(this);\n            while (obj) {\n                const hierarchyEvents = (_c = (_b = obj.eventListeners) === null || _b === void 0 ? void 0 : _b[eventType]) !== null && _c !== void 0 ? _c : [];\n                events.push(...hierarchyEvents);\n                obj = Object.getPrototypeOf(obj);\n            }\n            allListeners[eventType] = events;\n            this._cache.set(ALL_LISTENERS, allListeners);\n        }\n        return events;\n    }\n    _fire(eventType, evt) {\n        evt = evt || {};\n        evt.currentTarget = this;\n        evt.type = eventType;\n        const topListeners = this._getProtoListeners(eventType);\n        if (topListeners) {\n            for (var i = 0; i < topListeners.length; i++) {\n                topListeners[i].handler.call(this, evt);\n            }\n        }\n        const selfListeners = this.eventListeners[eventType];\n        if (selfListeners) {\n            for (var i = 0; i < selfListeners.length; i++) {\n                selfListeners[i].handler.call(this, evt);\n            }\n        }\n    }\n    draw() {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    }\n    _createDragElement(evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DragAndDrop_1.DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId,\n        });\n    }\n    startDrag(evt, bubbleEvent = true) {\n        if (!DragAndDrop_1.DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        const elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, bubbleEvent);\n    }\n    _setDragPosition(evt, elem) {\n        const pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            const bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util_1.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            this._requestDraw();\n        }\n        this._lastPos = newNodePos;\n    }\n    stopDrag(evt) {\n        const elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DragAndDrop_1.DD._endDragBefore(evt);\n        DragAndDrop_1.DD._endDragAfter(evt);\n    }\n    setDraggable(draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    }\n    isDragging() {\n        const elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    }\n    _listenDrag() {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DragAndDrop_1.DD._dragElements.forEach((elem) => {\n                if (this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    }\n    _dragChange() {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (!stage) {\n                return;\n            }\n            const dragElement = DragAndDrop_1.DD._dragElements.get(this._id);\n            const isDragging = dragElement && dragElement.dragStatus === 'dragging';\n            const isReady = dragElement && dragElement.dragStatus === 'ready';\n            if (isDragging) {\n                this.stopDrag();\n            }\n            else if (isReady) {\n                DragAndDrop_1.DD._dragElements.delete(this._id);\n            }\n        }\n    }\n    _dragCleanup() {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    }\n    isClientRectOnScreen(margin = { x: 0, y: 0 }) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const screenRect = {\n            x: -margin.x,\n            y: -margin.y,\n            width: stage.width() + 2 * margin.x,\n            height: stage.height() + 2 * margin.y,\n        };\n        return Util_1.Util.haveIntersection(screenRect, this.getClientRect());\n    }\n    static create(data, container) {\n        if (Util_1.Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    }\n    static _createNode(obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Global_1.Konva[className]) {\n            Util_1.Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        const Class = Global_1.Konva[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    }\n}\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n    if (this._batchingTransformChange) {\n        this._needClearTransformCache = true;\n        return;\n    }\n    this._clearCache(TRANSFORM);\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n    this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n    this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nconst addGetterSetter = Factory_1.Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'y', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', (0, Validators_1.getStringValidator)());\naddGetterSetter(Node, 'opacity', 1, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'name', '', (0, Validators_1.getStringValidator)());\naddGetterSetter(Node, 'id', '', (0, Validators_1.getStringValidator)());\naddGetterSetter(Node, 'rotation', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'scaleY', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'skewY', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'offsetY', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'dragDistance', null, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'width', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'height', 0, (0, Validators_1.getNumberValidator)());\naddGetterSetter(Node, 'listening', true, (0, Validators_1.getBooleanValidator)());\naddGetterSetter(Node, 'preventDefault', true, (0, Validators_1.getBooleanValidator)());\naddGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\naddGetterSetter(Node, 'visible', true, (0, Validators_1.getBooleanValidator)());\naddGetterSetter(Node, 'transformsEnabled', 'all', (0, Validators_1.getStringValidator)());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Shape = exports.shapes = void 0;\nconst Global_1 = require(\"./Global\");\nconst Util_1 = require(\"./Util\");\nconst Factory_1 = require(\"./Factory\");\nconst Node_1 = require(\"./Node\");\nconst Validators_1 = require(\"./Validators\");\nconst Global_2 = require(\"./Global\");\nconst PointerEvents = require(\"./PointerEvents\");\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexports.shapes = {};\nfunction _fillFunc(context) {\n    const fillRule = this.attrs.fillRule;\n    if (fillRule) {\n        context.fill(fillRule);\n    }\n    else {\n        context.fill();\n    }\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nclass Shape extends Node_1.Node {\n    constructor(config) {\n        super(config);\n        let key;\n        while (true) {\n            key = Util_1.Util.getRandomColor();\n            if (key && !(key in exports.shapes)) {\n                break;\n            }\n        }\n        this.colorKey = key;\n        exports.shapes[key] = this;\n    }\n    getContext() {\n        Util_1.Util.warn('shape.getContext() method is deprecated. Please do not use it.');\n        return this.getLayer().getContext();\n    }\n    getCanvas() {\n        Util_1.Util.warn('shape.getCanvas() method is deprecated. Please do not use it.');\n        return this.getLayer().getCanvas();\n    }\n    getSceneFunc() {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    }\n    getHitFunc() {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    }\n    hasShadow() {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    }\n    _hasShadow() {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    }\n    _getFillPattern() {\n        return this._getCache(patternImage, this.__getFillPattern);\n    }\n    __getFillPattern() {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            if (pattern && pattern.setTransform) {\n                const tr = new Util_1.Transform();\n                tr.translate(this.fillPatternX(), this.fillPatternY());\n                tr.rotate(Global_1.Konva.getAngle(this.fillPatternRotation()));\n                tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());\n                tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());\n                const m = tr.getMatrix();\n                const matrix = typeof DOMMatrix === 'undefined'\n                    ? {\n                        a: m[0],\n                        b: m[1],\n                        c: m[2],\n                        d: m[3],\n                        e: m[4],\n                        f: m[5],\n                    }\n                    : new DOMMatrix(m);\n                pattern.setTransform(matrix);\n            }\n            return pattern;\n        }\n    }\n    _getLinearGradient() {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    }\n    __getLinearGradient() {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    _getRadialGradient() {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    }\n    __getRadialGradient() {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    getShadowRGBA() {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    }\n    _getShadowRGBA() {\n        if (!this.hasShadow()) {\n            return;\n        }\n        var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n        if (rgba) {\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    }\n    hasFill() {\n        return this._calculate('hasFill', [\n            'fillEnabled',\n            'fill',\n            'fillPatternImage',\n            'fillLinearGradientColorStops',\n            'fillRadialGradientColorStops',\n        ], () => {\n            return (this.fillEnabled() &&\n                !!(this.fill() ||\n                    this.fillPatternImage() ||\n                    this.fillLinearGradientColorStops() ||\n                    this.fillRadialGradientColorStops()));\n        });\n    }\n    hasStroke() {\n        return this._calculate('hasStroke', [\n            'strokeEnabled',\n            'strokeWidth',\n            'stroke',\n            'strokeLinearGradientColorStops',\n        ], () => {\n            return (this.strokeEnabled() &&\n                this.strokeWidth() &&\n                !!(this.stroke() || this.strokeLinearGradientColorStops()));\n        });\n    }\n    hasHitStroke() {\n        const width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    }\n    intersects(point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas, null, true);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    }\n    destroy() {\n        Node_1.Node.prototype.destroy.call(this);\n        delete exports.shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    }\n    _useBufferCanvas(forceFill) {\n        var _a;\n        if (!this.getStage()) {\n            return false;\n        }\n        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n        if (!perfectDrawEnabled) {\n            return false;\n        }\n        const hasFill = forceFill || this.hasFill();\n        const hasStroke = this.hasStroke();\n        const isTransparent = this.getAbsoluteOpacity() !== 1;\n        if (hasFill && hasStroke && isTransparent) {\n            return true;\n        }\n        const hasShadow = this.hasShadow();\n        const strokeForShadow = this.shadowForStrokeEnabled();\n        if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n            return true;\n        }\n        return false;\n    }\n    setStrokeHitEnabled(val) {\n        Util_1.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    }\n    getStrokeHitEnabled() {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    getSelfRect() {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height,\n        };\n    }\n    getClientRect(config = {}) {\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo;\n        const fillRect = this.getSelfRect();\n        const applyStroke = !config.skipStroke && this.hasStroke();\n        const strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        const fillAndStrokeWidth = fillRect.width + strokeWidth;\n        const fillAndStrokeHeight = fillRect.height + strokeWidth;\n        const applyShadow = !config.skipShadow && this.hasShadow();\n        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        const blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        const width = preWidth + blurRadius * 2;\n        const height = preHeight + blurRadius * 2;\n        const rect = {\n            width: width,\n            height: height,\n            x: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y,\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow(), stage, bufferCanvas, bufferContext;\n        var skipBuffer = canvas.isCache;\n        var cachingSelf = top === this;\n        if (!this.isVisible() && !cachingSelf) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas() && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            context._applyOpacity(this);\n            context._applyGlobalCompositeOperation(this);\n            context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!cachingSelf) {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            drawFunc.call(this, context, this);\n        }\n        context.restore();\n        return this;\n    }\n    drawHit(can, top, skipDragCheck = false) {\n        if (!this.shouldDrawHit(top, skipDragCheck)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        const selfCache = this === top;\n        if (!selfCache) {\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    }\n    drawHitFromCache(alphaThreshold = 0) {\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n}\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n(0, Global_2._registerNode)(Shape);\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, (0, Validators_1.getStringOrGradientValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', (0, Validators_1.getNumberOrAutoValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, (0, Validators_1.getStringValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, (0, Validators_1.getStringOrGradientValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRule', undefined, (0, Validators_1.getStringValidator)());\nFactory_1.Factory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc',\n});\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n  return _get.apply(this, arguments);\n}\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { createContext } from 'react';\nvar RowContext = /*#__PURE__*/createContext({});\nexport default RowContext;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HitCanvas = exports.SceneCanvas = exports.Canvas = void 0;\nconst Util_1 = require(\"./Util\");\nconst Context_1 = require(\"./Context\");\nconst Global_1 = require(\"./Global\");\nconst Factory_1 = require(\"./Factory\");\nconst Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util_1.Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    Util_1.Util.releaseCanvas(canvas);\n    return _pixelRatio;\n}\nclass Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util_1.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util_1.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, (0, Validators_1.getNumberValidator)());\nclass SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0, willReadFrequently: false }) {\n        super(config);\n        this.context = new Context_1.SceneContext(this, {\n            willReadFrequently: config.willReadFrequently,\n        });\n        this.setSize(config.width, config.height);\n    }\n}\nexports.SceneCanvas = SceneCanvas;\nclass HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new Context_1.HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexports.HitCanvas = HitCanvas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Container = void 0;\nconst Factory_1 = require(\"./Factory\");\nconst Node_1 = require(\"./Node\");\nconst Validators_1 = require(\"./Validators\");\nclass Container extends Node_1.Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        if (!filterFunc) {\n            return this.children || [];\n        }\n        const children = this.children || [];\n        var results = [];\n        children.forEach(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (children.length === 0) {\n            return this;\n        }\n        if (children.length > 1) {\n            for (var i = 0; i < children.length; i++) {\n                this.add(children[i]);\n            }\n            return this;\n        }\n        const child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        var retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        var obj = Node_1.Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        var node = Node_1.Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        var arr = [];\n        this.find('Shape').forEach(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        var caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top) {\n        var _a;\n        var context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            let clipArgs;\n            if (clipFunc) {\n                clipArgs = clipFunc.call(this, context, this);\n            }\n            else {\n                var clipX = this.clipX();\n                var clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip.apply(context, clipArgs);\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config) {\n        var _a;\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        var that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DD = void 0;\nconst Global_1 = require(\"./Global\");\nconst Util_1 = require(\"./Util\");\nexports.DD = {\n    get isDragging() {\n        var flag = false;\n        exports.DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        exports.DD._dragElements.forEach((elem) => {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag(evt) {\n        const nodesToFireEvents = [];\n        exports.DD._dragElements.forEach((elem, key) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            nodesToFireEvents.push(node);\n        });\n        nodesToFireEvents.forEach((node) => {\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt,\n            }, true);\n        });\n    },\n    _endDragBefore(evt) {\n        const drawNodes = [];\n        exports.DD._dragElements.forEach((elem) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                exports.DD.justDragged = true;\n                Global_1.Konva._mouseListenClick = false;\n                Global_1.Konva._touchListenClick = false;\n                Global_1.Konva._pointerListenClick = false;\n                elem.dragStatus = 'stopped';\n            }\n            const drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Global_1.Konva['Stage'] && elem.node);\n            if (drawNode && drawNodes.indexOf(drawNode) === -1) {\n                drawNodes.push(drawNode);\n            }\n        });\n        drawNodes.forEach((drawNode) => {\n            drawNode.draw();\n        });\n    },\n    _endDragAfter(evt) {\n        exports.DD._dragElements.forEach((elem, key) => {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt,\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                exports.DD._dragElements.delete(key);\n            }\n        });\n    },\n};\nif (Global_1.Konva.isBrowser) {\n    window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n    window.addEventListener('touchend', exports.DD._endDragBefore, true);\n    window.addEventListener('mousemove', exports.DD._drag);\n    window.addEventListener('touchmove', exports.DD._drag);\n    window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n    window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Group = void 0;\nconst Util_1 = require(\"./Util\");\nconst Container_1 = require(\"./Container\");\nconst Global_1 = require(\"./Global\");\nclass Group extends Container_1.Container {\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to groups.');\n        }\n    }\n}\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\n(0, Global_1._registerNode)(Group);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Animation = void 0;\nconst Global_1 = require(\"./Global\");\nconst Util_1 = require(\"./Util\");\nvar now = (function () {\n    if (Global_1.glob.performance && Global_1.glob.performance.now) {\n        return function () {\n            return Global_1.glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nclass Animation {\n    constructor(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0,\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    setLayers(layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    }\n    getLayers() {\n        return this.layers;\n    }\n    addLayer(layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    }\n    isRunning() {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    }\n    start() {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    }\n    stop() {\n        Animation._removeAnimation(this);\n        return this;\n    }\n    _updateFrameObject(time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    }\n    static _addAnimation(anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    }\n    static _removeAnimation(anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    }\n    static _runFrames() {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].batchDraw();\n        }\n    }\n    static _animationLoop() {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            Util_1.Util.requestAnimFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    }\n    static _handleAnimation() {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            Util_1.Util.requestAnimFrame(this._animationLoop);\n        }\n    }\n}\nexports.Animation = Animation;\nAnimation.animations = [];\nAnimation.animIdCounter = 0;\nAnimation.animRunning = false;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Path = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Global_1 = require(\"../Global\");\nconst BezierFunctions_1 = require(\"../BezierFunctions\");\nclass Path extends Shape_1.Shape {\n    constructor(config) {\n        super(config);\n        this.dataArray = [];\n        this.pathLength = 0;\n        this._readDataAttribute();\n        this.on('dataChange.konva', function () {\n            this._readDataAttribute();\n        });\n    }\n    _readDataAttribute() {\n        this.dataArray = Path.parsePathData(this.data());\n        this.pathLength = Path.getPathLength(this.dataArray);\n    }\n    _sceneFunc(context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    }\n    getSelfRect() {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (let t = start - inc; t > end; t -= inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (let t = start + inc; t < end; t += inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (let t = 0.0; t <= 1; t += 0.01) {\n                    const point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getLength() {\n        return this.pathLength;\n    }\n    getPointAtLength(length) {\n        return Path.getPointAtLengthOfDataArray(length, this.dataArray);\n    }\n    static getLineLength(x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    static getPathLength(dataArray) {\n        let pathLength = 0;\n        for (var i = 0; i < dataArray.length; ++i) {\n            pathLength += dataArray[i].pathLength;\n        }\n        return pathLength;\n    }\n    static getPointAtLengthOfDataArray(length, dataArray) {\n        var point, i = 0, ii = dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > dataArray[i].pathLength) {\n            length -= dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        if (length < 0.01) {\n            point = dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        var cp = dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier((0, BezierFunctions_1.t2length)(length, Path.getPathLength(dataArray), (i) => {\n                    return (0, BezierFunctions_1.getCubicArcLength)([cp.start.x, p[0], p[2], p[4]], [cp.start.y, p[1], p[3], p[5]], i);\n                }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier((0, BezierFunctions_1.t2length)(length, Path.getPathLength(dataArray), (i) => {\n                    return (0, BezierFunctions_1.getQuadraticArcLength)([cp.start.x, p[0], p[2]], [cp.start.y, p[1], p[3]], i);\n                }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    }\n    static getPointOnLine(dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise,\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise,\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise,\n            };\n        }\n        return pt;\n    }\n    static getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta),\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi),\n        };\n    }\n    static parsePathData(data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A',\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                if (coords[j] === '00') {\n                    p.push(0, 0);\n                    continue;\n                }\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY,\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points),\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0,\n                });\n            }\n        }\n        return ca;\n    }\n    static calcLength(x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                return (0, BezierFunctions_1.getCubicArcLength)([x, points[0], points[2], points[4]], [y, points[1], points[3], points[5]], 1);\n            case 'Q':\n                return (0, BezierFunctions_1.getQuadraticArcLength)([x, points[0], points[2]], [y, points[1], points[3]], 1);\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    }\n    static convertEndpointToCenterParameterization(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    }\n}\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n(0, Global_1._registerNode)(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HitContext = exports.SceneContext = exports.Context = void 0;\nconst Util_1 = require(\"./Util\");\nconst Global_1 = require(\"./Global\");\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util_1.Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nclass Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        if (Global_1.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util_1.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        const lineCap = shape.attrs.lineCap;\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        const lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip(...args) {\n        this._context.clip.apply(this._context, args);\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y, path, fillRule) {\n        if (path) {\n            return this._context.isPointInPath(path, x, y, fillRule);\n        }\n        return this._context.isPointInPath(x, y, fillRule);\n    }\n    fill(...args) {\n        this._context.fill.apply(this._context, args);\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nclass SceneContext extends Context {\n    constructor(canvas, { willReadFrequently = false } = {}) {\n        super(canvas);\n        this._context = canvas._canvas.getContext('2d', {\n            willReadFrequently,\n        });\n    }\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        const grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        const hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        const hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        const hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        const hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        const start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexports.SceneContext = SceneContext;\nclass HitContext extends Context {\n    constructor(canvas) {\n        super(canvas);\n        this._context = canvas._canvas.getContext('2d', {\n            willReadFrequently: true,\n        });\n    }\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            const strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\nexports.HitContext = HitContext;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.releaseCapture = exports.setPointerCapture = exports.hasPointerCapture = exports.createEvent = exports.getCapturedShape = void 0;\nconst Global_1 = require(\"./Global\");\nconst Captures = new Map();\nconst SUPPORT_POINTER_EVENTS = Global_1.Konva._global['PointerEvent'] !== undefined;\nfunction getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexports.getCapturedShape = getCapturedShape;\nfunction createEvent(evt) {\n    return {\n        evt,\n        pointerId: evt.pointerId,\n    };\n}\nexports.createEvent = createEvent;\nfunction hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexports.hasPointerCapture = hasPointerCapture;\nfunction setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    const stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexports.setPointerCapture = setPointerCapture;\nfunction releaseCapture(pointerId, target) {\n    const shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    const stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\nexports.releaseCapture = releaseCapture;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Layer = void 0;\nconst Util_1 = require(\"./Util\");\nconst Container_1 = require(\"./Container\");\nconst Node_1 = require(\"./Node\");\nconst Factory_1 = require(\"./Factory\");\nconst Canvas_1 = require(\"./Canvas\");\nconst Validators_1 = require(\"./Validators\");\nconst Shape_1 = require(\"./Shape\");\nconst Global_1 = require(\"./Global\");\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nclass Layer extends Container_1.Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new Canvas_1.SceneCanvas();\n        this.hitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        Node_1.Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        var moved = Node_1.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (Node_1.Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        var _canvas = this.getNativeCanvasElement();\n        Node_1.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util_1.Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = Shape_1.shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        Container_1.Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        Util_1.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        Util_1.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n    destroy() {\n        Util_1.Util.releaseCanvas(this.getNativeCanvasElement(), this.getHitCanvas()._canvas);\n        return super.destroy();\n    }\n}\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\n(0, Global_1._registerNode)(Layer);\nFactory_1.Factory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, (0, Validators_1.getBooleanValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Line = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n}\nfunction expandPoints(p, tension) {\n    var len = p.length, allPoints = [], n, cp;\n    for (n = 2; n < len - 2; n += 2) {\n        cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n        if (isNaN(cp[0])) {\n            continue;\n        }\n        allPoints.push(cp[0]);\n        allPoints.push(cp[1]);\n        allPoints.push(p[n]);\n        allPoints.push(p[n + 1]);\n        allPoints.push(cp[2]);\n        allPoints.push(cp[3]);\n    }\n    return allPoints;\n}\nclass Line extends Shape_1.Shape {\n    constructor(config) {\n        super(config);\n        this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n    }\n    _sceneFunc(context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    }\n    getTensionPoints() {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    }\n    _getTensionPoints() {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return expandPoints(this.points(), this.tension());\n        }\n    }\n    _getTensionPointsClosed() {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1],\n        ]);\n        return tp;\n    }\n    getWidth() {\n        return this.getSelfRect().width;\n    }\n    getHeight() {\n        return this.getSelfRect().height;\n    }\n    getSelfRect() {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (this.tension() !== 0) {\n            points = [\n                points[0],\n                points[1],\n                ...this._getTensionPoints(),\n                points[points.length - 2],\n                points[points.length - 1],\n            ];\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n}\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n(0, Global_1._registerNode)(Line);\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], (0, Validators_1.getNumberArrayValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Rect = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Global_1 = require(\"../Global\");\nconst Util_1 = require(\"../Util\");\nconst Validators_1 = require(\"../Validators\");\nclass Rect extends Shape_1.Shape {\n    _sceneFunc(context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n}\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\n(0, Global_1._registerNode)(Rect);\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Text = exports.stringToArray = void 0;\nconst Util_1 = require(\"../Util\");\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nfunction stringToArray(string) {\n    return Array.from(string);\n}\nexports.stringToArray = stringToArray;\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing',\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nfunction normalizeFontFamily(fontFamily) {\n    return fontFamily\n        .split(',')\n        .map((family) => {\n        family = family.trim();\n        const hasSpace = family.indexOf(' ') >= 0;\n        const hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n        if (hasSpace && !hasQuotes) {\n            family = `\"${family}\"`;\n        }\n        return family;\n    })\n        .join(', ');\n}\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.setAttr('miterLimit', 2);\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nclass Text extends Shape_1.Shape {\n    constructor(config) {\n        super(checkDefaultFill(config));\n        this._partialTextX = 0;\n        this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);\n        }\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        var textArr = this.textArr, textArrLen = textArr.length;\n        if (!this.text()) {\n            return;\n        }\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = obj.lastInParagraph, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && !lastLine ? totalWidth - padding * 2 : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                const gradient = this._getLinearGradient();\n                context.strokeStyle = gradient || fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                const gradient = this._getLinearGradient();\n                context.strokeStyle = gradient || fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                var array = stringToArray(text);\n                for (var li = 0; li < array.length; li++) {\n                    var letter = array[li];\n                    if (letter === ' ' && !lastLine && align === JUSTIFY) {\n                        lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX += this.measureSize(letter).width + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    }\n    _hitFunc(context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    setText(text) {\n        var str = Util_1.Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    }\n    getWidth() {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    }\n    getHeight() {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    measureSize(text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize,\n        };\n    }\n    _getContextFont() {\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            (this.fontSize() + PX_SPACE) +\n            normalizeFontFamily(this.fontFamily()));\n    }\n    _addTextLine(line) {\n        const align = this.align();\n        if (align === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({\n            text: line,\n            width: width,\n            lastInParagraph: false,\n        });\n    }\n    _getTextWidth(text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    }\n    _setTextData() {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr;\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        var shouldHandleEllipsis = this._shouldHandleEllipsis(currentHeightPx);\n                        if (shouldHandleEllipsis) {\n                            this._tryToAddEllipsisToLastLine();\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n                if (this._shouldHandleEllipsis(currentHeightPx) && i < max - 1) {\n                    this._tryToAddEllipsisToLastLine();\n                }\n            }\n            if (this.textArr[this.textArr.length - 1]) {\n                this.textArr[this.textArr.length - 1].lastInParagraph = true;\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    }\n    _shouldHandleEllipsis(currentHeightPx) {\n        var fontSize = +this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, height = this.attrs.height, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxHeightPx = height - padding * 2, wrap = this.wrap(), shouldWrap = wrap !== NONE;\n        return (!shouldWrap ||\n            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx));\n    }\n    _tryToAddEllipsisToLastLine() {\n        var width = this.attrs.width, fixedWidth = width !== AUTO && width !== undefined, padding = this.padding(), maxWidth = width - padding * 2, shouldAddEllipsis = this.ellipsis();\n        var lastLine = this.textArr[this.textArr.length - 1];\n        if (!lastLine || !shouldAddEllipsis) {\n            return;\n        }\n        if (fixedWidth) {\n            var haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n            if (!haveSpace) {\n                lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n            }\n        }\n        this.textArr.splice(this.textArr.length - 1, 1);\n        this._addTextLine(lastLine.text + ELLIPSIS);\n    }\n    getStrokeScaleEnabled() {\n        return true;\n    }\n}\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight',\n    'letterSpacing',\n];\n(0, Global_1._registerNode)(Text);\nFactory_1.Factory.overWriteSetter(Text, 'width', (0, Validators_1.getNumberOrAutoValidator)());\nFactory_1.Factory.overWriteSetter(Text, 'height', (0, Validators_1.getNumberOrAutoValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', (0, Validators_1.getStringValidator)());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\n","import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst _FullInternals_1 = require(\"./_FullInternals\");\nmodule.exports = _FullInternals_1.Konva;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Konva = void 0;\nconst _CoreInternals_1 = require(\"./_CoreInternals\");\nconst Arc_1 = require(\"./shapes/Arc\");\nconst Arrow_1 = require(\"./shapes/Arrow\");\nconst Circle_1 = require(\"./shapes/Circle\");\nconst Ellipse_1 = require(\"./shapes/Ellipse\");\nconst Image_1 = require(\"./shapes/Image\");\nconst Label_1 = require(\"./shapes/Label\");\nconst Line_1 = require(\"./shapes/Line\");\nconst Path_1 = require(\"./shapes/Path\");\nconst Rect_1 = require(\"./shapes/Rect\");\nconst RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\nconst Ring_1 = require(\"./shapes/Ring\");\nconst Sprite_1 = require(\"./shapes/Sprite\");\nconst Star_1 = require(\"./shapes/Star\");\nconst Text_1 = require(\"./shapes/Text\");\nconst TextPath_1 = require(\"./shapes/TextPath\");\nconst Transformer_1 = require(\"./shapes/Transformer\");\nconst Wedge_1 = require(\"./shapes/Wedge\");\nconst Blur_1 = require(\"./filters/Blur\");\nconst Brighten_1 = require(\"./filters/Brighten\");\nconst Contrast_1 = require(\"./filters/Contrast\");\nconst Emboss_1 = require(\"./filters/Emboss\");\nconst Enhance_1 = require(\"./filters/Enhance\");\nconst Grayscale_1 = require(\"./filters/Grayscale\");\nconst HSL_1 = require(\"./filters/HSL\");\nconst HSV_1 = require(\"./filters/HSV\");\nconst Invert_1 = require(\"./filters/Invert\");\nconst Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\nconst Mask_1 = require(\"./filters/Mask\");\nconst Noise_1 = require(\"./filters/Noise\");\nconst Pixelate_1 = require(\"./filters/Pixelate\");\nconst Posterize_1 = require(\"./filters/Posterize\");\nconst RGB_1 = require(\"./filters/RGB\");\nconst RGBA_1 = require(\"./filters/RGBA\");\nconst Sepia_1 = require(\"./filters/Sepia\");\nconst Solarize_1 = require(\"./filters/Solarize\");\nconst Threshold_1 = require(\"./filters/Threshold\");\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n    Arc: Arc_1.Arc,\n    Arrow: Arrow_1.Arrow,\n    Circle: Circle_1.Circle,\n    Ellipse: Ellipse_1.Ellipse,\n    Image: Image_1.Image,\n    Label: Label_1.Label,\n    Tag: Label_1.Tag,\n    Line: Line_1.Line,\n    Path: Path_1.Path,\n    Rect: Rect_1.Rect,\n    RegularPolygon: RegularPolygon_1.RegularPolygon,\n    Ring: Ring_1.Ring,\n    Sprite: Sprite_1.Sprite,\n    Star: Star_1.Star,\n    Text: Text_1.Text,\n    TextPath: TextPath_1.TextPath,\n    Transformer: Transformer_1.Transformer,\n    Wedge: Wedge_1.Wedge,\n    Filters: {\n        Blur: Blur_1.Blur,\n        Brighten: Brighten_1.Brighten,\n        Contrast: Contrast_1.Contrast,\n        Emboss: Emboss_1.Emboss,\n        Enhance: Enhance_1.Enhance,\n        Grayscale: Grayscale_1.Grayscale,\n        HSL: HSL_1.HSL,\n        HSV: HSV_1.HSV,\n        Invert: Invert_1.Invert,\n        Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n        Mask: Mask_1.Mask,\n        Noise: Noise_1.Noise,\n        Pixelate: Pixelate_1.Pixelate,\n        Posterize: Posterize_1.Posterize,\n        RGB: RGB_1.RGB,\n        RGBA: RGBA_1.RGBA,\n        Sepia: Sepia_1.Sepia,\n        Solarize: Solarize_1.Solarize,\n        Threshold: Threshold_1.Threshold,\n    },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Konva = void 0;\nconst Global_1 = require(\"./Global\");\nconst Util_1 = require(\"./Util\");\nconst Node_1 = require(\"./Node\");\nconst Container_1 = require(\"./Container\");\nconst Stage_1 = require(\"./Stage\");\nconst Layer_1 = require(\"./Layer\");\nconst FastLayer_1 = require(\"./FastLayer\");\nconst Group_1 = require(\"./Group\");\nconst DragAndDrop_1 = require(\"./DragAndDrop\");\nconst Shape_1 = require(\"./Shape\");\nconst Animation_1 = require(\"./Animation\");\nconst Tween_1 = require(\"./Tween\");\nconst Context_1 = require(\"./Context\");\nconst Canvas_1 = require(\"./Canvas\");\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n    Util: Util_1.Util,\n    Transform: Util_1.Transform,\n    Node: Node_1.Node,\n    Container: Container_1.Container,\n    Stage: Stage_1.Stage,\n    stages: Stage_1.stages,\n    Layer: Layer_1.Layer,\n    FastLayer: FastLayer_1.FastLayer,\n    Group: Group_1.Group,\n    DD: DragAndDrop_1.DD,\n    Shape: Shape_1.Shape,\n    shapes: Shape_1.shapes,\n    Animation: Animation_1.Animation,\n    Tween: Tween_1.Tween,\n    Easings: Tween_1.Easings,\n    Context: Context_1.Context,\n    Canvas: Canvas_1.Canvas,\n});\nexports.default = exports.Konva;\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}\nmodule.exports = _toArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Stage = exports.stages = void 0;\nconst Util_1 = require(\"./Util\");\nconst Factory_1 = require(\"./Factory\");\nconst Container_1 = require(\"./Container\");\nconst Global_1 = require(\"./Global\");\nconst Canvas_1 = require(\"./Canvas\");\nconst DragAndDrop_1 = require(\"./DragAndDrop\");\nconst Global_2 = require(\"./Global\");\nconst PointerEvents = require(\"./PointerEvents\");\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', POINTEROUT = 'pointerout', POINTERLEAVE = 'pointerleave', POINTEROVER = 'pointerover', POINTERENTER = 'pointerenter', CONTEXTMENU = 'contextmenu', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TOUCHMOVE = 'touchmove', TOUCHCANCEL = 'touchcancel', WHEEL = 'wheel', MAX_LAYERS_NUMBER = 5, EVENTS = [\n    [MOUSEENTER, '_pointerenter'],\n    [MOUSEDOWN, '_pointerdown'],\n    [MOUSEMOVE, '_pointermove'],\n    [MOUSEUP, '_pointerup'],\n    [MOUSELEAVE, '_pointerleave'],\n    [TOUCHSTART, '_pointerdown'],\n    [TOUCHMOVE, '_pointermove'],\n    [TOUCHEND, '_pointerup'],\n    [TOUCHCANCEL, '_pointercancel'],\n    [MOUSEOVER, '_pointerover'],\n    [WHEEL, '_wheel'],\n    [CONTEXTMENU, '_contextmenu'],\n    [POINTERDOWN, '_pointerdown'],\n    [POINTERMOVE, '_pointermove'],\n    [POINTERUP, '_pointerup'],\n    [POINTERCANCEL, '_pointercancel'],\n    [LOSTPOINTERCAPTURE, '_lostpointercapture'],\n];\nconst EVENTS_MAP = {\n    mouse: {\n        [POINTEROUT]: MOUSEOUT,\n        [POINTERLEAVE]: MOUSELEAVE,\n        [POINTEROVER]: MOUSEOVER,\n        [POINTERENTER]: MOUSEENTER,\n        [POINTERMOVE]: MOUSEMOVE,\n        [POINTERDOWN]: MOUSEDOWN,\n        [POINTERUP]: MOUSEUP,\n        [POINTERCANCEL]: 'mousecancel',\n        pointerclick: 'click',\n        pointerdblclick: 'dblclick',\n    },\n    touch: {\n        [POINTEROUT]: 'touchout',\n        [POINTERLEAVE]: 'touchleave',\n        [POINTEROVER]: 'touchover',\n        [POINTERENTER]: 'touchenter',\n        [POINTERMOVE]: TOUCHMOVE,\n        [POINTERDOWN]: TOUCHSTART,\n        [POINTERUP]: TOUCHEND,\n        [POINTERCANCEL]: TOUCHCANCEL,\n        pointerclick: 'tap',\n        pointerdblclick: 'dbltap',\n    },\n    pointer: {\n        [POINTEROUT]: POINTEROUT,\n        [POINTERLEAVE]: POINTERLEAVE,\n        [POINTEROVER]: POINTEROVER,\n        [POINTERENTER]: POINTERENTER,\n        [POINTERMOVE]: POINTERMOVE,\n        [POINTERDOWN]: POINTERDOWN,\n        [POINTERUP]: POINTERUP,\n        [POINTERCANCEL]: POINTERCANCEL,\n        pointerclick: 'pointerclick',\n        pointerdblclick: 'pointerdblclick',\n    },\n};\nconst getEventType = (type) => {\n    if (type.indexOf('pointer') >= 0) {\n        return 'pointer';\n    }\n    if (type.indexOf('touch') >= 0) {\n        return 'touch';\n    }\n    return 'mouse';\n};\nconst getEventsMap = (eventType) => {\n    const type = getEventType(eventType);\n    if (type === 'pointer') {\n        return Global_1.Konva.pointerEventsEnabled && EVENTS_MAP.pointer;\n    }\n    if (type === 'touch') {\n        return EVENTS_MAP.touch;\n    }\n    if (type === 'mouse') {\n        return EVENTS_MAP.mouse;\n    }\n};\nfunction checkNoClip(attrs = {}) {\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nconst NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;\nexports.stages = [];\nclass Stage extends Container_1.Container {\n    constructor(config) {\n        super(checkNoClip(config));\n        this._pointerPositions = [];\n        this._changedPointerPositions = [];\n        this._buildDOM();\n        this._bindContentEvents();\n        exports.stages.push(this);\n        this.on('widthChange.konva heightChange.konva', this._resizeDOM);\n        this.on('visibleChange.konva', this._checkVisibility);\n        this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', () => {\n            checkNoClip(this.attrs);\n        });\n        this._checkVisibility();\n    }\n    _validateAdd(child) {\n        const isLayer = child.getType() === 'Layer';\n        const isFastLayer = child.getType() === 'FastLayer';\n        const valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util_1.Util.throw('You may only add layers to the stage.');\n        }\n    }\n    _checkVisibility() {\n        if (!this.content) {\n            return;\n        }\n        const style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    }\n    setContainer(container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr('container', container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    }\n    shouldDrawHit() {\n        return true;\n    }\n    clear() {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    }\n    clone(obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container =\n            typeof document !== 'undefined' && document.createElement('div');\n        return Container_1.Container.prototype.clone.call(this, obj);\n    }\n    destroy() {\n        super.destroy();\n        var content = this.content;\n        if (content && Util_1.Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = exports.stages.indexOf(this);\n        if (index > -1) {\n            exports.stages.splice(index, 1);\n        }\n        Util_1.Util.releaseCanvas(this.bufferCanvas._canvas, this.bufferHitCanvas._canvas);\n        return this;\n    }\n    getPointerPosition() {\n        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util_1.Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n    _getPointerById(id) {\n        return this._pointerPositions.find((p) => p.id === id);\n    }\n    getPointersPositions() {\n        return this._pointerPositions;\n    }\n    getStage() {\n        return this;\n    }\n    getContent() {\n        return this.content;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.x = config.x || 0;\n        config.y = config.y || 0;\n        config.width = config.width || this.width();\n        config.height = config.height || this.height();\n        var canvas = new Canvas_1.SceneCanvas({\n            width: config.width,\n            height: config.height,\n            pixelRatio: config.pixelRatio || 1,\n        });\n        var _context = canvas.getContext()._context;\n        var layers = this.children;\n        if (config.x || config.y) {\n            _context.translate(-1 * config.x, -1 * config.y);\n        }\n        layers.forEach(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    }\n    getIntersection(pos) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n;\n        for (n = end; n >= 0; n--) {\n            const shape = layers[n].getIntersection(pos);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    }\n    _resizeDOM() {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.forEach((layer) => {\n            layer.setSize({ width, height });\n            layer.draw();\n        });\n    }\n    add(layer, ...rest) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        super.add(layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util_1.Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Global_1.Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    }\n    getParent() {\n        return null;\n    }\n    getLayer() {\n        return null;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n    getLayers() {\n        return this.children;\n    }\n    _bindContentEvents() {\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        EVENTS.forEach(([event, methodName]) => {\n            this.content.addEventListener(event, (evt) => {\n                this[methodName](evt);\n            }, { passive: false });\n        });\n    }\n    _pointerenter(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerenter, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _pointerover(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerover, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _getTargetShape(evenType) {\n        let shape = this[evenType + 'targetShape'];\n        if (shape && !shape.getStage()) {\n            shape = null;\n        }\n        return shape;\n    }\n    _pointerleave(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var targetShape = this._getTargetShape(eventType);\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(events.pointerout, { evt: evt });\n            targetShape._fireAndBubble(events.pointerleave, { evt: evt });\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this[eventType + 'targetShape'] = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this._fire(events.pointerout, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n    }\n    _pointerdown(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            var shape = this.getIntersection(pos);\n            DragAndDrop_1.DD.justDragged = false;\n            Global_1.Konva['_' + eventType + 'ListenClick'] = true;\n            const hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Global_1.Konva.capturePointerEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            this[eventType + 'ClickStartShape'] = shape;\n            shape._fireAndBubble(events.pointerdown, {\n                evt: evt,\n                pointerId: pos.id,\n            });\n            triggeredOnShape = true;\n            const isTouch = evt.type.indexOf('touch') >= 0;\n            if (shape.preventDefault() && evt.cancelable && isTouch) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerdown, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._pointerPositions[0].id,\n            });\n        }\n    }\n    _pointermove(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (!eventsEnabled) {\n            return;\n        }\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        var targetShape = this._getTargetShape(eventType);\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            var differentTarget = targetShape !== shape;\n            if (differentTarget && targetShape) {\n                targetShape._fireAndBubble(events.pointerout, Object.assign({}, event), shape);\n                targetShape._fireAndBubble(events.pointerleave, Object.assign({}, event), shape);\n            }\n            if (shape) {\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                if (differentTarget) {\n                    shape._fireAndBubble(events.pointerover, Object.assign({}, event), targetShape);\n                    shape._fireAndBubble(events.pointerenter, Object.assign({}, event), targetShape);\n                    this[eventType + 'targetShape'] = shape;\n                }\n                shape._fireAndBubble(events.pointermove, Object.assign({}, event));\n            }\n            else {\n                if (targetShape) {\n                    this._fire(events.pointerover, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                    this[eventType + 'targetShape'] = null;\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointermove, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n    }\n    _pointerup(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const clickStartShape = this[eventType + 'ClickStartShape'];\n        const clickEndShape = this[eventType + 'ClickEndShape'];\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            if (shape) {\n                shape.releaseCapture(pos.id);\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            let fireDblClick = false;\n            if (Global_1.Konva['_' + eventType + 'InDblClickWindow']) {\n                fireDblClick = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            else if (!DragAndDrop_1.DD.justDragged) {\n                Global_1.Konva['_' + eventType + 'InDblClickWindow'] = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            this[eventType + 'DblTimeout'] = setTimeout(function () {\n                Global_1.Konva['_' + eventType + 'InDblClickWindow'] = false;\n            }, Global_1.Konva.dblClickWindow);\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                this[eventType + 'ClickEndShape'] = shape;\n                shape._fireAndBubble(events.pointerup, Object.assign({}, event));\n                if (Global_1.Konva['_' + eventType + 'ListenClick'] &&\n                    clickStartShape &&\n                    clickStartShape === shape) {\n                    shape._fireAndBubble(events.pointerclick, Object.assign({}, event));\n                    if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                        shape._fireAndBubble(events.pointerdblclick, Object.assign({}, event));\n                    }\n                }\n            }\n            else {\n                this[eventType + 'ClickEndShape'] = null;\n                if (Global_1.Konva['_' + eventType + 'ListenClick']) {\n                    this._fire(events.pointerclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n                if (fireDblClick) {\n                    this._fire(events.pointerdblclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerup, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n        Global_1.Konva['_' + eventType + 'ListenClick'] = false;\n        if (evt.cancelable && eventType !== 'touch') {\n            evt.preventDefault();\n        }\n    }\n    _contextmenu(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _wheel(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointercancel(evt) {\n        this.setPointersPositions(evt);\n        const shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    _lostpointercapture(evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    setPointersPositions(evt) {\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Array.prototype.forEach.call(evt.touches, (touch) => {\n                this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n            Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {\n                this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y,\n            };\n            this._pointerPositions = [{ x, y, id: Util_1.Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x, y, id: Util_1.Util._getFirstPointerId(evt) },\n            ];\n        }\n    }\n    _setPointerPosition(evt) {\n        Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    }\n    _getContentPosition() {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1,\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1,\n        };\n    }\n    _buildDOM() {\n        this.bufferCanvas = new Canvas_1.SceneCanvas({\n            width: this.width(),\n            height: this.height(),\n        });\n        this.bufferHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height(),\n        });\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = '';\n        this.content = document.createElement('div');\n        this.content.style.position = 'relative';\n        this.content.style.userSelect = 'none';\n        this.content.className = 'konvajs-content';\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    }\n    cache() {\n        Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    }\n    clearCache() {\n        return this;\n    }\n    batchDraw() {\n        this.getChildren().forEach(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    }\n}\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\n(0, Global_2._registerNode)(Stage);\nFactory_1.Factory.addGetterSetter(Stage, 'container');\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FastLayer = void 0;\nconst Util_1 = require(\"./Util\");\nconst Layer_1 = require(\"./Layer\");\nconst Global_1 = require(\"./Global\");\nclass FastLayer extends Layer_1.Layer {\n    constructor(attrs) {\n        super(attrs);\n        this.listening(false);\n        Util_1.Util.warn('Konva.Fast layer is deprecated. Please use \"new Konva.Layer({ listening: false })\" instead.');\n    }\n}\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\n(0, Global_1._registerNode)(FastLayer);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Easings = exports.Tween = void 0;\nconst Util_1 = require(\"./Util\");\nconst Animation_1 = require(\"./Animation\");\nconst Node_1 = require(\"./Node\");\nconst Global_1 = require(\"./Global\");\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1,\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nclass TweenEngine {\n    constructor(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    fire(str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    }\n    setTime(t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    }\n    getTime() {\n        return this._time;\n    }\n    setPosition(p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    }\n    getPosition(t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    }\n    play() {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    }\n    reverse() {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    }\n    seek(t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    }\n    reset() {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    }\n    finish() {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    }\n    update() {\n        this.setPosition(this.getPosition(this._time));\n        this.fire('onUpdate');\n    }\n    onEnterFrame() {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    }\n    pause() {\n        this.state = PAUSED;\n        this.fire('onPause');\n    }\n    getTimer() {\n        return new Date().getTime();\n    }\n}\nclass Tween {\n    constructor(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || exports.Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation_1.Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n        this.onUpdate = config.onUpdate;\n    }\n    _addAttr(key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util_1.Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n                        endRGBA = Util_1.Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a,\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util_1.Util.colorToRGBA(start);\n            endRGBA = Util_1.Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a,\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart,\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    }\n    _tweenFunc(i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util_1.Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    }\n    _addListeners() {\n        this.tween.onPlay = () => {\n            this.anim.start();\n        };\n        this.tween.onReverse = () => {\n            this.anim.start();\n        };\n        this.tween.onPause = () => {\n            this.anim.stop();\n        };\n        this.tween.onFinish = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (this.onFinish) {\n                this.onFinish.call(this);\n            }\n        };\n        this.tween.onReset = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (this.onReset) {\n                this.onReset();\n            }\n        };\n        this.tween.onUpdate = () => {\n            if (this.onUpdate) {\n                this.onUpdate.call(this);\n            }\n        };\n    }\n    play() {\n        this.tween.play();\n        return this;\n    }\n    reverse() {\n        this.tween.reverse();\n        return this;\n    }\n    reset() {\n        this.tween.reset();\n        return this;\n    }\n    seek(t) {\n        this.tween.seek(t * 1000);\n        return this;\n    }\n    pause() {\n        this.tween.pause();\n        return this;\n    }\n    finish() {\n        this.tween.finish();\n        return this;\n    }\n    destroy() {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    }\n}\nexports.Tween = Tween;\nTween.attrs = {};\nTween.tweens = {};\nNode_1.Node.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexports.Easings = {\n    BackEaseIn(t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut(t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut(t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut(t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn(t, b, c, d) {\n        return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut(t, b, c, d) {\n        if (t < d / 2) {\n            return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn(t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut(t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn(t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut(t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear(t, b, c, d) {\n        return (c * t) / d + b;\n    },\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Arc = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Global_1 = require(\"../Global\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_2 = require(\"../Global\");\nclass Arc extends Shape_1.Shape {\n    _sceneFunc(context) {\n        var angle = Global_1.Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n    getSelfRect() {\n        const innerRadius = this.innerRadius();\n        const outerRadius = this.outerRadius();\n        const clockwise = this.clockwise();\n        const angle = Global_1.Konva.getAngle(clockwise ? 360 - this.angle() : this.angle());\n        const boundLeftRatio = Math.cos(Math.min(angle, Math.PI));\n        const boundRightRatio = 1;\n        const boundTopRatio = Math.sin(Math.min(Math.max(Math.PI, angle), (3 * Math.PI) / 2));\n        const boundBottomRatio = Math.sin(Math.min(angle, Math.PI / 2));\n        const boundLeft = boundLeftRatio * (boundLeftRatio > 0 ? innerRadius : outerRadius);\n        const boundRight = boundRightRatio * (boundRightRatio > 0 ? outerRadius : innerRadius);\n        const boundTop = boundTopRatio * (boundTopRatio > 0 ? innerRadius : outerRadius);\n        const boundBottom = boundBottomRatio * (boundBottomRatio > 0 ? outerRadius : innerRadius);\n        return {\n            x: boundLeft,\n            y: clockwise ? -1 * boundBottom : boundTop,\n            width: boundRight - boundLeft,\n            height: boundBottom - boundTop,\n        };\n    }\n}\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n(0, Global_2._registerNode)(Arc);\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, (0, Validators_1.getBooleanValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Arrow = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Line_1 = require(\"./Line\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nconst Path_1 = require(\"./Path\");\nclass Arrow extends Line_1.Line {\n    _sceneFunc(ctx) {\n        super._sceneFunc(ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var length = this.pointerLength();\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            const lp = [\n                tp[tp.length - 4],\n                tp[tp.length - 3],\n                tp[tp.length - 2],\n                tp[tp.length - 1],\n                points[n - 2],\n                points[n - 1],\n            ];\n            const lastLength = Path_1.Path.calcLength(tp[tp.length - 4], tp[tp.length - 3], 'C', lp);\n            const previous = Path_1.Path.getPointOnQuadraticBezier(Math.min(1, 1 - length / lastLength), lp[0], lp[1], lp[2], lp[3], lp[4], lp[5]);\n            dx = points[n - 2] - previous.x;\n            dy = points[n - 1] - previous.y;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var width = this.pointerWidth();\n        if (this.pointerAtEnding()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[n - 2], points[n - 1]);\n            ctx.rotate(radians);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n    }\n    __fillStroke(ctx) {\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    }\n    getSelfRect() {\n        const lineRect = super.getSelfRect();\n        const offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2,\n        };\n    }\n}\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\n(0, Global_1._registerNode)(Arrow);\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtEnding', true);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.t2length = exports.getQuadraticArcLength = exports.getCubicArcLength = exports.binomialCoefficients = exports.cValues = exports.tValues = void 0;\nexports.tValues = [\n    [],\n    [],\n    [\n        -0.5773502691896257645091487805019574556476,\n        0.5773502691896257645091487805019574556476,\n    ],\n    [\n        0, -0.7745966692414833770358530799564799221665,\n        0.7745966692414833770358530799564799221665,\n    ],\n    [\n        -0.3399810435848562648026657591032446872005,\n        0.3399810435848562648026657591032446872005,\n        -0.8611363115940525752239464888928095050957,\n        0.8611363115940525752239464888928095050957,\n    ],\n    [\n        0, -0.5384693101056830910363144207002088049672,\n        0.5384693101056830910363144207002088049672,\n        -0.9061798459386639927976268782993929651256,\n        0.9061798459386639927976268782993929651256,\n    ],\n    [\n        0.6612093864662645136613995950199053470064,\n        -0.6612093864662645136613995950199053470064,\n        -0.2386191860831969086305017216807119354186,\n        0.2386191860831969086305017216807119354186,\n        -0.9324695142031520278123015544939946091347,\n        0.9324695142031520278123015544939946091347,\n    ],\n    [\n        0, 0.4058451513773971669066064120769614633473,\n        -0.4058451513773971669066064120769614633473,\n        -0.7415311855993944398638647732807884070741,\n        0.7415311855993944398638647732807884070741,\n        -0.9491079123427585245261896840478512624007,\n        0.9491079123427585245261896840478512624007,\n    ],\n    [\n        -0.1834346424956498049394761423601839806667,\n        0.1834346424956498049394761423601839806667,\n        -0.5255324099163289858177390491892463490419,\n        0.5255324099163289858177390491892463490419,\n        -0.7966664774136267395915539364758304368371,\n        0.7966664774136267395915539364758304368371,\n        -0.9602898564975362316835608685694729904282,\n        0.9602898564975362316835608685694729904282,\n    ],\n    [\n        0, -0.8360311073266357942994297880697348765441,\n        0.8360311073266357942994297880697348765441,\n        -0.9681602395076260898355762029036728700494,\n        0.9681602395076260898355762029036728700494,\n        -0.3242534234038089290385380146433366085719,\n        0.3242534234038089290385380146433366085719,\n        -0.6133714327005903973087020393414741847857,\n        0.6133714327005903973087020393414741847857,\n    ],\n    [\n        -0.1488743389816312108848260011297199846175,\n        0.1488743389816312108848260011297199846175,\n        -0.4333953941292471907992659431657841622,\n        0.4333953941292471907992659431657841622,\n        -0.6794095682990244062343273651148735757692,\n        0.6794095682990244062343273651148735757692,\n        -0.8650633666889845107320966884234930485275,\n        0.8650633666889845107320966884234930485275,\n        -0.9739065285171717200779640120844520534282,\n        0.9739065285171717200779640120844520534282,\n    ],\n    [\n        0, -0.2695431559523449723315319854008615246796,\n        0.2695431559523449723315319854008615246796,\n        -0.5190961292068118159257256694586095544802,\n        0.5190961292068118159257256694586095544802,\n        -0.7301520055740493240934162520311534580496,\n        0.7301520055740493240934162520311534580496,\n        -0.8870625997680952990751577693039272666316,\n        0.8870625997680952990751577693039272666316,\n        -0.9782286581460569928039380011228573907714,\n        0.9782286581460569928039380011228573907714,\n    ],\n    [\n        -0.1252334085114689154724413694638531299833,\n        0.1252334085114689154724413694638531299833,\n        -0.3678314989981801937526915366437175612563,\n        0.3678314989981801937526915366437175612563,\n        -0.587317954286617447296702418940534280369,\n        0.587317954286617447296702418940534280369,\n        -0.7699026741943046870368938332128180759849,\n        0.7699026741943046870368938332128180759849,\n        -0.9041172563704748566784658661190961925375,\n        0.9041172563704748566784658661190961925375,\n        -0.9815606342467192506905490901492808229601,\n        0.9815606342467192506905490901492808229601,\n    ],\n    [\n        0, -0.2304583159551347940655281210979888352115,\n        0.2304583159551347940655281210979888352115,\n        -0.4484927510364468528779128521276398678019,\n        0.4484927510364468528779128521276398678019,\n        -0.6423493394403402206439846069955156500716,\n        0.6423493394403402206439846069955156500716,\n        -0.8015780907333099127942064895828598903056,\n        0.8015780907333099127942064895828598903056,\n        -0.9175983992229779652065478365007195123904,\n        0.9175983992229779652065478365007195123904,\n        -0.9841830547185881494728294488071096110649,\n        0.9841830547185881494728294488071096110649,\n    ],\n    [\n        -0.1080549487073436620662446502198347476119,\n        0.1080549487073436620662446502198347476119,\n        -0.3191123689278897604356718241684754668342,\n        0.3191123689278897604356718241684754668342,\n        -0.5152486363581540919652907185511886623088,\n        0.5152486363581540919652907185511886623088,\n        -0.6872929048116854701480198030193341375384,\n        0.6872929048116854701480198030193341375384,\n        -0.8272013150697649931897947426503949610397,\n        0.8272013150697649931897947426503949610397,\n        -0.928434883663573517336391139377874264477,\n        0.928434883663573517336391139377874264477,\n        -0.986283808696812338841597266704052801676,\n        0.986283808696812338841597266704052801676,\n    ],\n    [\n        0, -0.2011940939974345223006283033945962078128,\n        0.2011940939974345223006283033945962078128,\n        -0.3941513470775633698972073709810454683627,\n        0.3941513470775633698972073709810454683627,\n        -0.5709721726085388475372267372539106412383,\n        0.5709721726085388475372267372539106412383,\n        -0.7244177313601700474161860546139380096308,\n        0.7244177313601700474161860546139380096308,\n        -0.8482065834104272162006483207742168513662,\n        0.8482065834104272162006483207742168513662,\n        -0.9372733924007059043077589477102094712439,\n        0.9372733924007059043077589477102094712439,\n        -0.9879925180204854284895657185866125811469,\n        0.9879925180204854284895657185866125811469,\n    ],\n    [\n        -0.0950125098376374401853193354249580631303,\n        0.0950125098376374401853193354249580631303,\n        -0.281603550779258913230460501460496106486,\n        0.281603550779258913230460501460496106486,\n        -0.45801677765722738634241944298357757354,\n        0.45801677765722738634241944298357757354,\n        -0.6178762444026437484466717640487910189918,\n        0.6178762444026437484466717640487910189918,\n        -0.7554044083550030338951011948474422683538,\n        0.7554044083550030338951011948474422683538,\n        -0.8656312023878317438804678977123931323873,\n        0.8656312023878317438804678977123931323873,\n        -0.9445750230732325760779884155346083450911,\n        0.9445750230732325760779884155346083450911,\n        -0.9894009349916499325961541734503326274262,\n        0.9894009349916499325961541734503326274262,\n    ],\n    [\n        0, -0.1784841814958478558506774936540655574754,\n        0.1784841814958478558506774936540655574754,\n        -0.3512317634538763152971855170953460050405,\n        0.3512317634538763152971855170953460050405,\n        -0.5126905370864769678862465686295518745829,\n        0.5126905370864769678862465686295518745829,\n        -0.6576711592166907658503022166430023351478,\n        0.6576711592166907658503022166430023351478,\n        -0.7815140038968014069252300555204760502239,\n        0.7815140038968014069252300555204760502239,\n        -0.8802391537269859021229556944881556926234,\n        0.8802391537269859021229556944881556926234,\n        -0.9506755217687677612227169578958030214433,\n        0.9506755217687677612227169578958030214433,\n        -0.9905754753144173356754340199406652765077,\n        0.9905754753144173356754340199406652765077,\n    ],\n    [\n        -0.0847750130417353012422618529357838117333,\n        0.0847750130417353012422618529357838117333,\n        -0.2518862256915055095889728548779112301628,\n        0.2518862256915055095889728548779112301628,\n        -0.4117511614628426460359317938330516370789,\n        0.4117511614628426460359317938330516370789,\n        -0.5597708310739475346078715485253291369276,\n        0.5597708310739475346078715485253291369276,\n        -0.6916870430603532078748910812888483894522,\n        0.6916870430603532078748910812888483894522,\n        -0.8037049589725231156824174550145907971032,\n        0.8037049589725231156824174550145907971032,\n        -0.8926024664975557392060605911271455154078,\n        0.8926024664975557392060605911271455154078,\n        -0.9558239495713977551811958929297763099728,\n        0.9558239495713977551811958929297763099728,\n        -0.9915651684209309467300160047061507702525,\n        0.9915651684209309467300160047061507702525,\n    ],\n    [\n        0, -0.1603586456402253758680961157407435495048,\n        0.1603586456402253758680961157407435495048,\n        -0.3165640999636298319901173288498449178922,\n        0.3165640999636298319901173288498449178922,\n        -0.4645707413759609457172671481041023679762,\n        0.4645707413759609457172671481041023679762,\n        -0.6005453046616810234696381649462392798683,\n        0.6005453046616810234696381649462392798683,\n        -0.7209661773352293786170958608237816296571,\n        0.7209661773352293786170958608237816296571,\n        -0.8227146565371428249789224867127139017745,\n        0.8227146565371428249789224867127139017745,\n        -0.9031559036148179016426609285323124878093,\n        0.9031559036148179016426609285323124878093,\n        -0.960208152134830030852778840687651526615,\n        0.960208152134830030852778840687651526615,\n        -0.9924068438435844031890176702532604935893,\n        0.9924068438435844031890176702532604935893,\n    ],\n    [\n        -0.0765265211334973337546404093988382110047,\n        0.0765265211334973337546404093988382110047,\n        -0.227785851141645078080496195368574624743,\n        0.227785851141645078080496195368574624743,\n        -0.3737060887154195606725481770249272373957,\n        0.3737060887154195606725481770249272373957,\n        -0.5108670019508270980043640509552509984254,\n        0.5108670019508270980043640509552509984254,\n        -0.6360536807265150254528366962262859367433,\n        0.6360536807265150254528366962262859367433,\n        -0.7463319064601507926143050703556415903107,\n        0.7463319064601507926143050703556415903107,\n        -0.8391169718222188233945290617015206853296,\n        0.8391169718222188233945290617015206853296,\n        -0.9122344282513259058677524412032981130491,\n        0.9122344282513259058677524412032981130491,\n        -0.963971927277913791267666131197277221912,\n        0.963971927277913791267666131197277221912,\n        -0.9931285991850949247861223884713202782226,\n        0.9931285991850949247861223884713202782226,\n    ],\n    [\n        0, -0.1455618541608950909370309823386863301163,\n        0.1455618541608950909370309823386863301163,\n        -0.288021316802401096600792516064600319909,\n        0.288021316802401096600792516064600319909,\n        -0.4243421202074387835736688885437880520964,\n        0.4243421202074387835736688885437880520964,\n        -0.551618835887219807059018796724313286622,\n        0.551618835887219807059018796724313286622,\n        -0.667138804197412319305966669990339162597,\n        0.667138804197412319305966669990339162597,\n        -0.7684399634756779086158778513062280348209,\n        0.7684399634756779086158778513062280348209,\n        -0.8533633645833172836472506385875676702761,\n        0.8533633645833172836472506385875676702761,\n        -0.9200993341504008287901871337149688941591,\n        0.9200993341504008287901871337149688941591,\n        -0.9672268385663062943166222149076951614246,\n        0.9672268385663062943166222149076951614246,\n        -0.9937521706203895002602420359379409291933,\n        0.9937521706203895002602420359379409291933,\n    ],\n    [\n        -0.0697392733197222212138417961186280818222,\n        0.0697392733197222212138417961186280818222,\n        -0.2078604266882212854788465339195457342156,\n        0.2078604266882212854788465339195457342156,\n        -0.3419358208920842251581474204273796195591,\n        0.3419358208920842251581474204273796195591,\n        -0.4693558379867570264063307109664063460953,\n        0.4693558379867570264063307109664063460953,\n        -0.5876404035069115929588769276386473488776,\n        0.5876404035069115929588769276386473488776,\n        -0.6944872631866827800506898357622567712673,\n        0.6944872631866827800506898357622567712673,\n        -0.7878168059792081620042779554083515213881,\n        0.7878168059792081620042779554083515213881,\n        -0.8658125777203001365364256370193787290847,\n        0.8658125777203001365364256370193787290847,\n        -0.9269567721871740005206929392590531966353,\n        0.9269567721871740005206929392590531966353,\n        -0.9700604978354287271239509867652687108059,\n        0.9700604978354287271239509867652687108059,\n        -0.994294585482399292073031421161298980393,\n        0.994294585482399292073031421161298980393,\n    ],\n    [\n        0, -0.1332568242984661109317426822417661370104,\n        0.1332568242984661109317426822417661370104,\n        -0.264135680970344930533869538283309602979,\n        0.264135680970344930533869538283309602979,\n        -0.390301038030290831421488872880605458578,\n        0.390301038030290831421488872880605458578,\n        -0.5095014778460075496897930478668464305448,\n        0.5095014778460075496897930478668464305448,\n        -0.6196098757636461563850973116495956533871,\n        0.6196098757636461563850973116495956533871,\n        -0.7186613631319501944616244837486188483299,\n        0.7186613631319501944616244837486188483299,\n        -0.8048884016188398921511184069967785579414,\n        0.8048884016188398921511184069967785579414,\n        -0.8767523582704416673781568859341456716389,\n        0.8767523582704416673781568859341456716389,\n        -0.9329710868260161023491969890384229782357,\n        0.9329710868260161023491969890384229782357,\n        -0.9725424712181152319560240768207773751816,\n        0.9725424712181152319560240768207773751816,\n        -0.9947693349975521235239257154455743605736,\n        0.9947693349975521235239257154455743605736,\n    ],\n    [\n        -0.0640568928626056260850430826247450385909,\n        0.0640568928626056260850430826247450385909,\n        -0.1911188674736163091586398207570696318404,\n        0.1911188674736163091586398207570696318404,\n        -0.3150426796961633743867932913198102407864,\n        0.3150426796961633743867932913198102407864,\n        -0.4337935076260451384870842319133497124524,\n        0.4337935076260451384870842319133497124524,\n        -0.5454214713888395356583756172183723700107,\n        0.5454214713888395356583756172183723700107,\n        -0.6480936519369755692524957869107476266696,\n        0.6480936519369755692524957869107476266696,\n        -0.7401241915785543642438281030999784255232,\n        0.7401241915785543642438281030999784255232,\n        -0.8200019859739029219539498726697452080761,\n        0.8200019859739029219539498726697452080761,\n        -0.8864155270044010342131543419821967550873,\n        0.8864155270044010342131543419821967550873,\n        -0.9382745520027327585236490017087214496548,\n        0.9382745520027327585236490017087214496548,\n        -0.9747285559713094981983919930081690617411,\n        0.9747285559713094981983919930081690617411,\n        -0.9951872199970213601799974097007368118745,\n        0.9951872199970213601799974097007368118745,\n    ],\n];\nexports.cValues = [\n    [],\n    [],\n    [1.0, 1.0],\n    [\n        0.8888888888888888888888888888888888888888,\n        0.5555555555555555555555555555555555555555,\n        0.5555555555555555555555555555555555555555,\n    ],\n    [\n        0.6521451548625461426269360507780005927646,\n        0.6521451548625461426269360507780005927646,\n        0.3478548451374538573730639492219994072353,\n        0.3478548451374538573730639492219994072353,\n    ],\n    [\n        0.5688888888888888888888888888888888888888,\n        0.4786286704993664680412915148356381929122,\n        0.4786286704993664680412915148356381929122,\n        0.2369268850561890875142640407199173626432,\n        0.2369268850561890875142640407199173626432,\n    ],\n    [\n        0.3607615730481386075698335138377161116615,\n        0.3607615730481386075698335138377161116615,\n        0.4679139345726910473898703439895509948116,\n        0.4679139345726910473898703439895509948116,\n        0.1713244923791703450402961421727328935268,\n        0.1713244923791703450402961421727328935268,\n    ],\n    [\n        0.4179591836734693877551020408163265306122,\n        0.3818300505051189449503697754889751338783,\n        0.3818300505051189449503697754889751338783,\n        0.2797053914892766679014677714237795824869,\n        0.2797053914892766679014677714237795824869,\n        0.1294849661688696932706114326790820183285,\n        0.1294849661688696932706114326790820183285,\n    ],\n    [\n        0.3626837833783619829651504492771956121941,\n        0.3626837833783619829651504492771956121941,\n        0.3137066458778872873379622019866013132603,\n        0.3137066458778872873379622019866013132603,\n        0.2223810344533744705443559944262408844301,\n        0.2223810344533744705443559944262408844301,\n        0.1012285362903762591525313543099621901153,\n        0.1012285362903762591525313543099621901153,\n    ],\n    [\n        0.3302393550012597631645250692869740488788,\n        0.1806481606948574040584720312429128095143,\n        0.1806481606948574040584720312429128095143,\n        0.0812743883615744119718921581105236506756,\n        0.0812743883615744119718921581105236506756,\n        0.3123470770400028400686304065844436655987,\n        0.3123470770400028400686304065844436655987,\n        0.2606106964029354623187428694186328497718,\n        0.2606106964029354623187428694186328497718,\n    ],\n    [\n        0.295524224714752870173892994651338329421,\n        0.295524224714752870173892994651338329421,\n        0.2692667193099963550912269215694693528597,\n        0.2692667193099963550912269215694693528597,\n        0.2190863625159820439955349342281631924587,\n        0.2190863625159820439955349342281631924587,\n        0.1494513491505805931457763396576973324025,\n        0.1494513491505805931457763396576973324025,\n        0.0666713443086881375935688098933317928578,\n        0.0666713443086881375935688098933317928578,\n    ],\n    [\n        0.272925086777900630714483528336342189156,\n        0.2628045445102466621806888698905091953727,\n        0.2628045445102466621806888698905091953727,\n        0.2331937645919904799185237048431751394317,\n        0.2331937645919904799185237048431751394317,\n        0.1862902109277342514260976414316558916912,\n        0.1862902109277342514260976414316558916912,\n        0.1255803694649046246346942992239401001976,\n        0.1255803694649046246346942992239401001976,\n        0.0556685671161736664827537204425485787285,\n        0.0556685671161736664827537204425485787285,\n    ],\n    [\n        0.2491470458134027850005624360429512108304,\n        0.2491470458134027850005624360429512108304,\n        0.2334925365383548087608498989248780562594,\n        0.2334925365383548087608498989248780562594,\n        0.2031674267230659217490644558097983765065,\n        0.2031674267230659217490644558097983765065,\n        0.160078328543346226334652529543359071872,\n        0.160078328543346226334652529543359071872,\n        0.1069393259953184309602547181939962242145,\n        0.1069393259953184309602547181939962242145,\n        0.047175336386511827194615961485017060317,\n        0.047175336386511827194615961485017060317,\n    ],\n    [\n        0.2325515532308739101945895152688359481566,\n        0.2262831802628972384120901860397766184347,\n        0.2262831802628972384120901860397766184347,\n        0.2078160475368885023125232193060527633865,\n        0.2078160475368885023125232193060527633865,\n        0.1781459807619457382800466919960979955128,\n        0.1781459807619457382800466919960979955128,\n        0.1388735102197872384636017768688714676218,\n        0.1388735102197872384636017768688714676218,\n        0.0921214998377284479144217759537971209236,\n        0.0921214998377284479144217759537971209236,\n        0.0404840047653158795200215922009860600419,\n        0.0404840047653158795200215922009860600419,\n    ],\n    [\n        0.2152638534631577901958764433162600352749,\n        0.2152638534631577901958764433162600352749,\n        0.2051984637212956039659240656612180557103,\n        0.2051984637212956039659240656612180557103,\n        0.1855383974779378137417165901251570362489,\n        0.1855383974779378137417165901251570362489,\n        0.1572031671581935345696019386238421566056,\n        0.1572031671581935345696019386238421566056,\n        0.1215185706879031846894148090724766259566,\n        0.1215185706879031846894148090724766259566,\n        0.0801580871597602098056332770628543095836,\n        0.0801580871597602098056332770628543095836,\n        0.0351194603317518630318328761381917806197,\n        0.0351194603317518630318328761381917806197,\n    ],\n    [\n        0.2025782419255612728806201999675193148386,\n        0.1984314853271115764561183264438393248186,\n        0.1984314853271115764561183264438393248186,\n        0.1861610000155622110268005618664228245062,\n        0.1861610000155622110268005618664228245062,\n        0.1662692058169939335532008604812088111309,\n        0.1662692058169939335532008604812088111309,\n        0.1395706779261543144478047945110283225208,\n        0.1395706779261543144478047945110283225208,\n        0.1071592204671719350118695466858693034155,\n        0.1071592204671719350118695466858693034155,\n        0.0703660474881081247092674164506673384667,\n        0.0703660474881081247092674164506673384667,\n        0.0307532419961172683546283935772044177217,\n        0.0307532419961172683546283935772044177217,\n    ],\n    [\n        0.1894506104550684962853967232082831051469,\n        0.1894506104550684962853967232082831051469,\n        0.1826034150449235888667636679692199393835,\n        0.1826034150449235888667636679692199393835,\n        0.1691565193950025381893120790303599622116,\n        0.1691565193950025381893120790303599622116,\n        0.1495959888165767320815017305474785489704,\n        0.1495959888165767320815017305474785489704,\n        0.1246289712555338720524762821920164201448,\n        0.1246289712555338720524762821920164201448,\n        0.0951585116824927848099251076022462263552,\n        0.0951585116824927848099251076022462263552,\n        0.0622535239386478928628438369943776942749,\n        0.0622535239386478928628438369943776942749,\n        0.0271524594117540948517805724560181035122,\n        0.0271524594117540948517805724560181035122,\n    ],\n    [\n        0.1794464703562065254582656442618856214487,\n        0.1765627053669926463252709901131972391509,\n        0.1765627053669926463252709901131972391509,\n        0.1680041021564500445099706637883231550211,\n        0.1680041021564500445099706637883231550211,\n        0.1540457610768102880814315948019586119404,\n        0.1540457610768102880814315948019586119404,\n        0.1351363684685254732863199817023501973721,\n        0.1351363684685254732863199817023501973721,\n        0.1118838471934039710947883856263559267358,\n        0.1118838471934039710947883856263559267358,\n        0.0850361483171791808835353701910620738504,\n        0.0850361483171791808835353701910620738504,\n        0.0554595293739872011294401653582446605128,\n        0.0554595293739872011294401653582446605128,\n        0.0241483028685479319601100262875653246916,\n        0.0241483028685479319601100262875653246916,\n    ],\n    [\n        0.1691423829631435918406564701349866103341,\n        0.1691423829631435918406564701349866103341,\n        0.1642764837458327229860537764659275904123,\n        0.1642764837458327229860537764659275904123,\n        0.1546846751262652449254180038363747721932,\n        0.1546846751262652449254180038363747721932,\n        0.1406429146706506512047313037519472280955,\n        0.1406429146706506512047313037519472280955,\n        0.1225552067114784601845191268002015552281,\n        0.1225552067114784601845191268002015552281,\n        0.1009420441062871655628139849248346070628,\n        0.1009420441062871655628139849248346070628,\n        0.0764257302548890565291296776166365256053,\n        0.0764257302548890565291296776166365256053,\n        0.0497145488949697964533349462026386416808,\n        0.0497145488949697964533349462026386416808,\n        0.0216160135264833103133427102664524693876,\n        0.0216160135264833103133427102664524693876,\n    ],\n    [\n        0.1610544498487836959791636253209167350399,\n        0.1589688433939543476499564394650472016787,\n        0.1589688433939543476499564394650472016787,\n        0.152766042065859666778855400897662998461,\n        0.152766042065859666778855400897662998461,\n        0.1426067021736066117757461094419029724756,\n        0.1426067021736066117757461094419029724756,\n        0.1287539625393362276755157848568771170558,\n        0.1287539625393362276755157848568771170558,\n        0.1115666455473339947160239016817659974813,\n        0.1115666455473339947160239016817659974813,\n        0.0914900216224499994644620941238396526609,\n        0.0914900216224499994644620941238396526609,\n        0.0690445427376412265807082580060130449618,\n        0.0690445427376412265807082580060130449618,\n        0.0448142267656996003328381574019942119517,\n        0.0448142267656996003328381574019942119517,\n        0.0194617882297264770363120414644384357529,\n        0.0194617882297264770363120414644384357529,\n    ],\n    [\n        0.1527533871307258506980843319550975934919,\n        0.1527533871307258506980843319550975934919,\n        0.1491729864726037467878287370019694366926,\n        0.1491729864726037467878287370019694366926,\n        0.1420961093183820513292983250671649330345,\n        0.1420961093183820513292983250671649330345,\n        0.1316886384491766268984944997481631349161,\n        0.1316886384491766268984944997481631349161,\n        0.118194531961518417312377377711382287005,\n        0.118194531961518417312377377711382287005,\n        0.1019301198172404350367501354803498761666,\n        0.1019301198172404350367501354803498761666,\n        0.0832767415767047487247581432220462061001,\n        0.0832767415767047487247581432220462061001,\n        0.0626720483341090635695065351870416063516,\n        0.0626720483341090635695065351870416063516,\n        0.040601429800386941331039952274932109879,\n        0.040601429800386941331039952274932109879,\n        0.0176140071391521183118619623518528163621,\n        0.0176140071391521183118619623518528163621,\n    ],\n    [\n        0.1460811336496904271919851476833711882448,\n        0.1445244039899700590638271665537525436099,\n        0.1445244039899700590638271665537525436099,\n        0.1398873947910731547221334238675831108927,\n        0.1398873947910731547221334238675831108927,\n        0.132268938633337461781052574496775604329,\n        0.132268938633337461781052574496775604329,\n        0.1218314160537285341953671771257335983563,\n        0.1218314160537285341953671771257335983563,\n        0.1087972991671483776634745780701056420336,\n        0.1087972991671483776634745780701056420336,\n        0.0934444234560338615532897411139320884835,\n        0.0934444234560338615532897411139320884835,\n        0.0761001136283793020170516533001831792261,\n        0.0761001136283793020170516533001831792261,\n        0.0571344254268572082836358264724479574912,\n        0.0571344254268572082836358264724479574912,\n        0.0369537897708524937999506682993296661889,\n        0.0369537897708524937999506682993296661889,\n        0.0160172282577743333242246168584710152658,\n        0.0160172282577743333242246168584710152658,\n    ],\n    [\n        0.1392518728556319933754102483418099578739,\n        0.1392518728556319933754102483418099578739,\n        0.1365414983460151713525738312315173965863,\n        0.1365414983460151713525738312315173965863,\n        0.1311735047870623707329649925303074458757,\n        0.1311735047870623707329649925303074458757,\n        0.1232523768105124242855609861548144719594,\n        0.1232523768105124242855609861548144719594,\n        0.1129322960805392183934006074217843191142,\n        0.1129322960805392183934006074217843191142,\n        0.1004141444428809649320788378305362823508,\n        0.1004141444428809649320788378305362823508,\n        0.0859416062170677274144436813727028661891,\n        0.0859416062170677274144436813727028661891,\n        0.0697964684245204880949614189302176573987,\n        0.0697964684245204880949614189302176573987,\n        0.0522933351526832859403120512732112561121,\n        0.0522933351526832859403120512732112561121,\n        0.0337749015848141547933022468659129013491,\n        0.0337749015848141547933022468659129013491,\n        0.0146279952982722006849910980471854451902,\n        0.0146279952982722006849910980471854451902,\n    ],\n    [\n        0.1336545721861061753514571105458443385831,\n        0.132462039404696617371642464703316925805,\n        0.132462039404696617371642464703316925805,\n        0.1289057221880821499785953393997936532597,\n        0.1289057221880821499785953393997936532597,\n        0.1230490843067295304675784006720096548158,\n        0.1230490843067295304675784006720096548158,\n        0.1149966402224113649416435129339613014914,\n        0.1149966402224113649416435129339613014914,\n        0.1048920914645414100740861850147438548584,\n        0.1048920914645414100740861850147438548584,\n        0.0929157660600351474770186173697646486034,\n        0.0929157660600351474770186173697646486034,\n        0.0792814117767189549228925247420432269137,\n        0.0792814117767189549228925247420432269137,\n        0.0642324214085258521271696151589109980391,\n        0.0642324214085258521271696151589109980391,\n        0.0480376717310846685716410716320339965612,\n        0.0480376717310846685716410716320339965612,\n        0.0309880058569794443106942196418845053837,\n        0.0309880058569794443106942196418845053837,\n        0.0134118594871417720813094934586150649766,\n        0.0134118594871417720813094934586150649766,\n    ],\n    [\n        0.1279381953467521569740561652246953718517,\n        0.1279381953467521569740561652246953718517,\n        0.1258374563468282961213753825111836887264,\n        0.1258374563468282961213753825111836887264,\n        0.121670472927803391204463153476262425607,\n        0.121670472927803391204463153476262425607,\n        0.1155056680537256013533444839067835598622,\n        0.1155056680537256013533444839067835598622,\n        0.1074442701159656347825773424466062227946,\n        0.1074442701159656347825773424466062227946,\n        0.0976186521041138882698806644642471544279,\n        0.0976186521041138882698806644642471544279,\n        0.086190161531953275917185202983742667185,\n        0.086190161531953275917185202983742667185,\n        0.0733464814110803057340336152531165181193,\n        0.0733464814110803057340336152531165181193,\n        0.0592985849154367807463677585001085845412,\n        0.0592985849154367807463677585001085845412,\n        0.0442774388174198061686027482113382288593,\n        0.0442774388174198061686027482113382288593,\n        0.0285313886289336631813078159518782864491,\n        0.0285313886289336631813078159518782864491,\n        0.0123412297999871995468056670700372915759,\n        0.0123412297999871995468056670700372915759,\n    ],\n];\nexports.binomialCoefficients = [[1], [1, 1], [1, 2, 1], [1, 3, 3, 1]];\nconst getCubicArcLength = (xs, ys, t) => {\n    let z;\n    let sum;\n    let correctedT;\n    const n = 20;\n    z = t / 2;\n    sum = 0;\n    for (let i = 0; i < n; i++) {\n        correctedT = z * exports.tValues[n][i] + z;\n        sum += exports.cValues[n][i] * BFunc(xs, ys, correctedT);\n    }\n    return z * sum;\n};\nexports.getCubicArcLength = getCubicArcLength;\nconst getQuadraticArcLength = (xs, ys, t) => {\n    if (t === undefined) {\n        t = 1;\n    }\n    const ax = xs[0] - 2 * xs[1] + xs[2];\n    const ay = ys[0] - 2 * ys[1] + ys[2];\n    const bx = 2 * xs[1] - 2 * xs[0];\n    const by = 2 * ys[1] - 2 * ys[0];\n    const A = 4 * (ax * ax + ay * ay);\n    const B = 4 * (ax * bx + ay * by);\n    const C = bx * bx + by * by;\n    if (A === 0) {\n        return (t * Math.sqrt(Math.pow(xs[2] - xs[0], 2) + Math.pow(ys[2] - ys[0], 2)));\n    }\n    const b = B / (2 * A);\n    const c = C / A;\n    const u = t + b;\n    const k = c - b * b;\n    const uuk = u * u + k > 0 ? Math.sqrt(u * u + k) : 0;\n    const bbk = b * b + k > 0 ? Math.sqrt(b * b + k) : 0;\n    const term = b + Math.sqrt(b * b + k) !== 0\n        ? k * Math.log(Math.abs((u + uuk) / (b + bbk)))\n        : 0;\n    return (Math.sqrt(A) / 2) * (u * uuk - b * bbk + term);\n};\nexports.getQuadraticArcLength = getQuadraticArcLength;\nfunction BFunc(xs, ys, t) {\n    const xbase = getDerivative(1, t, xs);\n    const ybase = getDerivative(1, t, ys);\n    const combined = xbase * xbase + ybase * ybase;\n    return Math.sqrt(combined);\n}\nconst getDerivative = (derivative, t, vs) => {\n    const n = vs.length - 1;\n    let _vs;\n    let value;\n    if (n === 0) {\n        return 0;\n    }\n    if (derivative === 0) {\n        value = 0;\n        for (let k = 0; k <= n; k++) {\n            value +=\n                exports.binomialCoefficients[n][k] *\n                    Math.pow(1 - t, n - k) *\n                    Math.pow(t, k) *\n                    vs[k];\n        }\n        return value;\n    }\n    else {\n        _vs = new Array(n);\n        for (let k = 0; k < n; k++) {\n            _vs[k] = n * (vs[k + 1] - vs[k]);\n        }\n        return getDerivative(derivative - 1, t, _vs);\n    }\n};\nconst t2length = (length, totalLength, func) => {\n    let error = 1;\n    let t = length / totalLength;\n    let step = (length - func(t)) / totalLength;\n    let numIterations = 0;\n    while (error > 0.001) {\n        const increasedTLength = func(t + step);\n        const increasedTError = Math.abs(length - increasedTLength) / totalLength;\n        if (increasedTError < error) {\n            error = increasedTError;\n            t += step;\n        }\n        else {\n            const decreasedTLength = func(t - step);\n            const decreasedTError = Math.abs(length - decreasedTLength) / totalLength;\n            if (decreasedTError < error) {\n                error = decreasedTError;\n                t -= step;\n            }\n            else {\n                step /= 2;\n            }\n        }\n        numIterations++;\n        if (numIterations > 500) {\n            break;\n        }\n    }\n    return t;\n};\nexports.t2length = t2length;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Circle = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass Circle extends Shape_1.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    }\n    setHeight(height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    }\n}\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n(0, Global_1._registerNode)(Circle);\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Ellipse = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass Ellipse extends Shape_1.Shape {\n    _sceneFunc(context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radiusX() * 2;\n    }\n    getHeight() {\n        return this.radiusY() * 2;\n    }\n    setWidth(width) {\n        this.radiusX(width / 2);\n    }\n    setHeight(height) {\n        this.radiusY(height / 2);\n    }\n}\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n(0, Global_1._registerNode)(Ellipse);\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Image = void 0;\nconst Util_1 = require(\"../Util\");\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Global_1 = require(\"../Global\");\nconst Validators_1 = require(\"../Validators\");\nclass Image extends Shape_1.Shape {\n    constructor(attrs) {\n        super(attrs);\n        this.on('imageChange.konva', () => {\n            this._setImageLoad();\n        });\n        this._setImageLoad();\n    }\n    _setImageLoad() {\n        const image = this.image();\n        if (image && image.complete) {\n            return;\n        }\n        if (image && image.readyState === 4) {\n            return;\n        }\n        if (image && image['addEventListener']) {\n            image['addEventListener']('load', () => {\n                this._requestDraw();\n            });\n        }\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _sceneFunc(context) {\n        const width = this.getWidth();\n        const height = this.getHeight();\n        const cornerRadius = this.cornerRadius();\n        const image = this.attrs.image;\n        let params;\n        if (image) {\n            const cropWidth = this.attrs.cropWidth;\n            const cropHeight = this.attrs.cropHeight;\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height,\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke() || cornerRadius) {\n            context.beginPath();\n            cornerRadius\n                ? Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius)\n                : context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (cornerRadius) {\n                context.clip();\n            }\n            context.drawImage.apply(context, params);\n        }\n    }\n    _hitFunc(context) {\n        var width = this.width(), height = this.height(), cornerRadius = this.cornerRadius();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            Util_1.Util.drawRoundedRectPath(context, width, height, cornerRadius);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        var _a, _b;\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;\n    }\n    getHeight() {\n        var _a, _b;\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;\n    }\n    static fromURL(url, callback, onError = null) {\n        var img = Util_1.Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img,\n            });\n            callback(image);\n        };\n        img.onerror = onError;\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    }\n}\nexports.Image = Image;\nImage.prototype.className = 'Image';\n(0, Global_1._registerNode)(Image);\nFactory_1.Factory.addGetterSetter(Image, 'cornerRadius', 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tag = exports.Label = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Group_1 = require(\"../Group\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nvar ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'pointerDirection',\n    'pointerWidth',\n    'pointerHeight',\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nclass Label extends Group_1.Group {\n    constructor(config) {\n        super(config);\n        this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n    }\n    getText() {\n        return this.find('Text')[0];\n    }\n    getTag() {\n        return this.find('Tag')[0];\n    }\n    _addListeners(text) {\n        var that = this, n;\n        var func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    }\n    getWidth() {\n        return this.getText().width();\n    }\n    getHeight() {\n        return this.getText().height();\n    }\n    _sync() {\n        var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height,\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n            });\n        }\n    }\n}\nexports.Label = Label;\nLabel.prototype.className = 'Label';\n(0, Global_1._registerNode)(Label);\nclass Tag extends Shape_1.Shape {\n    _sceneFunc(context) {\n        var width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = this.cornerRadius();\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft =\n                topRight =\n                    bottomLeft =\n                        bottomRight =\n                            Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.beginPath();\n        context.moveTo(topLeft, 0);\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        context.lineTo(width - topRight, 0);\n        context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        context.lineTo(width, height - bottomRight);\n        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        context.lineTo(bottomLeft, height);\n        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        context.lineTo(0, topLeft);\n        context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getSelfRect() {\n        var x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    }\n}\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\n(0, Global_1._registerNode)(Tag);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, (0, Validators_1.getNumberOrArrayOfNumbersValidator)(4));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegularPolygon = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass RegularPolygon extends Shape_1.Shape {\n    _sceneFunc(context) {\n        const points = this._getPoints();\n        context.beginPath();\n        context.moveTo(points[0].x, points[0].y);\n        for (var n = 1; n < points.length; n++) {\n            context.lineTo(points[n].x, points[n].y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    _getPoints() {\n        const sides = this.attrs.sides;\n        const radius = this.attrs.radius || 0;\n        const points = [];\n        for (var n = 0; n < sides; n++) {\n            points.push({\n                x: radius * Math.sin((n * 2 * Math.PI) / sides),\n                y: -1 * radius * Math.cos((n * 2 * Math.PI) / sides),\n            });\n        }\n        return points;\n    }\n    getSelfRect() {\n        const points = this._getPoints();\n        var minX = points[0].x;\n        var maxX = points[0].y;\n        var minY = points[0].x;\n        var maxY = points[0].y;\n        points.forEach((point) => {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n(0, Global_1._registerNode)(RegularPolygon);\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Ring = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nvar PIx2 = Math.PI * 2;\nclass Ring extends Shape_1.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n(0, Global_1._registerNode)(Ring);\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sprite = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Animation_1 = require(\"../Animation\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass Sprite extends Shape_1.Shape {\n    constructor(config) {\n        super(config);\n        this._updated = true;\n        this.anim = new Animation_1.Animation(() => {\n            var updated = this._updated;\n            this._updated = false;\n            return updated;\n        });\n        this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n    }\n    _sceneFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    }\n    _hitFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _setInterval() {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    }\n    start() {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    }\n    stop() {\n        this.anim.stop();\n        clearInterval(this.interval);\n    }\n    isRunning() {\n        return this.anim.isRunning();\n    }\n    _updateIndex() {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    }\n}\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n(0, Global_1._registerNode)(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Star = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass Star extends Shape_1.Shape {\n    _sceneFunc(context) {\n        var innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (var n = 1; n < numPoints * 2; n++) {\n            var radius = n % 2 === 0 ? outerRadius : innerRadius;\n            var x = radius * Math.sin((n * Math.PI) / numPoints);\n            var y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n(0, Global_1._registerNode)(Star);\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, (0, Validators_1.getNumberValidator)());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextPath = void 0;\nconst Util_1 = require(\"../Util\");\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Path_1 = require(\"./Path\");\nconst Text_1 = require(\"./Text\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nvar EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nclass TextPath extends Shape_1.Shape {\n    constructor(config) {\n        super(config);\n        this.dummyCanvas = Util_1.Util.createCanvasElement();\n        this.dataArray = [];\n        this._readDataAttribute();\n        this.on('dataChange.konva', function () {\n            this._readDataAttribute();\n            this._setTextData();\n        });\n        this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva', this._setTextData);\n        this._setTextData();\n    }\n    _getTextPathLength() {\n        return Path_1.Path.getPathLength(this.dataArray);\n    }\n    _getPointAtLength(length) {\n        if (!this.attrs.data) {\n            return null;\n        }\n        const totalLength = this.pathLength;\n        if (length - 1 > totalLength) {\n            return null;\n        }\n        return Path_1.Path.getPointAtLengthOfDataArray(length, this.dataArray);\n    }\n    _readDataAttribute() {\n        this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n        this.pathLength = this._getTextPathLength();\n    }\n    _sceneFunc(context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        var textDecoration = this.textDecoration();\n        var fill = this.fill();\n        var fontSize = this.fontSize();\n        var glyphInfo = this.glyphInfo;\n        if (textDecoration === 'underline') {\n            context.beginPath();\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            var p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(fontSize, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (textDecoration === 'underline') {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    }\n    _hitFunc(context) {\n        context.beginPath();\n        var glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            var p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            var p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    setText(text) {\n        return Text_1.Text.prototype.setText.call(this, text);\n    }\n    _getContextFont() {\n        return Text_1.Text.prototype._getContextFont.call(this);\n    }\n    _getTextSize(text) {\n        var dummyCanvas = this.dummyCanvas;\n        var _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        var metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(`${this.fontSize()}`, 10),\n        };\n    }\n    _setTextData() {\n        const { width, height } = this._getTextSize(this.attrs.text);\n        this.textWidth = width;\n        this.textHeight = height;\n        this.glyphInfo = [];\n        if (!this.attrs.data) {\n            return null;\n        }\n        const letterSpacing = this.letterSpacing();\n        const align = this.align();\n        const kerningFunc = this.kerningFunc();\n        const textWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        let offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, this.pathLength / 2 - textWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, this.pathLength - textWidth);\n        }\n        const charArr = (0, Text_1.stringToArray)(this.text());\n        let offsetToGlyph = offset;\n        for (var i = 0; i < charArr.length; i++) {\n            const charStartPoint = this._getPointAtLength(offsetToGlyph);\n            if (!charStartPoint)\n                return;\n            let glyphWidth = this._getTextSize(charArr[i]).width + letterSpacing;\n            if (charArr[i] === ' ' && align === 'justify') {\n                const numberOfSpaces = this.text().split(' ').length - 1;\n                glyphWidth += (this.pathLength - textWidth) / numberOfSpaces;\n            }\n            const charEndPoint = this._getPointAtLength(offsetToGlyph + glyphWidth);\n            if (!charEndPoint)\n                return;\n            const width = Path_1.Path.getLineLength(charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);\n            let kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            charStartPoint.x += kern;\n            charEndPoint.x += kern;\n            this.textWidth += kern;\n            const midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);\n            const rotation = Math.atan2(charEndPoint.y - charStartPoint.y, charEndPoint.x - charStartPoint.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: charStartPoint,\n                p1: charEndPoint,\n            });\n            offsetToGlyph += glyphWidth;\n        }\n    }\n    getSelfRect() {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        var points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        var minX = points[0] || 0;\n        var maxX = points[0] || 0;\n        var minY = points[1] || 0;\n        var maxY = points[1] || 0;\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        var fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize,\n        };\n    }\n    destroy() {\n        Util_1.Util.releaseCanvas(this.dummyCanvas);\n        return super.destroy();\n    }\n}\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n(0, Global_1._registerNode)(TextPath);\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transformer = void 0;\nconst Util_1 = require(\"../Util\");\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Shape_1 = require(\"../Shape\");\nconst Rect_1 = require(\"./Rect\");\nconst Group_1 = require(\"../Group\");\nconst Global_1 = require(\"../Global\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_2 = require(\"../Global\");\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n    'anchorStyleFuncChange',\n]\n    .map((e) => e + `.${EVENTS_NAME}`)\n    .join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n];\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nconst TOUCH_DEVICE = 'ontouchstart' in Global_1.Konva._global;\nfunction getCursor(anchorName, rad) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util_1.Util.degToRad(ANGLES[anchorName] || 0);\n    var angle = ((Util_1.Util.radToDeg(rad) % 360) + 360) % 360;\n    if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nvar MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    const x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    const y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return Object.assign(Object.assign({}, shape), { rotation: shape.rotation + angleRad, x,\n        y });\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    const center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    let snapped = newRotationRad;\n    for (let i = 0; i < snaps.length; i++) {\n        const angle = Global_1.Konva.getAngle(snaps[i]);\n        const absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        const dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nclass Transformer extends Group_1.Group {\n    constructor(config) {\n        super(config);\n        this._transforming = false;\n        this._createElements();\n        this._handleMouseMove = this._handleMouseMove.bind(this);\n        this._handleMouseUp = this._handleMouseUp.bind(this);\n        this.update = this.update.bind(this);\n        this.on(ATTR_CHANGE_LIST, this.update);\n        if (this.getNode()) {\n            this.update();\n        }\n    }\n    attachTo(node) {\n        this.setNode(node);\n        return this;\n    }\n    setNode(node) {\n        Util_1.Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    }\n    getNode() {\n        return this._nodes && this._nodes[0];\n    }\n    _getEventNamespace() {\n        return EVENTS_NAME + this._id;\n    }\n    setNodes(nodes = []) {\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        const filteredNodes = nodes.filter((node) => {\n            if (node.isAncestorOf(this)) {\n                Util_1.Util.error('Konva.Transformer cannot be an a child of the node you are trying to attach');\n                return false;\n            }\n            return true;\n        });\n        this._nodes = nodes = filteredNodes;\n        if (nodes.length === 1 && this.useSingleNodeRotation()) {\n            this.rotation(nodes[0].getAbsoluteRotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach((node) => {\n            const onChange = () => {\n                if (this.nodes().length === 1 && this.useSingleNodeRotation()) {\n                    this.rotation(this.nodes()[0].getAbsoluteRotation());\n                }\n                this._resetTransformCache();\n                if (!this._transforming && !this.isDragging()) {\n                    this.update();\n                }\n            };\n            const additionalEvents = node._attrsAffectingSize\n                .map((prop) => prop + 'Change.' + this._getEventNamespace())\n                .join(' ');\n            node.on(additionalEvents, onChange);\n            node.on(TRANSFORM_CHANGE_STR.map((e) => e + `.${this._getEventNamespace()}`).join(' '), onChange);\n            node.on(`absoluteTransformChange.${this._getEventNamespace()}`, onChange);\n            this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    }\n    _proxyDrag(node) {\n        let lastPos;\n        node.on(`dragstart.${this._getEventNamespace()}`, (e) => {\n            lastPos = node.getAbsolutePosition();\n            if (!this.isDragging() && node !== this.findOne('.back')) {\n                this.startDrag(e, false);\n            }\n        });\n        node.on(`dragmove.${this._getEventNamespace()}`, (e) => {\n            if (!lastPos) {\n                return;\n            }\n            const abs = node.getAbsolutePosition();\n            const dx = abs.x - lastPos.x;\n            const dy = abs.y - lastPos.y;\n            this.nodes().forEach((otherNode) => {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                const otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag(e);\n            });\n            lastPos = null;\n        });\n    }\n    getNodes() {\n        return this._nodes || [];\n    }\n    getActiveAnchor() {\n        return this._movingAnchorName;\n    }\n    detach() {\n        if (this._nodes) {\n            this._nodes.forEach((node) => {\n                node.off('.' + this._getEventNamespace());\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    }\n    _resetTransformCache() {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    }\n    _getNodeRect() {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    }\n    __getNodeShape(node, rot = this.rotation(), relative) {\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        var absScale = node.getAbsoluteScale(relative);\n        var absPos = node.getAbsolutePosition(relative);\n        var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        const rotation = (Global_1.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        const box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -Global_1.Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    }\n    __getNodeRect() {\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        const totalPoints = [];\n        this.nodes().map((node) => {\n            const box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: this.ignoreStroke(),\n            });\n            var points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            var trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                var transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        const tr = new Util_1.Transform();\n        tr.rotate(-Global_1.Konva.getAngle(this.rotation()));\n        var minX, minY, maxX, maxY;\n        totalPoints.forEach(function (point) {\n            var transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        const p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        };\n    }\n    getX() {\n        return this._getNodeRect().x;\n    }\n    getY() {\n        return this._getNodeRect().y;\n    }\n    getWidth() {\n        return this._getNodeRect().width;\n    }\n    getHeight() {\n        return this._getNodeRect().height;\n    }\n    _createElements() {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    }\n    _createAnchor(name) {\n        var anchor = new Rect_1.Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', (e) => {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', () => {\n            var rad = Global_1.Konva.getAngle(this.rotation());\n            var cursor = getCursor(name, rad);\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = cursor);\n            this._cursorChange = true;\n        });\n        anchor.on('mouseout', () => {\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = '');\n            this._cursorChange = false;\n        });\n        this.add(anchor);\n    }\n    _createBack() {\n        var back = new Shape_1.Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            draggable: true,\n            sceneFunc(ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()) - padding);\n                }\n                ctx.fillStrokeShape(this);\n            },\n            hitFunc: (ctx, shape) => {\n                if (!this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                var padding = this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n        back.on('dragstart', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragmove', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        this.on('dragmove', (e) => {\n            this.update();\n        });\n    }\n    _handleMouseDown(e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mousemove', this._handleMouseMove);\n            window.addEventListener('touchmove', this._handleMouseMove);\n            window.addEventListener('mouseup', this._handleMouseUp, true);\n            window.addEventListener('touchend', this._handleMouseUp, true);\n        }\n        this._transforming = true;\n        var ap = e.target.getAbsolutePosition();\n        var pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        this._fire('transformstart', { evt: e.evt, target: this.getNode() });\n        this._nodes.forEach((target) => {\n            target._fire('transformstart', { evt: e.evt, target });\n        });\n    }\n    _handleMouseMove(e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        const pp = stage.getPointerPosition();\n        let newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        const oldAbs = anchorNode.getAbsolutePosition();\n        if (this.anchorDragBoundFunc()) {\n            newNodePos = this.anchorDragBoundFunc()(oldAbs, newNodePos, e);\n        }\n        anchorNode.setAbsolutePosition(newNodePos);\n        const newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            let delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            var oldRotation = Global_1.Konva.getAngle(this.rotation());\n            const newRotation = oldRotation + delta;\n            const tol = Global_1.Konva.getAngle(this.rotationSnapTolerance());\n            const snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            const diff = snappedRot - attrs.rotation;\n            const shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        var shiftBehavior = this.shiftBehavior();\n        var keepProportion;\n        if (shiftBehavior === 'inverted') {\n            keepProportion = this.keepRatio() && !e.shiftKey;\n        }\n        else if (shiftBehavior === 'none') {\n            keepProportion = this.keepRatio();\n        }\n        else {\n            keepProportion = this.keepRatio() || e.shiftKey;\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        }, e);\n    }\n    _handleMouseUp(e) {\n        this._removeEvents(e);\n    }\n    getAbsoluteTransform() {\n        return this.getTransform();\n    }\n    _removeEvents(e) {\n        if (this._transforming) {\n            this._transforming = false;\n            if (typeof window !== 'undefined') {\n                window.removeEventListener('mousemove', this._handleMouseMove);\n                window.removeEventListener('touchmove', this._handleMouseMove);\n                window.removeEventListener('mouseup', this._handleMouseUp, true);\n                window.removeEventListener('touchend', this._handleMouseUp, true);\n            }\n            var node = this.getNode();\n            this._fire('transformend', { evt: e, target: node });\n            if (node) {\n                this._nodes.forEach((target) => {\n                    target._fire('transformend', { evt: e, target });\n                });\n            }\n            this._movingAnchorName = null;\n        }\n    }\n    _fitNodesInto(newAttrs, evt) {\n        var oldAttrs = this._getNodeRect();\n        const minSize = 1;\n        if (Util_1.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (Util_1.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        const allowNegativeScale = this.flipEnabled();\n        var t = new Util_1.Transform();\n        t.rotate(Global_1.Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            const offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            const offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this.boundBoxFunc()) {\n            const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                Util_1.Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        const baseSize = 10000000;\n        const oldTr = new Util_1.Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        const newTr = new Util_1.Transform();\n        newTr.translate(newAttrs.x, newAttrs.y);\n        newTr.rotate(newAttrs.rotation);\n        newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n        const delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach((node) => {\n            var _a;\n            const parentTransform = node.getParent().getAbsoluteTransform();\n            const localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            const newLocalTransform = new Util_1.Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            const attrs = newLocalTransform.decompose();\n            node.setAttrs(attrs);\n            this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n            (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n        });\n        this.rotation(Util_1.Util._getRotation(newAttrs.rotation));\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    }\n    forceUpdate() {\n        this._resetTransformCache();\n        this.update();\n    }\n    _batchChangeChild(selector, attrs) {\n        const anchor = this.findOne(selector);\n        anchor.setAttrs(attrs);\n    }\n    update() {\n        var _a;\n        var attrs = this._getNodeRect();\n        this.rotation(Util_1.Util._getRotation(attrs.rotation));\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        const anchors = this.find('._anchor');\n        anchors.forEach((node) => {\n            node.setAttrs({\n                width: anchorSize,\n                height: anchorSize,\n                offsetX: anchorSize / 2,\n                offsetY: anchorSize / 2,\n                stroke: this.anchorStroke(),\n                strokeWidth: this.anchorStrokeWidth(),\n                fill: this.anchorFill(),\n                cornerRadius: this.anchorCornerRadius(),\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * Util_1.Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            x: 0,\n            y: 0,\n        });\n        const styleFunc = this.anchorStyleFunc();\n        if (styleFunc) {\n            anchors.forEach((node) => {\n                styleFunc(node);\n            });\n        }\n        (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n    }\n    isTransforming() {\n        return this._transforming;\n    }\n    stopTransform() {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    }\n    destroy() {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content && (this.getStage().content.style.cursor = '');\n        }\n        Group_1.Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    }\n    toObject() {\n        return Node_1.Node.prototype.toObject.call(this);\n    }\n    clone(obj) {\n        var node = Node_1.Node.prototype.clone.call(this, obj);\n        return node;\n    }\n    getClientRect() {\n        if (this.nodes().length > 0) {\n            return super.getClientRect();\n        }\n        else {\n            return { x: 0, y: 0, width: 0, height: 0 };\n        }\n    }\n}\nexports.Transformer = Transformer;\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util_1.Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util_1.Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\n(0, Global_2._registerNode)(Transformer);\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'flipEnabled', true, (0, Validators_1.getBooleanValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'shiftBehavior', 'default');\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'nodes');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorDragBoundFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStyleFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'useSingleNodeRotation', true);\nFactory_1.Factory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wedge = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Global_1 = require(\"../Global\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_2 = require(\"../Global\");\nclass Wedge extends Shape_1.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n(0, Global_2._registerNode)(Wedge);\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle',\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Blur = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nvar mul_table = [\n    512,\n    512,\n    456,\n    512,\n    328,\n    456,\n    335,\n    512,\n    405,\n    328,\n    271,\n    456,\n    388,\n    335,\n    292,\n    512,\n    454,\n    405,\n    364,\n    328,\n    298,\n    271,\n    496,\n    456,\n    420,\n    388,\n    360,\n    335,\n    312,\n    292,\n    273,\n    512,\n    482,\n    454,\n    428,\n    405,\n    383,\n    364,\n    345,\n    328,\n    312,\n    298,\n    284,\n    271,\n    259,\n    496,\n    475,\n    456,\n    437,\n    420,\n    404,\n    388,\n    374,\n    360,\n    347,\n    335,\n    323,\n    312,\n    302,\n    292,\n    282,\n    273,\n    265,\n    512,\n    497,\n    482,\n    468,\n    454,\n    441,\n    428,\n    417,\n    405,\n    394,\n    383,\n    373,\n    364,\n    354,\n    345,\n    337,\n    328,\n    320,\n    312,\n    305,\n    298,\n    291,\n    284,\n    278,\n    271,\n    265,\n    259,\n    507,\n    496,\n    485,\n    475,\n    465,\n    456,\n    446,\n    437,\n    428,\n    420,\n    412,\n    404,\n    396,\n    388,\n    381,\n    374,\n    367,\n    360,\n    354,\n    347,\n    341,\n    335,\n    329,\n    323,\n    318,\n    312,\n    307,\n    302,\n    297,\n    292,\n    287,\n    282,\n    278,\n    273,\n    269,\n    265,\n    261,\n    512,\n    505,\n    497,\n    489,\n    482,\n    475,\n    468,\n    461,\n    454,\n    447,\n    441,\n    435,\n    428,\n    422,\n    417,\n    411,\n    405,\n    399,\n    394,\n    389,\n    383,\n    378,\n    373,\n    368,\n    364,\n    359,\n    354,\n    350,\n    345,\n    341,\n    337,\n    332,\n    328,\n    324,\n    320,\n    316,\n    312,\n    309,\n    305,\n    301,\n    298,\n    294,\n    291,\n    287,\n    284,\n    281,\n    278,\n    274,\n    271,\n    268,\n    265,\n    262,\n    259,\n    257,\n    507,\n    501,\n    496,\n    491,\n    485,\n    480,\n    475,\n    470,\n    465,\n    460,\n    456,\n    451,\n    446,\n    442,\n    437,\n    433,\n    428,\n    424,\n    420,\n    416,\n    412,\n    408,\n    404,\n    400,\n    396,\n    392,\n    388,\n    385,\n    381,\n    377,\n    374,\n    370,\n    367,\n    363,\n    360,\n    357,\n    354,\n    350,\n    347,\n    344,\n    341,\n    338,\n    335,\n    332,\n    329,\n    326,\n    323,\n    320,\n    318,\n    315,\n    312,\n    310,\n    307,\n    304,\n    302,\n    299,\n    297,\n    294,\n    292,\n    289,\n    287,\n    285,\n    282,\n    280,\n    278,\n    275,\n    273,\n    271,\n    269,\n    267,\n    265,\n    263,\n    261,\n    259,\n];\nvar shg_table = [\n    9,\n    11,\n    12,\n    13,\n    13,\n    14,\n    14,\n    15,\n    15,\n    15,\n    15,\n    16,\n    16,\n    16,\n    16,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    var pixels = imageData.data, width = imageData.width, height = imageData.height;\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    for (i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (y = 0; y < height; y++) {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (x = 0; x < width; x++) {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        yp = width;\n        for (i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nconst Blur = function Blur(imageData) {\n    var radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\nexports.Blur = Blur;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Brighten = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Brighten = function (imageData) {\n    var brightness = this.brightness() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\nexports.Brighten = Brighten;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Contrast = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Contrast = function (imageData) {\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\n    for (i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\nexports.Contrast = Contrast;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emboss = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Util_1 = require(\"../Util\");\nconst Validators_1 = require(\"../Validators\");\nconst Emboss = function (imageData) {\n    var strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), dirY = 0, dirX = 0, data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    switch (direction) {\n        case 'top-left':\n            dirY = -1;\n            dirX = -1;\n            break;\n        case 'top':\n            dirY = -1;\n            dirX = 0;\n            break;\n        case 'top-right':\n            dirY = -1;\n            dirX = 1;\n            break;\n        case 'right':\n            dirY = 0;\n            dirX = 1;\n            break;\n        case 'bottom-right':\n            dirY = 1;\n            dirX = 1;\n            break;\n        case 'bottom':\n            dirY = 1;\n            dirX = 0;\n            break;\n        case 'bottom-left':\n            dirY = 1;\n            dirX = -1;\n            break;\n        case 'left':\n            dirY = 0;\n            dirX = -1;\n            break;\n        default:\n            Util_1.Util.error('Unknown emboss direction: ' + direction);\n    }\n    do {\n        var offsetY = (y - 1) * w4;\n        var otherY = dirY;\n        if (y + otherY < 1) {\n            otherY = 0;\n        }\n        if (y + otherY > h) {\n            otherY = 0;\n        }\n        var offsetYOther = (y - 1 + otherY) * w * 4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var otherX = dirX;\n            if (x + otherX < 1) {\n                otherX = 0;\n            }\n            if (x + otherX > w) {\n                otherX = 0;\n            }\n            var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n            var dR = data[offset] - data[offsetOther];\n            var dG = data[offset + 1] - data[offsetOther + 1];\n            var dB = data[offset + 2] - data[offsetOther + 2];\n            var dif = dR;\n            var absDif = dif > 0 ? dif : -dif;\n            var absG = dG > 0 ? dG : -dG;\n            var absB = dB > 0 ? dB : -dB;\n            if (absG > absDif) {\n                dif = dG;\n            }\n            if (absB > absDif) {\n                dif = dB;\n            }\n            dif *= strength;\n            if (blend) {\n                var r = data[offset] + dif;\n                var g = data[offset + 1] + dif;\n                var b = data[offset + 2] + dif;\n                data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n                data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n                data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n            }\n            else {\n                var grey = greyLevel - dif;\n                if (grey < 0) {\n                    grey = 0;\n                }\n                else if (grey > 255) {\n                    grey = 255;\n                }\n                data[offset] = data[offset + 1] = data[offset + 2] = grey;\n            }\n        } while (--x);\n    } while (--y);\n};\nexports.Emboss = Emboss;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Enhance = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nconst Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nexports.Enhance = Enhance;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Grayscale = void 0;\nconst Grayscale = function (imageData) {\n    var data = imageData.data, len = data.length, i, brightness;\n    for (i = 0; i < len; i += 4) {\n        brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\nexports.Grayscale = Grayscale;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HSL = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nconst HSL = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\nexports.HSL = HSL;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HSV = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst HSV = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\nexports.HSV = HSV;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Invert = void 0;\nconst Invert = function (imageData) {\n    var data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\nexports.Invert = Invert;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Kaleidoscope = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Util_1 = require(\"../Util\");\nconst Validators_1 = require(\"../Validators\");\nvar ToPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta;\n    var conversion = ((360 / tSize) * Math.PI) / 180, sin, cos;\n    for (theta = 0; theta < tSize; theta += 1) {\n        sin = Math.sin(theta * conversion);\n        cos = Math.cos(theta * conversion);\n        for (radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            i = (y * xSize + x) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nvar FromPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, dx, dy, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta, phaseShift = opt.polarRotation || 0;\n    var x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            dx = x - xMid;\n            dy = y - yMid;\n            radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            i = (y1 * xSize + x1) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nconst Kaleidoscope = function (imageData) {\n    var xSize = imageData.width, ySize = imageData.height;\n    var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    var power = Math.round(this.kaleidoscopePower());\n    var angle = Math.round(this.kaleidoscopeAngle());\n    var offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    var tempCanvas = Util_1.Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    var scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    Util_1.Util.releaseCanvas(tempCanvas);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2,\n    });\n    var minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    var sectionSize = minSectionSize;\n    var xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\nexports.Kaleidoscope = Kaleidoscope;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mask = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nfunction pixelAt(idata, x, y) {\n    var idx = (y * idata.width + x) * 4;\n    var d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    var m = [0, 0, 0];\n    for (var i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    var rgbv_no = pixelAt(idata, 0, 0);\n    var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    var thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        var mask = [];\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            var d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2],\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (var i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nconst Mask = function (imageData) {\n    var threshold = this.threshold(), mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\nexports.Mask = Mask;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Noise = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Noise = function (imageData) {\n    var amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2, i;\n    for (i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\nexports.Noise = Noise;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pixelate = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Util_1 = require(\"../Util\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Pixelate = function (imageData) {\n    var pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;\n    if (pixelSize <= 0) {\n        Util_1.Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (yBin = 0; yBin < nBinsY; yBin += 1) {\n            red = 0;\n            green = 0;\n            blue = 0;\n            alpha = 0;\n            xBinStart = xBin * pixelSize;\n            xBinEnd = xBinStart + pixelSize;\n            yBinStart = yBin * pixelSize;\n            yBinEnd = yBinStart + pixelSize;\n            pixelsInBin = 0;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nexports.Pixelate = Pixelate;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Posterize = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Posterize = function (imageData) {\n    var levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\nexports.Posterize = Posterize;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RGB = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst RGB = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\n    for (i = 0; i < nPixels; i += 4) {\n        brightness =\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\nexports.RGB = RGB;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RGBA = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst RGBA = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\n    for (i = 0; i < nPixels; i += 4) {\n        ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\nexports.RGBA = RGBA;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sepia = void 0;\nconst Sepia = function (imageData) {\n    var data = imageData.data, nPixels = data.length, i, r, g, b;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\nexports.Sepia = Sepia;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Solarize = void 0;\nconst Solarize = function (imageData) {\n    var data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    do {\n        var offsetY = (y - 1) * w4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var r = data[offset];\n            var g = data[offset + 1];\n            var b = data[offset + 2];\n            if (r > 127) {\n                r = 255 - r;\n            }\n            if (g > 127) {\n                g = 255 - g;\n            }\n            if (b > 127) {\n                b = 255 - b;\n            }\n            data[offset] = r;\n            data[offset + 1] = g;\n            data[offset + 2] = b;\n        } while (--x);\n    } while (--y);\n};\nexports.Solarize = Solarize;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Threshold = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nconst Threshold = function (imageData) {\n    var level = this.threshold() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\nexports.Threshold = Threshold;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n"],"sourceRoot":""}