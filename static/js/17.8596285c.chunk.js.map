{"version":3,"sources":["assets/images/canvas-items/table5.svg","assets/images/canvas-items/table4.svg","assets/images/canvas-items/index.js","assets/images/canvas-items/table6.svg","assets/images/canvas-items/divider.png","assets/images/canvas-items/sofa.svg","views/app-views/pages/planner/CanvasOptions.js","views/app-views/pages/planner/index.js"],"names":["items","tables","table5","table4","dividers","sofas","ItemList","_ref","itemList","map","item","index","_jsx","src","draggable","Row","id","children","CanvasOptions","_ref2","selectedShape","_useState","useState","_useState2","_slicedToArray","activeTab","setActiveTab","_useState3","_useState4","isActive","setIsActive","contentList","tabList","forEach","tab","key","_jsxs","_Fragment","Card","style","width","marginBottom","activeTabKey","onTabChange","ParamsCard","ControllersCard","_ref3","_useState5","_useState6","x","setX","_useState7","_useState8","y","setY","_useState9","_useState10","setWidth","_useState11","_useState12","height","setHeight","_useState13","_useState14","rotation","setRotation","paramStates","paramSetStates","useEffect","_selectedShape$attrs","attrs","inputs","inputList","input","value","min","Input","onChange","e","param","setAttrs","_objectSpread","_defineProperty","setState","target","disabled","type","placeholder","title","bordered","className","_ref4","Button","ghost","danger","name","htmlFor","Planner","setSelectedShape","window","addEventListener","stage","Konva","container","getContainer","backgroundColor","layer","gridLayer","startX","startY","endX","endY","gridCellSize","add","points","stroke","strokeWidth","drawGrid","tr","centeredScaling","enabledAnchors","on","maxBottom","maxRight","currentItem","itemWidth","itemHeight","itemSrc","shiftX","shiftY","deleteAllItems","destroyChildren","document","getElementById","files","fr","FileReader","readAsText","onload","JSON","parse","result","el","addImage","json","toJSON","a","createElement","file","Blob","href","URL","createObjectURL","download","click","remove","destroy","nodes","coords","getBoundingClientRect","pageX","left","pageY","top","con","preventDefault","draw","config","rest","_objectWithoutProperties","_excluded","imageObj","Image","image","concat","Math","random","max","scaleX","scaleY","setPointersPositions","_stage$getPointerPosi","getPointerPosition","gutter","Col","md","span","lg"],"mappings":"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","file":"static/js/17.8596285c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/table5.76ab0e33.svg\";","export default __webpack_public_path__ + \"static/media/table4.8a14c44f.svg\";","import table5 from \"./table5.svg\";\nimport table4 from \"./table4.svg\";\nimport table6 from \"./table6.svg\";\nimport sofa from \"./sofa.svg\";\nimport divider from \"./divider.png\";\nconst items = {\n  tables: [table5, table6, table4],\n  dividers: [divider],\n  sofas: [sofa],\n};\nexport default items;\n","export default __webpack_public_path__ + \"static/media/table6.1caa8b52.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAGCAYAAACxWNwrAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACigAwAEAAAAAQAAAAYAAAAA9y2aygAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAAAD1JREFUKBVjYBjkgBHkPveO4/8Hozt3VlgyssAclh9iDmMOCnrimpNgdzANCtfgcQQ8BGEuxqN2VApbCAAAfyUJEqqtI/EAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/sofa.ec6df58f.svg\";","import { useState, useEffect } from \"react\";\nimport items from \"../../../../assets/images/canvas-items\";\nimport { Row, Button, Card, Input } from \"antd\";\n\nconst ItemList = ({ items }) => {\n  const itemList = items.map((item, index) => {\n    return <img key={index} src={item} draggable=\"true\" />;\n  });\n  return <Row id=\"drag-items\">{itemList}</Row>;\n};\n\nconst CanvasOptions = ({ selectedShape }) => {\n  const [activeTab, setActiveTab] = useState(\"tables\");\n  const [isActive, setIsActive] = useState(false);\n  const handleTabChange = (key) => {\n    setActiveTab(key);\n  };\n\n  const contentList = {};\n  tabList.forEach(\n    (tab) => (contentList[tab.key] = <ItemList items={items[tab.key]} />)\n  );\n\n  return (\n    <>\n      <Card\n        style={{ width: \"100%\", marginBottom: \"20px\" }}\n        tabList={tabList}\n        activeTabKey={activeTab}\n        onTabChange={handleTabChange}\n      >\n        {contentList[activeTab]}\n      </Card>\n      <ParamsCard\n        selectedShape={selectedShape}\n        isActive={isActive}\n        setIsActive={setIsActive}\n      />\n      <ControllersCard isActive={isActive} />\n    </>\n  );\n};\n\nexport default CanvasOptions;\n\nconst ParamsCard = ({ selectedShape, isActive, setIsActive }) => {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [rotation, setRotation] = useState(0);\n  const paramStates = { x, y, width, height, rotation };\n  const paramSetStates = {\n    x: setX,\n    y: setY,\n    width: setWidth,\n    height: setHeight,\n    rotation: setRotation,\n  };\n  useEffect(() => {\n    if (selectedShape) {\n      setIsActive(true);\n      const { x, y, width, height, rotation } = selectedShape.attrs;\n      setX(x);\n      setY(y);\n      setWidth(width);\n      setHeight(height);\n      setRotation(rotation);\n    } else {\n      setIsActive(false);\n      setX(0);\n      setY(0);\n      setWidth(0);\n      setHeight(0);\n      setRotation(0);\n    }\n  }, [selectedShape]);\n\n  const setAttrs = (param, value) => {\n    selectedShape.setAttrs({ ...selectedShape.attrs, [param]: value });\n    const setState = paramSetStates[param];\n    setState(value);\n  };\n\n  const inputs = inputList.map((input) => {\n    const { value, min, key } = input;\n    const handler = (e) => {\n      setAttrs(value, +e.target.value);\n    };\n    return (\n      <label key={key}>\n        {value}\n        <Input\n          onChange={handler}\n          disabled={!isActive}\n          type=\"number\"\n          placeholder=\"0\"\n          min={min}\n          value={paramStates[value]}\n        />\n      </label>\n    );\n  });\n\n  return (\n    <Card title=\"Current Element Params\" bordered={false}>\n      <div className=\"item-params item-params__wrapper\">{inputs}</div>\n    </Card>\n  );\n};\n\nconst ControllersCard = ({ isActive }) => {\n  return (\n    <div className=\"controller-group\">\n      <Button id=\"save-items\" type=\"primary\">\n        Load\n      </Button>\n      <Button disabled={!isActive} id=\"delete-element\" type=\"primary\" ghost>\n        Delete element\n      </Button>\n      <Button id=\"delete-all\" danger>\n        Clear canvas\n      </Button>\n      <div className=\"file-input\">\n        <input\n          type=\"file\"\n          name=\"json-uploader\"\n          id=\"json-uploader\"\n          className=\"file-input__input\"\n        />\n        <label className=\"file-input__label\" htmlFor=\"json-uploader\">\n          <span>Upload file</span>\n        </label>\n      </div>\n    </div>\n  );\n};\n\nexport const inputList = [\n  {\n    key: \"1\",\n    value: \"x\",\n    min: 0,\n  },\n  {\n    key: \"2\",\n    value: \"y\",\n    min: 0,\n  },\n  {\n    key: \"3\",\n    value: \"width\",\n    min: 0,\n  },\n  {\n    key: \"4\",\n    value: \"height\",\n    min: 0,\n  },\n  {\n    key: \"5\",\n    value: \"rotation\",\n  },\n];\n\nexport const tabList = [\n  {\n    key: \"tables\",\n    tab: `tables`,\n  },\n  {\n    key: \"sofas\",\n    tab: `sofas`,\n  },\n  {\n    key: \"dividers\",\n    tab: `dividers`,\n  },\n];\n","import React, { useEffect, useState } from \"react\";\nimport * as Konva from \"konva\";\nimport { Row, Col } from \"antd\";\nimport CanvasOptions from \"./CanvasOptions\";\nimport \"antd/dist/antd.css\";\n\nconst Planner = () => {\n  const [selectedShape, setSelectedShape] = useState();\n  useEffect(() => {\n    window.addEventListener(\"click\", () => {});\n    const width = 990;\n    const height = 480;\n\n    var stage = new Konva.Stage({\n      container: \"container\",\n      width,\n      height,\n    });\n\n    stage.getContainer().style.backgroundColor = \"#242424\";\n\n    var layer = new Konva.Layer();\n\n    var gridLayer = new Konva.Layer();\n\n    function drawGrid(startX, startY, endX, endY, gridCellSize) {\n      for (let y = startY; y <= endY; y += gridCellSize) {\n        for (let x = startX; x <= endX; x += gridCellSize) {\n          gridLayer.add(\n            new Konva.Line({\n              points: [startX, y, endX, y],\n              stroke: \"#e7e7e7\",\n              strokeWidth: 0.01,\n            })\n          );\n        }\n\n        for (let x = startX; x <= endX; x += gridCellSize) {\n          gridLayer.add(\n            new Konva.Line({\n              points: [x, startY, x, endY],\n              stroke: \"#e7e7e7\",\n              strokeWidth: 0.01,\n            })\n          );\n        }\n      }\n    }\n\n    drawGrid(0, 0, width, height, 30);\n\n    stage.add(gridLayer);\n    stage.add(layer);\n\n    let tr = new Konva.Transformer({\n      centeredScaling: true,\n      enabledAnchors: [\"bottom-right\"],\n    });\n    layer.add(tr);\n\n    tr.on(\"dragmove\", function (e) {\n      const x = tr.attrs.x;\n      const y = tr.attrs.y;\n      const maxBottom = stage.attrs.height - tr.attrs.height;\n      const maxRight = stage.attrs.width - tr.attrs.width;\n      if (maxBottom - y < 0) tr.attrs.y = maxBottom;\n      if (maxRight - x < 0) tr.attrs.x = maxRight;\n      if (x < 0) tr.attrs.x = 0;\n      if (y < 0) tr.attrs.y = 0;\n    });\n\n    tr.on(\"dragend\", () => {\n      setSelectedShape(\"\");\n      setSelectedShape(currentItem);\n    });\n\n    const deleteItem = () => {\n      currentItem.destroy();\n      tr.nodes([]);\n    };\n\n    const deleteAllItems = () => {\n      layer.destroyChildren();\n      tr = new Konva.Transformer({\n        centeredScaling: true,\n        enabledAnchors: [\"bottom-right\"],\n      });\n      layer.add(tr);\n    };\n\n    const saveLayerItems = () => {\n      const json = layer.toJSON();\n      const a = document.createElement(\"a\");\n      const file = new Blob([json], { type: \"text/plain\" });\n      a.href = URL.createObjectURL(file);\n      a.download = \"planner.json\";\n      a.click();\n      a.remove();\n    };\n\n    const loadJson = (e) => {\n      deleteAllItems();\n      const files = e.target.files;\n      const fr = new FileReader();\n      fr.readAsText(files[0]);\n      fr.onload = function () {\n        const items = JSON.parse(fr.result);\n        items.children.map((el) => {\n          if (el.className === \"Image\") {\n            addImage(el.attrs);\n          }\n        });\n      };\n    };\n\n    document\n      .getElementById(\"json-uploader\")\n      .addEventListener(\"change\", loadJson);\n\n    document\n      .getElementById(\"save-items\")\n      .addEventListener(\"click\", saveLayerItems);\n    document\n      .getElementById(\"delete-element\")\n      .addEventListener(\"click\", deleteItem);\n\n    document\n      .getElementById(\"delete-all\")\n      .addEventListener(\"click\", deleteAllItems);\n\n    let itemWidth, itemHeight, itemSrc, shiftX, shiftY;\n    document\n      .getElementById(\"drag-items\")\n      .addEventListener(\"dragstart\", function (e) {\n        itemHeight = e.target.height;\n        itemWidth = e.target.width;\n        itemSrc = e.target.src;\n\n        const coords = e.target.getBoundingClientRect();\n        shiftX = e.pageX - coords.left;\n        shiftY = e.pageY - coords.top;\n      });\n\n    var con = stage.container();\n    con.addEventListener(\"dragover\", function (e) {\n      e.preventDefault();\n    });\n\n    let currentItem;\n\n    stage.on(\"click\", function (e) {\n      currentItem = e.target;\n      if (currentItem === stage) {\n        tr.nodes([]);\n        setSelectedShape(\"\");\n      } else {\n        tr.nodes([currentItem]);\n        setSelectedShape(currentItem);\n      }\n      layer.draw();\n    });\n\n    const addImage = (config) => {\n      const { x, y, width, height, src, name, ...rest } = config;\n      var imageObj = new Image();\n      imageObj.src = src;\n      imageObj.onload = function () {\n        var image = new Konva.Image({\n          x,\n          y,\n          image: imageObj,\n          width,\n          height,\n          draggable: true,\n          src: src,\n          rotation: 0,\n          name: name ? name : `${x * Math.random()}`,\n          ...rest,\n        });\n\n        layer.add(image);\n        image.on(\"dragmove\", (e) => {\n          const x = e.target.attrs.x;\n          const y = e.target.attrs.y;\n          const maxBottom = stage.attrs.height - e.target.attrs.height;\n          const maxRight = stage.attrs.width - e.target.attrs.width;\n\n          if (maxBottom - y < 0) e.target.attrs.y = maxBottom;\n          if (maxRight - x < 0) e.target.attrs.x = maxRight;\n          if (x < 0) e.target.attrs.x = 0;\n          if (y < 0) e.target.attrs.y = 0;\n        });\n\n        image.on(\"transformend\", function () {\n          setSelectedShape(\"\");\n          currentItem.width(\n            Math.max(5, currentItem.width() * currentItem.scaleX())\n          );\n          currentItem.height(\n            Math.max(5, currentItem.height() * currentItem.scaleY())\n          );\n          currentItem.scaleX(1);\n          currentItem.scaleY(1);\n          setSelectedShape(currentItem);\n        });\n      };\n    };\n\n    con.addEventListener(\"drop\", function (e) {\n      e.preventDefault();\n      stage.setPointersPositions(e);\n      const { x, y } = stage.getPointerPosition();\n      const xValue = x - shiftX;\n      const yValue = y - shiftY;\n      addImage({\n        x: xValue,\n        y: yValue,\n        width: itemWidth,\n        height: itemHeight,\n        src: itemSrc,\n      });\n    });\n  }, []);\n\n  return (\n    <Row gutter={30}>\n      <Col md={{ span: 24 }} lg={{ span: 12 }}>\n        <CanvasOptions selectedShape={selectedShape} />\n      </Col>\n      <Col md={{ span: 24 }} lg={{ span: 12 }}>\n        <div id=\"container\"></div>\n      </Col>\n    </Row>\n  );\n};\nexport default Planner;\n"],"sourceRoot":""}