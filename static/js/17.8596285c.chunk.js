(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[17],{598:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(13),r=a(6),s=a(0),A=a(528),c=a(522),d=a(523),l=a(4),o=a.p+"static/media/table5.76ab0e33.svg",g=a.p+"static/media/table4.8a14c44f.svg",b={tables:[o,a.p+"static/media/table6.1caa8b52.svg",g],dividers:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAGCAYAAACxWNwrAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACigAwAEAAAAAQAAAAYAAAAA9y2aygAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAAAD1JREFUKBVjYBjkgBHkPveO4/8Hozt3VlgyssAclh9iDmMOCnrimpNgdzANCtfgcQQ8BGEuxqN2VApbCAAAfyUJEqqtI/EAAAAASUVORK5CYII="],sofas:[a.p+"static/media/sofa.ec6df58f.svg"]},h=a(595),m=a(457),u=a(120),j=a(5),v=function(e){var t=e.items.map((function(e,t){return Object(j.jsx)("img",{src:e,draggable:"true"},t)}));return Object(j.jsx)(c.a,{id:"drag-items",children:t})},p=function(e){var t=e.selectedShape,a=Object(s.useState)("tables"),n=Object(r.a)(a,2),i=n[0],A=n[1],c=Object(s.useState)(!1),d=Object(r.a)(c,2),l=d[0],o=d[1],g={};return x.forEach((function(e){return g[e.key]=Object(j.jsx)(v,{items:b[e.key]})})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(h.a,{style:{width:"100%",marginBottom:"20px"},tabList:x,activeTabKey:i,onTabChange:function(e){A(e)},children:g[i]}),Object(j.jsx)(f,{selectedShape:t,isActive:l,setIsActive:o}),Object(j.jsx)(O,{isActive:l})]})},f=function(e){var t=e.selectedShape,a=e.isActive,i=e.setIsActive,A=Object(s.useState)(0),c=Object(r.a)(A,2),d=c[0],o=c[1],g=Object(s.useState)(0),b=Object(r.a)(g,2),u=b[0],v=b[1],p=Object(s.useState)(0),f=Object(r.a)(p,2),O=f[0],x=f[1],w=Object(s.useState)(0),E=Object(r.a)(w,2),I=E[0],C=E[1],k=Object(s.useState)(0),S=Object(r.a)(k,2),L=S[0],B=S[1],G={x:d,y:u,width:O,height:I,rotation:L},N={x:o,y:v,width:x,height:C,rotation:B};Object(s.useEffect)((function(){if(t){i(!0);var e=t.attrs,a=e.x,n=e.y,r=e.width,s=e.height,A=e.rotation;o(a),v(n),x(r),C(s),B(A)}else i(!1),o(0),v(0),x(0),C(0),B(0)}),[t]);var Y=y.map((function(e){var i=e.value,r=e.min,s=e.key;return Object(j.jsxs)("label",{children:[i,Object(j.jsx)(m.a,{onChange:function(e){!function(e,a){t.setAttrs(Object(n.a)(Object(n.a)({},t.attrs),{},Object(l.a)({},e,a))),(0,N[e])(a)}(i,+e.target.value)},disabled:!a,type:"number",placeholder:"0",min:r,value:G[i]})]},s)}));return Object(j.jsx)(h.a,{title:"Current Element Params",bordered:!1,children:Object(j.jsx)("div",{className:"item-params item-params__wrapper",children:Y})})},O=function(e){var t=e.isActive;return Object(j.jsxs)("div",{className:"controller-group",children:[Object(j.jsx)(u.a,{id:"save-items",type:"primary",children:"Load"}),Object(j.jsx)(u.a,{disabled:!t,id:"delete-element",type:"primary",ghost:!0,children:"Delete element"}),Object(j.jsx)(u.a,{id:"delete-all",danger:!0,children:"Clear canvas"}),Object(j.jsxs)("div",{className:"file-input",children:[Object(j.jsx)("input",{type:"file",name:"json-uploader",id:"json-uploader",className:"file-input__input"}),Object(j.jsx)("label",{className:"file-input__label",htmlFor:"json-uploader",children:Object(j.jsx)("span",{children:"Upload file"})})]})]})},y=[{key:"1",value:"x",min:0},{key:"2",value:"y",min:0},{key:"3",value:"width",min:0},{key:"4",value:"height",min:0},{key:"5",value:"rotation"}],x=[{key:"tables",tab:"tables"},{key:"sofas",tab:"sofas"},{key:"dividers",tab:"dividers"}],w=(a(579),["x","y","width","height","src","name"]);t.default=function(){var e=Object(s.useState)(),t=Object(r.a)(e,2),a=t[0],l=t[1];return Object(s.useEffect)((function(){window.addEventListener("click",(function(){}));var e=new A.Stage({container:"container",width:990,height:480});e.getContainer().style.backgroundColor="#242424";var t=new A.Layer,a=new A.Layer;!function(e,t,n,i,r){for(var s=t;s<=i;s+=r){for(var c=e;c<=n;c+=r)a.add(new A.Line({points:[e,s,n,s],stroke:"#e7e7e7",strokeWidth:.01}));for(var d=e;d<=n;d+=r)a.add(new A.Line({points:[d,t,d,i],stroke:"#e7e7e7",strokeWidth:.01}))}}(0,0,990,480,30),e.add(a),e.add(t);var r=new A.Transformer({centeredScaling:!0,enabledAnchors:["bottom-right"]});t.add(r),r.on("dragmove",(function(t){var a=r.attrs.x,n=r.attrs.y,i=e.attrs.height-r.attrs.height,s=e.attrs.width-r.attrs.width;i-n<0&&(r.attrs.y=i),s-a<0&&(r.attrs.x=s),a<0&&(r.attrs.x=0),n<0&&(r.attrs.y=0)})),r.on("dragend",(function(){l(""),l(h)}));var s,c,d,o,g,b=function(){t.destroyChildren(),r=new A.Transformer({centeredScaling:!0,enabledAnchors:["bottom-right"]}),t.add(r)};document.getElementById("json-uploader").addEventListener("change",(function(e){b();var t=e.target.files,a=new FileReader;a.readAsText(t[0]),a.onload=function(){JSON.parse(a.result).children.map((function(e){"Image"===e.className&&u(e.attrs)}))}})),document.getElementById("save-items").addEventListener("click",(function(){var e=t.toJSON(),a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="planner.json",a.click(),a.remove()})),document.getElementById("delete-element").addEventListener("click",(function(){h.destroy(),r.nodes([])})),document.getElementById("delete-all").addEventListener("click",b),document.getElementById("drag-items").addEventListener("dragstart",(function(e){c=e.target.height,s=e.target.width,d=e.target.src;var t=e.target.getBoundingClientRect();o=e.pageX-t.left,g=e.pageY-t.top}));var h,m=e.container();m.addEventListener("dragover",(function(e){e.preventDefault()})),e.on("click",(function(a){(h=a.target)===e?(r.nodes([]),l("")):(r.nodes([h]),l(h)),t.draw()}));var u=function(a){var r=a.x,s=a.y,c=a.width,d=a.height,o=a.src,g=a.name,b=Object(i.a)(a,w),m=new Image;m.src=o,m.onload=function(){var a=new A.Image(Object(n.a)({x:r,y:s,image:m,width:c,height:d,draggable:!0,src:o,rotation:0,name:g||"".concat(r*Math.random())},b));t.add(a),a.on("dragmove",(function(t){var a=t.target.attrs.x,n=t.target.attrs.y,i=e.attrs.height-t.target.attrs.height,r=e.attrs.width-t.target.attrs.width;i-n<0&&(t.target.attrs.y=i),r-a<0&&(t.target.attrs.x=r),a<0&&(t.target.attrs.x=0),n<0&&(t.target.attrs.y=0)})),a.on("transformend",(function(){l(""),h.width(Math.max(5,h.width()*h.scaleX())),h.height(Math.max(5,h.height()*h.scaleY())),h.scaleX(1),h.scaleY(1),l(h)}))}};m.addEventListener("drop",(function(t){t.preventDefault(),e.setPointersPositions(t);var a=e.getPointerPosition(),n=a.x,i=a.y;u({x:n-o,y:i-g,width:s,height:c,src:d})}))}),[]),Object(j.jsxs)(c.a,{gutter:30,children:[Object(j.jsx)(d.a,{md:{span:24},lg:{span:12},children:Object(j.jsx)(p,{selectedShape:a})}),Object(j.jsx)(d.a,{md:{span:24},lg:{span:12},children:Object(j.jsx)("div",{id:"container"})})]})}}}]);
//# sourceMappingURL=17.8596285c.chunk.js.map