(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[17],{598:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(13),r=a(6),A=a(0),s=a(528),c=a(522),d=a(523),l=a(4),o=a.p+"static/media/table5.76ab0e33.svg",g=a.p+"static/media/table4.8a14c44f.svg",b={tables:[o,a.p+"static/media/table6.1caa8b52.svg",g],dividers:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAGCAYAAACxWNwrAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACigAwAEAAAAAQAAAAYAAAAA9y2aygAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAAAD1JREFUKBVjYBjkgBHkPveO4/8Hozt3VlgyssAclh9iDmMOCnrimpNgdzANCtfgcQQ8BGEuxqN2VApbCAAAfyUJEqqtI/EAAAAASUVORK5CYII="],sofas:[a.p+"static/media/sofa.ec6df58f.svg"]},m=a(595),h=a(457),j=a(120),u=a(5),v=function(e){var t=e.items.map((function(e,t){return Object(u.jsx)("img",{src:e,draggable:"true"},t)}));return Object(u.jsx)(c.a,{id:"drag-items",children:t})},p=function(e){var t=e.selectedShape,a=Object(A.useState)("tables"),n=Object(r.a)(a,2),i=n[0],s=n[1],c=Object(A.useState)(!1),d=Object(r.a)(c,2),l=d[0],o=d[1],g={};return x.forEach((function(e){return g[e.key]=Object(u.jsx)(v,{items:b[e.key]})})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m.a,{style:{width:"100%",marginBottom:"20px"},tabList:x,activeTabKey:i,onTabChange:function(e){s(e)},children:g[i]}),Object(u.jsx)(f,{selectedShape:t,isActive:l,setIsActive:o}),Object(u.jsx)(O,{isActive:l})]})},f=function(e){var t=e.selectedShape,a=e.isActive,i=e.setIsActive,s=Object(A.useState)(0),c=Object(r.a)(s,2),d=c[0],o=c[1],g=Object(A.useState)(0),b=Object(r.a)(g,2),j=b[0],v=b[1],p=Object(A.useState)(0),f=Object(r.a)(p,2),O=f[0],x=f[1],w=Object(A.useState)(0),I=Object(r.a)(w,2),E=I[0],C=I[1],k=Object(A.useState)(0),S=Object(r.a)(k,2),L=S[0],B=S[1],G={x:d,y:j,width:O,height:E,rotation:L},N={x:o,y:v,width:x,height:C,rotation:B};Object(A.useEffect)((function(){if(t){i(!0);var e=t.attrs,a=e.x,n=e.y,r=e.width,A=e.height,s=e.rotation;o(a),v(n),x(r),C(A),B(s)}else i(!1),o(0),v(0),x(0),C(0),B(0)}),[t]);var Y=y.map((function(e){var i=e.value,r=e.min,A=e.key;return Object(u.jsxs)("label",{children:[i,Object(u.jsx)(h.a,{onChange:function(e){!function(e,a){t.setAttrs(Object(n.a)(Object(n.a)({},t.attrs),{},Object(l.a)({},e,a))),(0,N[e])(a)}(i,+e.target.value)},disabled:!a,type:"number",placeholder:"0",min:r,value:G[i]})]},A)}));return Object(u.jsx)(m.a,{title:"Current Element Params",bordered:!1,children:Object(u.jsx)("div",{className:"item-params item-params__wrapper",children:Y})})},O=function(e){var t=e.isActive;return Object(u.jsxs)("div",{className:"controller-group",children:[Object(u.jsx)(j.a,{id:"save-items",type:"primary",children:"Load"}),Object(u.jsx)(j.a,{disabled:!t,id:"delete-element",type:"primary",ghost:!0,children:"Delete element"}),Object(u.jsx)(j.a,{id:"delete-all",danger:!0,children:"Clear canvas"}),Object(u.jsxs)("div",{className:"file-input",children:[Object(u.jsx)("input",{type:"file",name:"json-uploader",id:"json-uploader",className:"file-input__input"}),Object(u.jsx)("label",{className:"file-input__label",htmlFor:"json-uploader",children:Object(u.jsx)("span",{children:"Upload file"})})]})]})},y=[{key:"1",value:"x",min:0},{key:"2",value:"y",min:0},{key:"3",value:"width",min:0},{key:"4",value:"height",min:0},{key:"5",value:"rotation"}],x=[{key:"tables",tab:"tables"},{key:"sofas",tab:"sofas"},{key:"dividers",tab:"dividers"}],w=(a(579),["x","y","width","height","src","name"]);t.default=function(){var e=Object(A.useState)(),t=Object(r.a)(e,2),a=t[0],l=t[1];return Object(A.useEffect)((function(){var e=new s.Stage({container:"container",width:990,height:480});e.getContainer().style.backgroundColor="#242424";var t=new s.Layer,a=new s.Layer;!function(e,t,n,i,r){for(var A=t;A<=i;A+=r){for(var c=e;c<=n;c+=r)a.add(new s.Line({points:[e,A,n,A],stroke:"#e7e7e7",strokeWidth:.01}));for(var d=e;d<=n;d+=r)a.add(new s.Line({points:[d,t,d,i],stroke:"#e7e7e7",strokeWidth:.01}))}}(0,0,990,480,30),e.add(a),e.add(t);var r=new s.Transformer({centeredScaling:!0,enabledAnchors:["bottom-right"]});t.add(r),r.on("dragend",(function(){l(""),l(m)}));var A,c,d,o,g,b=function(){t.destroyChildren(),r=new s.Transformer({centeredScaling:!0,enabledAnchors:["bottom-right"]}),t.add(r)};document.getElementById("json-uploader").addEventListener("change",(function(e){b();var t=e.target.files,a=new FileReader;a.readAsText(t[0]),a.onload=function(){JSON.parse(a.result).children.map((function(e){"Image"===e.className&&j(e.attrs)}))}})),document.getElementById("save-items").addEventListener("click",(function(){var e=t.toJSON(),a=document.createElement("a"),n=new Blob([e],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="planner.json",a.click(),a.remove()})),document.getElementById("delete-element").addEventListener("click",(function(){m.destroy(),r.nodes([])})),document.getElementById("delete-all").addEventListener("click",b),document.getElementById("drag-items").addEventListener("dragstart",(function(e){c=e.target.height,A=e.target.width,d=e.target.src;var t=e.target.getBoundingClientRect();o=e.pageX-t.left,g=e.pageY-t.top}));var m,h=e.container();h.addEventListener("dragover",(function(e){e.preventDefault()})),e.on("click",(function(a){(m=a.target)===e?(r.nodes([]),l("")):(r.nodes([m]),l(m)),t.draw()}));var j=function(a){var r=a.x,A=a.y,c=a.width,d=a.height,o=a.src,g=a.name,b=Object(i.a)(a,w),h=new Image;h.src=o,h.onload=function(){var a=new s.Image(Object(n.a)({x:r,y:A,image:h,width:c,height:d,draggable:!0,src:o,rotation:0,name:g||"".concat(r*Math.random())},b));t.add(a),a.on("dragmove",(function(t){var a=t.target.attrs.x,n=t.target.attrs.y,i=e.attrs.height-t.target.attrs.height,r=e.attrs.width-t.target.attrs.width;i-n<0&&(t.target.attrs.y=i),r-a<0&&(t.target.attrs.x=r),a<0&&(t.target.attrs.x=0),n<0&&(t.target.attrs.y=0)})),a.on("transformend",(function(){l(""),m.width(Math.max(5,m.width()*m.scaleX())),m.height(Math.max(5,m.height()*m.scaleY())),m.scaleX(1),m.scaleY(1),l(m)}))}};h.addEventListener("drop",(function(t){t.preventDefault(),e.setPointersPositions(t);var a=e.getPointerPosition(),n=a.x,i=a.y;j({x:n-o,y:i-g,width:A,height:c,src:d})}))}),[]),Object(u.jsxs)(c.a,{gutter:30,children:[Object(u.jsx)(d.a,{md:{span:24},lg:{span:12},children:Object(u.jsx)(p,{selectedShape:a})}),Object(u.jsx)(d.a,{md:{span:24},lg:{span:12},children:Object(u.jsx)("div",{id:"container"})})]})}}}]);
//# sourceMappingURL=17.8b55c950.chunk.js.map